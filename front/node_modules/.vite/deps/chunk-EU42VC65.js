import {
  M
} from "./chunk-4OORONJH.js";
import {
  $r,
  Ae,
  Cr,
  Fe,
  Ie,
  Jo,
  Jt,
  Kr,
  Le,
  Ml,
  Mn,
  Nt,
  On,
  Ot,
  Pe,
  Ps,
  Qu,
  R,
  Te,
  Vt,
  Ye,
  at,
  au,
  bn,
  de,
  el,
  fs,
  ke,
  kr,
  kt,
  ll,
  ln,
  ni,
  qh,
  tn,
  ve,
  vs,
  wl,
  xs
} from "./chunk-OXS4RIMJ.js";
import {
  lt,
  re,
  ze
} from "./chunk-STL2KGEZ.js";
import {
  c,
  e
} from "./chunk-LZZZ25U2.js";
import {
  q,
  s,
  t,
  u,
  v,
  w
} from "./chunk-ASEP6WC2.js";

// node_modules/@mappedin/mappedin-js/lib/esm/chunk-7MMSKILE.js
var qs = q((Dn, Xr) => {
  c();
  var Dc = 200, As = "__lodash_hash_undefined__", Ec = 800, Ac = 16, Os = 9007199254740991, Is = "[object Arguments]", Oc = "[object Array]", Ic = "[object AsyncFunction]", Pc = "[object Boolean]", Rc = "[object Date]", Uc = "[object Error]", Ps2 = "[object Function]", Lc = "[object GeneratorFunction]", Gc = "[object Map]", Fc = "[object Number]", Bc = "[object Null]", Rs = "[object Object]", Nc = "[object Proxy]", jc = "[object RegExp]", zc = "[object Set]", Vc = "[object String]", Wc = "[object Undefined]", Hc = "[object WeakMap]", Zc = "[object ArrayBuffer]", Yc = "[object DataView]", Xc = "[object Float32Array]", Kc = "[object Float64Array]", Jc = "[object Int8Array]", qc = "[object Int16Array]", Qc = "[object Int32Array]", $c = "[object Uint8Array]", ef = "[object Uint8ClampedArray]", tf = "[object Uint16Array]", rf = "[object Uint32Array]", nf = /[\\^$.*+?()[\]{}|]/g, of = /^\[object .+?Constructor\]$/, af = /^(?:0|[1-9]\d*)$/, je = {};
  je[Xc] = je[Kc] = je[Jc] = je[qc] = je[Qc] = je[$c] = je[ef] = je[tf] = je[rf] = true;
  je[Is] = je[Oc] = je[Zc] = je[Pc] = je[Yc] = je[Rc] = je[Uc] = je[Ps2] = je[Gc] = je[Fc] = je[Rs] = je[jc] = je[zc] = je[Vc] = je[Hc] = false;
  var Us = typeof global == "object" && global && global.Object === Object && global, sf = typeof self == "object" && self && self.Object === Object && self, On2 = Us || sf || Function("return this")(), Ls = typeof Dn == "object" && Dn && !Dn.nodeType && Dn, En = Ls && typeof Xr == "object" && Xr && !Xr.nodeType && Xr, Gs = En && En.exports === Ls, ko = Gs && Us.process, _s = function() {
    try {
      var t20 = En && En.require && En.require("util").types;
      return t20 || ko && ko.binding && ko.binding("util");
    } catch {
    }
  }(), Ts = _s && _s.isTypedArray;
  function Fs(t20, e2, r) {
    switch (r.length) {
      case 0:
        return t20.call(e2);
      case 1:
        return t20.call(e2, r[0]);
      case 2:
        return t20.call(e2, r[0], r[1]);
      case 3:
        return t20.call(e2, r[0], r[1], r[2]);
    }
    return t20.apply(e2, r);
  }
  function lf(t20, e2) {
    for (var r = -1, o = Array(t20); ++r < t20; ) o[r] = e2(r);
    return o;
  }
  function uf(t20) {
    return function(e2) {
      return t20(e2);
    };
  }
  function cf(t20, e2) {
    return t20 == null ? void 0 : t20[e2];
  }
  function ff(t20, e2) {
    return function(r) {
      return t20(e2(r));
    };
  }
  var df = Array.prototype, hf = Function.prototype, bi = Object.prototype, wo = On2["__core-js_shared__"], xi = hf.toString, jt = bi.hasOwnProperty, Ss = function() {
    var t20 = /[^.]+$/.exec(wo && wo.keys && wo.keys.IE_PROTO || "");
    return t20 ? "Symbol(src)_1." + t20 : "";
  }(), Bs = bi.toString, pf = xi.call(Object), mf = RegExp("^" + xi.call(jt).replace(nf, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), vi = Gs ? On2.Buffer : void 0, ks = On2.Symbol, ws = On2.Uint8Array, Ms = vi ? vi.allocUnsafe : void 0, Ns = ff(Object.getPrototypeOf, Object), Cs = Object.create, gf = bi.propertyIsEnumerable, vf = df.splice, Mr = ks ? ks.toStringTag : void 0, yi = function() {
    try {
      var t20 = Io(Object, "defineProperty");
      return t20({}, "", {}), t20;
    } catch {
    }
  }(), yf = vi ? vi.isBuffer : void 0, Ds = Math.max, bf = Date.now, js = Io(On2, "Map"), An = Io(Object, "create"), xf = /* @__PURE__ */ function() {
    function t20() {
    }
    return function(e2) {
      if (!Nt2(e2)) return {};
      if (Cs) return Cs(e2);
      t20.prototype = e2;
      var r = new t20();
      return t20.prototype = void 0, r;
    };
  }();
  function Cr2(t20) {
    var e2 = -1, r = t20 == null ? 0 : t20.length;
    for (this.clear(); ++e2 < r; ) {
      var o = t20[e2];
      this.set(o[0], o[1]);
    }
  }
  function _f() {
    this.__data__ = An ? An(null) : {}, this.size = 0;
  }
  function Tf(t20) {
    var e2 = this.has(t20) && delete this.__data__[t20];
    return this.size -= e2 ? 1 : 0, e2;
  }
  function Sf(t20) {
    var e2 = this.__data__;
    if (An) {
      var r = e2[t20];
      return r === As ? void 0 : r;
    }
    return jt.call(e2, t20) ? e2[t20] : void 0;
  }
  function kf(t20) {
    var e2 = this.__data__;
    return An ? e2[t20] !== void 0 : jt.call(e2, t20);
  }
  function wf(t20, e2) {
    var r = this.__data__;
    return this.size += this.has(t20) ? 0 : 1, r[t20] = An && e2 === void 0 ? As : e2, this;
  }
  Cr2.prototype.clear = _f;
  Cr2.prototype.delete = Tf;
  Cr2.prototype.get = Sf;
  Cr2.prototype.has = kf;
  Cr2.prototype.set = wf;
  function zt(t20) {
    var e2 = -1, r = t20 == null ? 0 : t20.length;
    for (this.clear(); ++e2 < r; ) {
      var o = t20[e2];
      this.set(o[0], o[1]);
    }
  }
  function Mf() {
    this.__data__ = [], this.size = 0;
  }
  function Cf(t20) {
    var e2 = this.__data__, r = _i(e2, t20);
    if (r < 0) return false;
    var o = e2.length - 1;
    return r == o ? e2.pop() : vf.call(e2, r, 1), --this.size, true;
  }
  function Df(t20) {
    var e2 = this.__data__, r = _i(e2, t20);
    return r < 0 ? void 0 : e2[r][1];
  }
  function Ef(t20) {
    return _i(this.__data__, t20) > -1;
  }
  function Af(t20, e2) {
    var r = this.__data__, o = _i(r, t20);
    return o < 0 ? (++this.size, r.push([t20, e2])) : r[o][1] = e2, this;
  }
  zt.prototype.clear = Mf;
  zt.prototype.delete = Cf;
  zt.prototype.get = Df;
  zt.prototype.has = Ef;
  zt.prototype.set = Af;
  function Kr2(t20) {
    var e2 = -1, r = t20 == null ? 0 : t20.length;
    for (this.clear(); ++e2 < r; ) {
      var o = t20[e2];
      this.set(o[0], o[1]);
    }
  }
  function Of() {
    this.size = 0, this.__data__ = { hash: new Cr2(), map: new (js || zt)(), string: new Cr2() };
  }
  function If(t20) {
    var e2 = Si(this, t20).delete(t20);
    return this.size -= e2 ? 1 : 0, e2;
  }
  function Pf(t20) {
    return Si(this, t20).get(t20);
  }
  function Rf(t20) {
    return Si(this, t20).has(t20);
  }
  function Uf(t20, e2) {
    var r = Si(this, t20), o = r.size;
    return r.set(t20, e2), this.size += r.size == o ? 0 : 1, this;
  }
  Kr2.prototype.clear = Of;
  Kr2.prototype.delete = If;
  Kr2.prototype.get = Pf;
  Kr2.prototype.has = Rf;
  Kr2.prototype.set = Uf;
  function Jr(t20) {
    var e2 = this.__data__ = new zt(t20);
    this.size = e2.size;
  }
  function Lf() {
    this.__data__ = new zt(), this.size = 0;
  }
  function Gf(t20) {
    var e2 = this.__data__, r = e2.delete(t20);
    return this.size = e2.size, r;
  }
  function Ff(t20) {
    return this.__data__.get(t20);
  }
  function Bf(t20) {
    return this.__data__.has(t20);
  }
  function Nf(t20, e2) {
    var r = this.__data__;
    if (r instanceof zt) {
      var o = r.__data__;
      if (!js || o.length < Dc - 1) return o.push([t20, e2]), this.size = ++r.size, this;
      r = this.__data__ = new Kr2(o);
    }
    return r.set(t20, e2), this.size = r.size, this;
  }
  Jr.prototype.clear = Lf;
  Jr.prototype.delete = Gf;
  Jr.prototype.get = Ff;
  Jr.prototype.has = Bf;
  Jr.prototype.set = Nf;
  function jf(t20, e2) {
    var r = Eo(t20), o = !r && Do(t20), i = !r && !o && Zs(t20), n = !r && !o && !i && Xs(t20), a = r || o || i || n, s2 = a ? lf(t20.length, String) : [], l = s2.length;
    for (var u2 in t20) (e2 || jt.call(t20, u2)) && !(a && (u2 == "length" || i && (u2 == "offset" || u2 == "parent") || n && (u2 == "buffer" || u2 == "byteLength" || u2 == "byteOffset") || Ws(u2, l))) && s2.push(u2);
    return s2;
  }
  function Mo(t20, e2, r) {
    (r !== void 0 && !ki(t20[e2], r) || r === void 0 && !(e2 in t20)) && Ao(t20, e2, r);
  }
  function zf(t20, e2, r) {
    var o = t20[e2];
    (!(jt.call(t20, e2) && ki(o, r)) || r === void 0 && !(e2 in t20)) && Ao(t20, e2, r);
  }
  function _i(t20, e2) {
    for (var r = t20.length; r--; ) if (ki(t20[r][0], e2)) return r;
    return -1;
  }
  function Ao(t20, e2, r) {
    e2 == "__proto__" && yi ? yi(t20, e2, { configurable: true, enumerable: true, value: r, writable: true }) : t20[e2] = r;
  }
  var Vf = td();
  function Ti(t20) {
    return t20 == null ? t20 === void 0 ? Wc : Bc : Mr && Mr in Object(t20) ? rd(t20) : ld(t20);
  }
  function Es(t20) {
    return In(t20) && Ti(t20) == Is;
  }
  function Wf(t20) {
    if (!Nt2(t20) || ad(t20)) return false;
    var e2 = Ro(t20) ? mf : of;
    return e2.test(dd(t20));
  }
  function Hf(t20) {
    return In(t20) && Ys(t20.length) && !!je[Ti(t20)];
  }
  function Zf(t20) {
    if (!Nt2(t20)) return sd(t20);
    var e2 = Hs(t20), r = [];
    for (var o in t20) o == "constructor" && (e2 || !jt.call(t20, o)) || r.push(o);
    return r;
  }
  function Oo(t20, e2, r, o, i) {
    t20 !== e2 && Vf(e2, function(n, a) {
      if (i || (i = new Jr()), Nt2(n)) Yf(t20, e2, a, r, Oo, o, i);
      else {
        var s2 = o ? o(Co(t20, a), n, a + "", t20, e2, i) : void 0;
        s2 === void 0 && (s2 = n), Mo(t20, a, s2);
      }
    }, Ks);
  }
  function Yf(t20, e2, r, o, i, n, a) {
    var s2 = Co(t20, r), l = Co(e2, r), u2 = a.get(l);
    if (u2) {
      Mo(t20, r, u2);
      return;
    }
    var c2 = n ? n(s2, l, r + "", t20, e2, a) : void 0, f = c2 === void 0;
    if (f) {
      var d = Eo(l), h = !d && Zs(l), g = !d && !h && Xs(l);
      c2 = l, d || h || g ? Eo(s2) ? c2 = s2 : hd(s2) ? c2 = Qf(s2) : h ? (f = false, c2 = Kf(l, true)) : g ? (f = false, c2 = qf(l, true)) : c2 = [] : pd(l) || Do(l) ? (c2 = s2, Do(s2) ? c2 = md(s2) : (!Nt2(s2) || Ro(s2)) && (c2 = nd(l))) : f = false;
    }
    f && (a.set(l, c2), i(c2, l, o, n, a), a.delete(l)), Mo(t20, r, c2);
  }
  function zs(t20, e2) {
    return cd(ud(t20, e2, Js), t20 + "");
  }
  var Xf = yi ? function(t20, e2) {
    return yi(t20, "toString", { configurable: true, enumerable: false, value: yd(e2), writable: true });
  } : Js;
  function Kf(t20, e2) {
    if (e2) return t20.slice();
    var r = t20.length, o = Ms ? Ms(r) : new t20.constructor(r);
    return t20.copy(o), o;
  }
  function Jf(t20) {
    var e2 = new t20.constructor(t20.byteLength);
    return new ws(e2).set(new ws(t20)), e2;
  }
  function qf(t20, e2) {
    var r = e2 ? Jf(t20.buffer) : t20.buffer;
    return new t20.constructor(r, t20.byteOffset, t20.length);
  }
  function Qf(t20, e2) {
    var r = -1, o = t20.length;
    for (e2 || (e2 = Array(o)); ++r < o; ) e2[r] = t20[r];
    return e2;
  }
  function $f(t20, e2, r, o) {
    var i = !r;
    r || (r = {});
    for (var n = -1, a = e2.length; ++n < a; ) {
      var s2 = e2[n], l = o ? o(r[s2], t20[s2], s2, r, t20) : void 0;
      l === void 0 && (l = t20[s2]), i ? Ao(r, s2, l) : zf(r, s2, l);
    }
    return r;
  }
  function ed(t20) {
    return zs(function(e2, r) {
      var o = -1, i = r.length, n = i > 1 ? r[i - 1] : void 0, a = i > 2 ? r[2] : void 0;
      for (n = t20.length > 3 && typeof n == "function" ? (i--, n) : void 0, a && id(r[0], r[1], a) && (n = i < 3 ? void 0 : n, i = 1), e2 = Object(e2); ++o < i; ) {
        var s2 = r[o];
        s2 && t20(e2, s2, o, n);
      }
      return e2;
    });
  }
  function td(t20) {
    return function(e2, r, o) {
      for (var i = -1, n = Object(e2), a = o(e2), s2 = a.length; s2--; ) {
        var l = a[t20 ? s2 : ++i];
        if (r(n[l], l, n) === false) break;
      }
      return e2;
    };
  }
  function Vs(t20, e2, r, o, i, n) {
    return Nt2(t20) && Nt2(e2) && (n.set(e2, t20), Oo(t20, e2, void 0, Vs, n), n.delete(e2)), t20;
  }
  function Si(t20, e2) {
    var r = t20.__data__;
    return od(e2) ? r[typeof e2 == "string" ? "string" : "hash"] : r.map;
  }
  function Io(t20, e2) {
    var r = cf(t20, e2);
    return Wf(r) ? r : void 0;
  }
  function rd(t20) {
    var e2 = jt.call(t20, Mr), r = t20[Mr];
    try {
      t20[Mr] = void 0;
      var o = true;
    } catch {
    }
    var i = Bs.call(t20);
    return o && (e2 ? t20[Mr] = r : delete t20[Mr]), i;
  }
  function nd(t20) {
    return typeof t20.constructor == "function" && !Hs(t20) ? xf(Ns(t20)) : {};
  }
  function Ws(t20, e2) {
    var r = typeof t20;
    return e2 = e2 == null ? Os : e2, !!e2 && (r == "number" || r != "symbol" && af.test(t20)) && t20 > -1 && t20 % 1 == 0 && t20 < e2;
  }
  function id(t20, e2, r) {
    if (!Nt2(r)) return false;
    var o = typeof e2;
    return (o == "number" ? Po(r) && Ws(e2, r.length) : o == "string" && e2 in r) ? ki(r[e2], t20) : false;
  }
  function od(t20) {
    var e2 = typeof t20;
    return e2 == "string" || e2 == "number" || e2 == "symbol" || e2 == "boolean" ? t20 !== "__proto__" : t20 === null;
  }
  function ad(t20) {
    return !!Ss && Ss in t20;
  }
  function Hs(t20) {
    var e2 = t20 && t20.constructor, r = typeof e2 == "function" && e2.prototype || bi;
    return t20 === r;
  }
  function sd(t20) {
    var e2 = [];
    if (t20 != null) for (var r in Object(t20)) e2.push(r);
    return e2;
  }
  function ld(t20) {
    return Bs.call(t20);
  }
  function ud(t20, e2, r) {
    return e2 = Ds(e2 === void 0 ? t20.length - 1 : e2, 0), function() {
      for (var o = arguments, i = -1, n = Ds(o.length - e2, 0), a = Array(n); ++i < n; ) a[i] = o[e2 + i];
      i = -1;
      for (var s2 = Array(e2 + 1); ++i < e2; ) s2[i] = o[i];
      return s2[e2] = r(a), Fs(t20, this, s2);
    };
  }
  function Co(t20, e2) {
    if (!(e2 === "constructor" && typeof t20[e2] == "function") && e2 != "__proto__") return t20[e2];
  }
  var cd = fd(Xf);
  function fd(t20) {
    var e2 = 0, r = 0;
    return function() {
      var o = bf(), i = Ac - (o - r);
      if (r = o, i > 0) {
        if (++e2 >= Ec) return arguments[0];
      } else e2 = 0;
      return t20.apply(void 0, arguments);
    };
  }
  function dd(t20) {
    if (t20 != null) {
      try {
        return xi.call(t20);
      } catch {
      }
      try {
        return t20 + "";
      } catch {
      }
    }
    return "";
  }
  function ki(t20, e2) {
    return t20 === e2 || t20 !== t20 && e2 !== e2;
  }
  var Do = Es(/* @__PURE__ */ function() {
    return arguments;
  }()) ? Es : function(t20) {
    return In(t20) && jt.call(t20, "callee") && !gf.call(t20, "callee");
  }, Eo = Array.isArray;
  function Po(t20) {
    return t20 != null && Ys(t20.length) && !Ro(t20);
  }
  function hd(t20) {
    return In(t20) && Po(t20);
  }
  var Zs = yf || bd;
  function Ro(t20) {
    if (!Nt2(t20)) return false;
    var e2 = Ti(t20);
    return e2 == Ps2 || e2 == Lc || e2 == Ic || e2 == Nc;
  }
  function Ys(t20) {
    return typeof t20 == "number" && t20 > -1 && t20 % 1 == 0 && t20 <= Os;
  }
  function Nt2(t20) {
    var e2 = typeof t20;
    return t20 != null && (e2 == "object" || e2 == "function");
  }
  function In(t20) {
    return t20 != null && typeof t20 == "object";
  }
  function pd(t20) {
    if (!In(t20) || Ti(t20) != Rs) return false;
    var e2 = Ns(t20);
    if (e2 === null) return true;
    var r = jt.call(e2, "constructor") && e2.constructor;
    return typeof r == "function" && r instanceof r && xi.call(r) == pf;
  }
  var Xs = Ts ? uf(Ts) : Hf;
  function md(t20) {
    return $f(t20, Ks(t20));
  }
  var gd = zs(function(t20) {
    return t20.push(void 0, Vs), Fs(vd, void 0, t20);
  });
  function Ks(t20) {
    return Po(t20) ? jf(t20, true) : Zf(t20);
  }
  var vd = ed(function(t20, e2, r, o) {
    Oo(t20, e2, r, o);
  });
  function yd(t20) {
    return function() {
      return t20;
    };
  }
  function Js(t20) {
    return t20;
  }
  function bd() {
    return false;
  }
  Xr.exports = gd;
});
c();
var ui = "[MappedinJS]";
var _u = ((i) => (i[i.LOG = 0] = "LOG", i[i.WARN = 1] = "WARN", i[i.ERROR = 2] = "ERROR", i[i.SILENT = 3] = "SILENT", i))(_u || {});
function Ap(t20) {
  0 <= t20 && t20 <= 3 && (ns.logState = t20);
}
var ns = { logState: e.env.NODE_ENV === "test" ? 3 : 0, log(...t20) {
  this.logState <= 0 && console.log(ui, ...t20);
}, warn(...t20) {
  this.logState <= 1 && console.warn(ui, ...t20);
}, error(...t20) {
  this.logState <= 2 && console.error(ui, ...t20);
}, assert(...t20) {
  console.assert(...t20);
}, time(t20) {
  console.time(t20);
}, timeEnd(t20) {
  console.timeEnd(t20);
}, throw(t20, e2) {
  throw new Error("".concat(ui, " ").concat(t20), e2);
} };
var Lt = ns;
c();
c();
var lr = class extends Error {
};
lr.prototype.name = "InvalidTokenError";
function Tu(t20) {
  return decodeURIComponent(atob(t20).replace(/(.)/g, (e2, r) => {
    let o = r.charCodeAt(0).toString(16).toUpperCase();
    return o.length < 2 && (o = "0" + o), "%" + o;
  }));
}
function Su(t20) {
  let e2 = t20.replace(/-/g, "+").replace(/_/g, "/");
  switch (e2.length % 4) {
    case 0:
      break;
    case 2:
      e2 += "==";
      break;
    case 3:
      e2 += "=";
      break;
    default:
      throw new Error("base64 string is not of the correct length");
  }
  try {
    return Tu(e2);
  } catch {
    return atob(e2);
  }
}
function is(t20, e2) {
  if (typeof t20 != "string") throw new lr("Invalid token specified: must be a string");
  e2 || (e2 = {});
  let r = e2.header === true ? 0 : 1, o = t20.split(".")[r];
  if (typeof o != "string") throw new lr("Invalid token specified: missing part #".concat(r + 1));
  let i;
  try {
    i = Su(o);
  } catch (n) {
    throw new lr("Invalid token specified: invalid base64 for part #".concat(r + 1, " (").concat(n.message, ")"));
  }
  try {
    return JSON.parse(i);
  } catch (n) {
    throw new lr("Invalid token specified: invalid json for part #".concat(r + 1, " (").concat(n.message, ")"));
  }
}
c();
var ur = 63710088e-1;
function Np(t20) {
  var r, o;
  let e2 = is(t20);
  if (e2.sub == null) throw new Error("Access token is missing sub claim.");
  return { sub: e2.sub, aud: typeof e2.aud == "string" ? [e2.aud] : (r = e2.aud) != null ? r : [], capabilities: (o = e2.capabilities) != null ? o : {} };
}
function Jt2(t20) {
  return t20 * (Math.PI / 180);
}
function ku(t20) {
  return t20 * (180 / Math.PI);
}
function jp(t20, e2) {
  let r = Math.pow(10, e2);
  return Math.sign(t20) * Math.round(Math.abs(t20) * r) / r;
}
function os(t20, e2) {
  return (t20 % e2 + e2) % e2;
}
function zp([t20, e2], [r, o]) {
  let i = Jt2(o - e2), n = Jt2(r - t20), a = Jt2(e2), s2 = Jt2(o), l = Math.sin(i / 2) * Math.sin(i / 2) + Math.sin(n / 2) * Math.sin(n / 2) * Math.cos(a) * Math.cos(s2), u2 = 2 * Math.atan2(Math.sqrt(l), Math.sqrt(1 - l));
  return ur * u2;
}
function Vp([t20, e2], [r, o]) {
  let i = Jt2(e2), n = Jt2(t20), a = Jt2(o), l = Jt2(r) - n, u2 = Math.sin(l) * Math.cos(a), c2 = Math.cos(i) * Math.sin(a) - Math.sin(i) * Math.cos(a) * Math.cos(l);
  return ku((Math.atan2(u2, c2) + Math.PI * 2) % (Math.PI * 2));
}
function Wp(t20, e2) {
  let r = os(t20, Math.PI * 2), o = os(e2, Math.PI * 2), i = o - r, n = o + (i > Math.PI ? -Math.PI * 2 : i < -Math.PI ? Math.PI * 2 : 0);
  return { start: r, end: n };
}
function wu(t20) {
  return t20 instanceof wl ? Number.isFinite(t20.min.x) && Number.isFinite(t20.min.y) && Number.isFinite(t20.max.x) && Number.isFinite(t20.max.y) : Number.isFinite(t20.min.x) && Number.isFinite(t20.min.y) && Number.isFinite(t20.max.x) && Number.isFinite(t20.max.y) && Number.isFinite(t20.min.z) && Number.isFinite(t20.max.z);
}
c();
function Yp(t20, e2, r = false) {
  let o = null, i = 0;
  return function(...n) {
    i++, i === 1 && r === true && t20(...n);
    let a = () => {
      (!r || i > 1) && t20(...n), o = null, i = 0;
    };
    clearTimeout(o), o = setTimeout(a, e2);
  };
}
c();
c();
var go = class t2 extends Error {
  constructor(r) {
    super(r);
    t(this, "name", "AssertionError");
    Error.captureStackTrace && Error.captureStackTrace(this, t2);
  }
};
function as(t20, e2) {
  if (t20 == null) {
    let r;
    if (e2 != null && e2.customMessage) r = e2.customMessage;
    else {
      let n = e2 != null && e2.valueName ? "'".concat(e2.valueName, "'") : "value";
      r = "Expected ".concat(n, " to be defined, but received ").concat(t20);
    }
    let o = (e2 == null ? void 0 : e2.errorClass) || go, i = new o(r);
    throw (e2 == null ? void 0 : e2.captureStackTrace) !== false && Error.captureStackTrace && Error.captureStackTrace(i, as), i;
  }
}
function Jp(t20, e2, r) {
  if (as(t20), (t20 == null ? void 0 : t20.type) !== e2) {
    let o = "Expected type ".concat(e2, " but got ").concat(t20 == null ? void 0 : t20.type);
    throw new Error(r != null ? r : o);
  }
}
c();
var vo = [0, 4, 6, 8, 10];
var tt = () => {
  let t20 = new Array(16).fill(0), e2 = Math.random() * 4294967296;
  for (let o = 0; o < t20.length; o++) o > 0 && (o & 3) === 0 && (e2 = Math.random() * 4294967296), t20[o] = e2 >>> ((o & 3) << 3) & 255;
  let r = t20.map((o) => o.toString(16).padStart(2, "0"));
  return r[6] = "4" + r[6][1], r[8] = ["8", "9", "a", "b"].includes(r[7][0]) ? r[7] : "a" + r[7][1], vo.map((o, i) => r.slice(o, i === vo.length - 1 ? void 0 : vo[i + 1]).join("")).join("-");
};
c();
var _n = class {
  constructor() {
    t(this, "_subscribers", {});
  }
  publish(e2, r) {
    !this._subscribers || !this._subscribers[e2] || this._subscribers[e2].forEach(function(o) {
      typeof o == "function" && o(r);
    });
  }
  on(e2, r) {
    this._subscribers || (this._subscribers = {}), this._subscribers[e2] = this._subscribers[e2] || [], this._subscribers[e2].push(r);
  }
  off(e2, r) {
    if (!this._subscribers || this._subscribers[e2] == null) return;
    let o = this._subscribers[e2].indexOf(r);
    o !== -1 && this._subscribers[e2].splice(o, 1);
  }
  destroy() {
    this._subscribers = {};
  }
};
c();
var ss = "mi-session-data";
var ls = "mi-local-data";
var cr;
var Tt;
var St;
var ci = class ci2 {
  constructor() {
    v(this, Tt);
    v(this, St);
    try {
      let e2 = sessionStorage.getItem(ss);
      e2 ? w(this, Tt, JSON.parse(e2)) : w(this, Tt, { id: tt() });
    } catch {
      w(this, Tt, { id: tt() });
    }
    try {
      let e2 = localStorage.getItem(ls);
      e2 ? w(this, St, JSON.parse(e2)) : w(this, St, { deviceId: tt() });
    } catch {
      w(this, St, { deviceId: tt() });
    }
    u(this, Tt).id || (u(this, Tt).id = tt()), u(this, St).deviceId || (u(this, St).deviceId = tt());
  }
  static getInstance() {
    return u(this, cr) || w(this, cr, new ci2()), u(this, cr);
  }
  static ___clearInstance() {
    w(this, cr, void 0);
  }
  saveSessionData(e2, r) {
    u(this, Tt)[e2] = r;
    try {
      return sessionStorage.setItem(ss, JSON.stringify(u(this, Tt))), true;
    } catch {
      return false;
    }
  }
  loadSessionData(e2) {
    let r = u(this, Tt)[e2];
    if (r != null) return r;
  }
  saveLocalData(e2, r) {
    u(this, St)[e2] = r;
    try {
      return localStorage.setItem(ls, JSON.stringify(u(this, St))), true;
    } catch {
      return false;
    }
  }
  loadLocalData(e2) {
    let r = u(this, St)[e2];
    if (r != null) return r;
  }
};
cr = /* @__PURE__ */ new WeakMap(), Tt = /* @__PURE__ */ new WeakMap(), St = /* @__PURE__ */ new WeakMap(), v(ci, cr);
var yo = ci;
c();
var Ie2;
(function(t20) {
  t20.assertEqual = (i) => i;
  function e2(i) {
  }
  t20.assertIs = e2;
  function r(i) {
    throw new Error();
  }
  t20.assertNever = r, t20.arrayToEnum = (i) => {
    let n = {};
    for (let a of i) n[a] = a;
    return n;
  }, t20.getValidEnumValues = (i) => {
    let n = t20.objectKeys(i).filter((s2) => typeof i[i[s2]] != "number"), a = {};
    for (let s2 of n) a[s2] = i[s2];
    return t20.objectValues(a);
  }, t20.objectValues = (i) => t20.objectKeys(i).map(function(n) {
    return i[n];
  }), t20.objectKeys = typeof Object.keys == "function" ? (i) => Object.keys(i) : (i) => {
    let n = [];
    for (let a in i) Object.prototype.hasOwnProperty.call(i, a) && n.push(a);
    return n;
  }, t20.find = (i, n) => {
    for (let a of i) if (n(a)) return a;
  }, t20.isInteger = typeof Number.isInteger == "function" ? (i) => Number.isInteger(i) : (i) => typeof i == "number" && isFinite(i) && Math.floor(i) === i;
  function o(i, n = " | ") {
    return i.map((a) => typeof a == "string" ? "'".concat(a, "'") : a).join(n);
  }
  t20.joinValues = o, t20.jsonStringifyReplacer = (i, n) => typeof n == "bigint" ? n.toString() : n;
})(Ie2 || (Ie2 = {}));
var xo;
(function(t20) {
  t20.mergeShapes = (e2, r) => ({ ...e2, ...r });
})(xo || (xo = {}));
var $ = Ie2.arrayToEnum(["string", "nan", "number", "integer", "float", "boolean", "date", "bigint", "symbol", "function", "undefined", "null", "array", "object", "unknown", "promise", "void", "never", "map", "set"]);
var qt = (t20) => {
  switch (typeof t20) {
    case "undefined":
      return $.undefined;
    case "string":
      return $.string;
    case "number":
      return isNaN(t20) ? $.nan : $.number;
    case "boolean":
      return $.boolean;
    case "function":
      return $.function;
    case "bigint":
      return $.bigint;
    case "symbol":
      return $.symbol;
    case "object":
      return Array.isArray(t20) ? $.array : t20 === null ? $.null : t20.then && typeof t20.then == "function" && t20.catch && typeof t20.catch == "function" ? $.promise : typeof Map < "u" && t20 instanceof Map ? $.map : typeof Set < "u" && t20 instanceof Set ? $.set : typeof Date < "u" && t20 instanceof Date ? $.date : $.object;
    default:
      return $.unknown;
  }
};
var H = Ie2.arrayToEnum(["invalid_type", "invalid_literal", "custom", "invalid_union", "invalid_union_discriminator", "invalid_enum_value", "unrecognized_keys", "invalid_arguments", "invalid_return_type", "invalid_date", "invalid_string", "too_small", "too_big", "invalid_intersection_types", "not_multiple_of", "not_finite"]);
var Mu = (t20) => JSON.stringify(t20, null, 2).replace(/"([^"]+)":/g, "$1:");
var ft = class t3 extends Error {
  constructor(e2) {
    super(), this.issues = [], this.addIssue = (o) => {
      this.issues = [...this.issues, o];
    }, this.addIssues = (o = []) => {
      this.issues = [...this.issues, ...o];
    };
    let r = new.target.prototype;
    Object.setPrototypeOf ? Object.setPrototypeOf(this, r) : this.__proto__ = r, this.name = "ZodError", this.issues = e2;
  }
  get errors() {
    return this.issues;
  }
  format(e2) {
    let r = e2 || function(n) {
      return n.message;
    }, o = { _errors: [] }, i = (n) => {
      for (let a of n.issues) if (a.code === "invalid_union") a.unionErrors.map(i);
      else if (a.code === "invalid_return_type") i(a.returnTypeError);
      else if (a.code === "invalid_arguments") i(a.argumentsError);
      else if (a.path.length === 0) o._errors.push(r(a));
      else {
        let s2 = o, l = 0;
        for (; l < a.path.length; ) {
          let u2 = a.path[l];
          l === a.path.length - 1 ? (s2[u2] = s2[u2] || { _errors: [] }, s2[u2]._errors.push(r(a))) : s2[u2] = s2[u2] || { _errors: [] }, s2 = s2[u2], l++;
        }
      }
    };
    return i(this), o;
  }
  static assert(e2) {
    if (!(e2 instanceof t3)) throw new Error("Not a ZodError: ".concat(e2));
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, Ie2.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(e2 = (r) => r.message) {
    let r = {}, o = [];
    for (let i of this.issues) i.path.length > 0 ? (r[i.path[0]] = r[i.path[0]] || [], r[i.path[0]].push(e2(i))) : o.push(e2(i));
    return { formErrors: o, fieldErrors: r };
  }
  get formErrors() {
    return this.flatten();
  }
};
ft.create = (t20) => new ft(t20);
var zr = (t20, e2) => {
  let r;
  switch (t20.code) {
    case H.invalid_type:
      t20.received === $.undefined ? r = "Required" : r = "Expected ".concat(t20.expected, ", received ").concat(t20.received);
      break;
    case H.invalid_literal:
      r = "Invalid literal value, expected ".concat(JSON.stringify(t20.expected, Ie2.jsonStringifyReplacer));
      break;
    case H.unrecognized_keys:
      r = "Unrecognized key(s) in object: ".concat(Ie2.joinValues(t20.keys, ", "));
      break;
    case H.invalid_union:
      r = "Invalid input";
      break;
    case H.invalid_union_discriminator:
      r = "Invalid discriminator value. Expected ".concat(Ie2.joinValues(t20.options));
      break;
    case H.invalid_enum_value:
      r = "Invalid enum value. Expected ".concat(Ie2.joinValues(t20.options), ", received '").concat(t20.received, "'");
      break;
    case H.invalid_arguments:
      r = "Invalid function arguments";
      break;
    case H.invalid_return_type:
      r = "Invalid function return type";
      break;
    case H.invalid_date:
      r = "Invalid date";
      break;
    case H.invalid_string:
      typeof t20.validation == "object" ? "includes" in t20.validation ? (r = 'Invalid input: must include "'.concat(t20.validation.includes, '"'), typeof t20.validation.position == "number" && (r = "".concat(r, " at one or more positions greater than or equal to ").concat(t20.validation.position))) : "startsWith" in t20.validation ? r = 'Invalid input: must start with "'.concat(t20.validation.startsWith, '"') : "endsWith" in t20.validation ? r = 'Invalid input: must end with "'.concat(t20.validation.endsWith, '"') : Ie2.assertNever(t20.validation) : t20.validation !== "regex" ? r = "Invalid ".concat(t20.validation) : r = "Invalid";
      break;
    case H.too_small:
      t20.type === "array" ? r = "Array must contain ".concat(t20.exact ? "exactly" : t20.inclusive ? "at least" : "more than", " ").concat(t20.minimum, " element(s)") : t20.type === "string" ? r = "String must contain ".concat(t20.exact ? "exactly" : t20.inclusive ? "at least" : "over", " ").concat(t20.minimum, " character(s)") : t20.type === "number" ? r = "Number must be ".concat(t20.exact ? "exactly equal to " : t20.inclusive ? "greater than or equal to " : "greater than ").concat(t20.minimum) : t20.type === "date" ? r = "Date must be ".concat(t20.exact ? "exactly equal to " : t20.inclusive ? "greater than or equal to " : "greater than ").concat(new Date(Number(t20.minimum))) : r = "Invalid input";
      break;
    case H.too_big:
      t20.type === "array" ? r = "Array must contain ".concat(t20.exact ? "exactly" : t20.inclusive ? "at most" : "less than", " ").concat(t20.maximum, " element(s)") : t20.type === "string" ? r = "String must contain ".concat(t20.exact ? "exactly" : t20.inclusive ? "at most" : "under", " ").concat(t20.maximum, " character(s)") : t20.type === "number" ? r = "Number must be ".concat(t20.exact ? "exactly" : t20.inclusive ? "less than or equal to" : "less than", " ").concat(t20.maximum) : t20.type === "bigint" ? r = "BigInt must be ".concat(t20.exact ? "exactly" : t20.inclusive ? "less than or equal to" : "less than", " ").concat(t20.maximum) : t20.type === "date" ? r = "Date must be ".concat(t20.exact ? "exactly" : t20.inclusive ? "smaller than or equal to" : "smaller than", " ").concat(new Date(Number(t20.maximum))) : r = "Invalid input";
      break;
    case H.custom:
      r = "Invalid input";
      break;
    case H.invalid_intersection_types:
      r = "Intersection results could not be merged";
      break;
    case H.not_multiple_of:
      r = "Number must be a multiple of ".concat(t20.multipleOf);
      break;
    case H.not_finite:
      r = "Number must be finite";
      break;
    default:
      r = e2.defaultError, Ie2.assertNever(t20);
  }
  return { message: r };
};
var fs2 = zr;
function Cu(t20) {
  fs2 = t20;
}
function fi() {
  return fs2;
}
var di = (t20) => {
  let { data: e2, path: r, errorMaps: o, issueData: i } = t20, n = [...r, ...i.path || []], a = { ...i, path: n };
  if (i.message !== void 0) return { ...i, path: n, message: i.message };
  let s2 = "", l = o.filter((u2) => !!u2).slice().reverse();
  for (let u2 of l) s2 = u2(a, { data: e2, defaultError: s2 }).message;
  return { ...i, path: n, message: s2 };
};
var Du = [];
function J(t20, e2) {
  let r = fi(), o = di({ issueData: e2, data: t20.data, path: t20.path, errorMaps: [t20.common.contextualErrorMap, t20.schemaErrorMap, r, r === zr ? void 0 : zr].filter((i) => !!i) });
  t20.common.issues.push(o);
}
var Qe = class t4 {
  constructor() {
    this.value = "valid";
  }
  dirty() {
    this.value === "valid" && (this.value = "dirty");
  }
  abort() {
    this.value !== "aborted" && (this.value = "aborted");
  }
  static mergeArray(e2, r) {
    let o = [];
    for (let i of r) {
      if (i.status === "aborted") return _e;
      i.status === "dirty" && e2.dirty(), o.push(i.value);
    }
    return { status: e2.value, value: o };
  }
  static async mergeObjectAsync(e2, r) {
    let o = [];
    for (let i of r) {
      let n = await i.key, a = await i.value;
      o.push({ key: n, value: a });
    }
    return t4.mergeObjectSync(e2, o);
  }
  static mergeObjectSync(e2, r) {
    let o = {};
    for (let i of r) {
      let { key: n, value: a } = i;
      if (n.status === "aborted" || a.status === "aborted") return _e;
      n.status === "dirty" && e2.dirty(), a.status === "dirty" && e2.dirty(), n.value !== "__proto__" && (typeof a.value < "u" || i.alwaysSet) && (o[n.value] = a.value);
    }
    return { status: e2.value, value: o };
  }
};
var _e = Object.freeze({ status: "aborted" });
var jr = (t20) => ({ status: "dirty", value: t20 });
var rt = (t20) => ({ status: "valid", value: t20 });
var _o = (t20) => t20.status === "aborted";
var To = (t20) => t20.status === "dirty";
var kn = (t20) => t20.status === "valid";
var wn = (t20) => typeof Promise < "u" && t20 instanceof Promise;
function hi(t20, e2, r, o) {
  if (r === "a" && !o) throw new TypeError("Private accessor was defined without a getter");
  if (typeof e2 == "function" ? t20 !== e2 || !o : !e2.has(t20)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return r === "m" ? o : r === "a" ? o.call(t20) : o ? o.value : e2.get(t20);
}
function ds(t20, e2, r, o, i) {
  if (o === "m") throw new TypeError("Private method is not writable");
  if (o === "a" && !i) throw new TypeError("Private accessor was defined without a setter");
  if (typeof e2 == "function" ? t20 !== e2 || !i : !e2.has(t20)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return o === "a" ? i.call(t20, r) : i ? i.value = r : e2.set(t20, r), r;
}
var fe;
(function(t20) {
  t20.errToObj = (e2) => typeof e2 == "string" ? { message: e2 } : e2 || {}, t20.toString = (e2) => typeof e2 == "string" ? e2 : e2 == null ? void 0 : e2.message;
})(fe || (fe = {}));
var Tn;
var Sn;
var vt = class {
  constructor(e2, r, o, i) {
    this._cachedPath = [], this.parent = e2, this.data = r, this._path = o, this._key = i;
  }
  get path() {
    return this._cachedPath.length || (this._key instanceof Array ? this._cachedPath.push(...this._path, ...this._key) : this._cachedPath.push(...this._path, this._key)), this._cachedPath;
  }
};
var us = (t20, e2) => {
  if (kn(e2)) return { success: true, data: e2.value };
  if (!t20.common.issues.length) throw new Error("Validation failed but no issues detected.");
  return { success: false, get error() {
    if (this._error) return this._error;
    let r = new ft(t20.common.issues);
    return this._error = r, this._error;
  } };
};
function we(t20) {
  if (!t20) return {};
  let { errorMap: e2, invalid_type_error: r, required_error: o, description: i } = t20;
  if (e2 && (r || o)) throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
  return e2 ? { errorMap: e2, description: i } : { errorMap: (a, s2) => {
    var l, u2;
    let { message: c2 } = t20;
    return a.code === "invalid_enum_value" ? { message: c2 != null ? c2 : s2.defaultError } : typeof s2.data > "u" ? { message: (l = c2 != null ? c2 : o) !== null && l !== void 0 ? l : s2.defaultError } : a.code !== "invalid_type" ? { message: s2.defaultError } : { message: (u2 = c2 != null ? c2 : r) !== null && u2 !== void 0 ? u2 : s2.defaultError };
  }, description: i };
}
var Me = class {
  constructor(e2) {
    this.spa = this.safeParseAsync, this._def = e2, this.parse = this.parse.bind(this), this.safeParse = this.safeParse.bind(this), this.parseAsync = this.parseAsync.bind(this), this.safeParseAsync = this.safeParseAsync.bind(this), this.spa = this.spa.bind(this), this.refine = this.refine.bind(this), this.refinement = this.refinement.bind(this), this.superRefine = this.superRefine.bind(this), this.optional = this.optional.bind(this), this.nullable = this.nullable.bind(this), this.nullish = this.nullish.bind(this), this.array = this.array.bind(this), this.promise = this.promise.bind(this), this.or = this.or.bind(this), this.and = this.and.bind(this), this.transform = this.transform.bind(this), this.brand = this.brand.bind(this), this.default = this.default.bind(this), this.catch = this.catch.bind(this), this.describe = this.describe.bind(this), this.pipe = this.pipe.bind(this), this.readonly = this.readonly.bind(this), this.isNullable = this.isNullable.bind(this), this.isOptional = this.isOptional.bind(this);
  }
  get description() {
    return this._def.description;
  }
  _getType(e2) {
    return qt(e2.data);
  }
  _getOrReturnCtx(e2, r) {
    return r || { common: e2.parent.common, data: e2.data, parsedType: qt(e2.data), schemaErrorMap: this._def.errorMap, path: e2.path, parent: e2.parent };
  }
  _processInputParams(e2) {
    return { status: new Qe(), ctx: { common: e2.parent.common, data: e2.data, parsedType: qt(e2.data), schemaErrorMap: this._def.errorMap, path: e2.path, parent: e2.parent } };
  }
  _parseSync(e2) {
    let r = this._parse(e2);
    if (wn(r)) throw new Error("Synchronous parse encountered promise.");
    return r;
  }
  _parseAsync(e2) {
    let r = this._parse(e2);
    return Promise.resolve(r);
  }
  parse(e2, r) {
    let o = this.safeParse(e2, r);
    if (o.success) return o.data;
    throw o.error;
  }
  safeParse(e2, r) {
    var o;
    let i = { common: { issues: [], async: (o = r == null ? void 0 : r.async) !== null && o !== void 0 ? o : false, contextualErrorMap: r == null ? void 0 : r.errorMap }, path: (r == null ? void 0 : r.path) || [], schemaErrorMap: this._def.errorMap, parent: null, data: e2, parsedType: qt(e2) }, n = this._parseSync({ data: e2, path: i.path, parent: i });
    return us(i, n);
  }
  async parseAsync(e2, r) {
    let o = await this.safeParseAsync(e2, r);
    if (o.success) return o.data;
    throw o.error;
  }
  async safeParseAsync(e2, r) {
    let o = { common: { issues: [], contextualErrorMap: r == null ? void 0 : r.errorMap, async: true }, path: (r == null ? void 0 : r.path) || [], schemaErrorMap: this._def.errorMap, parent: null, data: e2, parsedType: qt(e2) }, i = this._parse({ data: e2, path: o.path, parent: o }), n = await (wn(i) ? i : Promise.resolve(i));
    return us(o, n);
  }
  refine(e2, r) {
    let o = (i) => typeof r == "string" || typeof r > "u" ? { message: r } : typeof r == "function" ? r(i) : r;
    return this._refinement((i, n) => {
      let a = e2(i), s2 = () => n.addIssue({ code: H.custom, ...o(i) });
      return typeof Promise < "u" && a instanceof Promise ? a.then((l) => l ? true : (s2(), false)) : a ? true : (s2(), false);
    });
  }
  refinement(e2, r) {
    return this._refinement((o, i) => e2(o) ? true : (i.addIssue(typeof r == "function" ? r(o, i) : r), false));
  }
  _refinement(e2) {
    return new dt({ schema: this, typeName: xe.ZodEffects, effect: { type: "refinement", refinement: e2 } });
  }
  superRefine(e2) {
    return this._refinement(e2);
  }
  optional() {
    return gt.create(this, this._def);
  }
  nullable() {
    return Ot2.create(this, this._def);
  }
  nullish() {
    return this.nullable().optional();
  }
  array() {
    return Bt.create(this, this._def);
  }
  promise() {
    return er.create(this, this._def);
  }
  or(e2) {
    return vr.create([this, e2], this._def);
  }
  and(e2) {
    return yr.create(this, e2, this._def);
  }
  transform(e2) {
    return new dt({ ...we(this._def), schema: this, typeName: xe.ZodEffects, effect: { type: "transform", transform: e2 } });
  }
  default(e2) {
    let r = typeof e2 == "function" ? e2 : () => e2;
    return new Sr({ ...we(this._def), innerType: this, defaultValue: r, typeName: xe.ZodDefault });
  }
  brand() {
    return new Mn2({ typeName: xe.ZodBranded, type: this, ...we(this._def) });
  }
  catch(e2) {
    let r = typeof e2 == "function" ? e2 : () => e2;
    return new kr2({ ...we(this._def), innerType: this, catchValue: r, typeName: xe.ZodCatch });
  }
  describe(e2) {
    let r = this.constructor;
    return new r({ ...this._def, description: e2 });
  }
  pipe(e2) {
    return Cn.create(this, e2);
  }
  readonly() {
    return wr.create(this);
  }
  isOptional() {
    return this.safeParse(void 0).success;
  }
  isNullable() {
    return this.safeParse(null).success;
  }
};
var Eu = /^c[^\s-]{8,}$/i;
var Au = /^[0-9a-z]+$/;
var Ou = /^[0-9A-HJKMNP-TV-Z]{26}$/;
var Iu = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i;
var Pu = /^[a-z0-9_-]{21}$/i;
var Ru = /^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/;
var Uu = /^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;
var Lu = "^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";
var bo;
var Gu = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;
var Fu = /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;
var Bu = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;
var hs = "((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))";
var Nu = new RegExp("^".concat(hs, "$"));
function ps(t20) {
  let e2 = "([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";
  return t20.precision ? e2 = "".concat(e2, "\\.\\d{").concat(t20.precision, "}") : t20.precision == null && (e2 = "".concat(e2, "(\\.\\d+)?")), e2;
}
function ju(t20) {
  return new RegExp("^".concat(ps(t20), "$"));
}
function ms(t20) {
  let e2 = "".concat(hs, "T").concat(ps(t20)), r = [];
  return r.push(t20.local ? "Z?" : "Z"), t20.offset && r.push("([+-]\\d{2}:?\\d{2})"), e2 = "".concat(e2, "(").concat(r.join("|"), ")"), new RegExp("^".concat(e2, "$"));
}
function zu(t20, e2) {
  return !!((e2 === "v4" || !e2) && Gu.test(t20) || (e2 === "v6" || !e2) && Fu.test(t20));
}
var Qt = class t5 extends Me {
  _parse(e2) {
    if (this._def.coerce && (e2.data = String(e2.data)), this._getType(e2) !== $.string) {
      let n = this._getOrReturnCtx(e2);
      return J(n, { code: H.invalid_type, expected: $.string, received: n.parsedType }), _e;
    }
    let o = new Qe(), i;
    for (let n of this._def.checks) if (n.kind === "min") e2.data.length < n.value && (i = this._getOrReturnCtx(e2, i), J(i, { code: H.too_small, minimum: n.value, type: "string", inclusive: true, exact: false, message: n.message }), o.dirty());
    else if (n.kind === "max") e2.data.length > n.value && (i = this._getOrReturnCtx(e2, i), J(i, { code: H.too_big, maximum: n.value, type: "string", inclusive: true, exact: false, message: n.message }), o.dirty());
    else if (n.kind === "length") {
      let a = e2.data.length > n.value, s2 = e2.data.length < n.value;
      (a || s2) && (i = this._getOrReturnCtx(e2, i), a ? J(i, { code: H.too_big, maximum: n.value, type: "string", inclusive: true, exact: true, message: n.message }) : s2 && J(i, { code: H.too_small, minimum: n.value, type: "string", inclusive: true, exact: true, message: n.message }), o.dirty());
    } else if (n.kind === "email") Uu.test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { validation: "email", code: H.invalid_string, message: n.message }), o.dirty());
    else if (n.kind === "emoji") bo || (bo = new RegExp(Lu, "u")), bo.test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { validation: "emoji", code: H.invalid_string, message: n.message }), o.dirty());
    else if (n.kind === "uuid") Iu.test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { validation: "uuid", code: H.invalid_string, message: n.message }), o.dirty());
    else if (n.kind === "nanoid") Pu.test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { validation: "nanoid", code: H.invalid_string, message: n.message }), o.dirty());
    else if (n.kind === "cuid") Eu.test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { validation: "cuid", code: H.invalid_string, message: n.message }), o.dirty());
    else if (n.kind === "cuid2") Au.test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { validation: "cuid2", code: H.invalid_string, message: n.message }), o.dirty());
    else if (n.kind === "ulid") Ou.test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { validation: "ulid", code: H.invalid_string, message: n.message }), o.dirty());
    else if (n.kind === "url") try {
      new URL(e2.data);
    } catch {
      i = this._getOrReturnCtx(e2, i), J(i, { validation: "url", code: H.invalid_string, message: n.message }), o.dirty();
    }
    else n.kind === "regex" ? (n.regex.lastIndex = 0, n.regex.test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { validation: "regex", code: H.invalid_string, message: n.message }), o.dirty())) : n.kind === "trim" ? e2.data = e2.data.trim() : n.kind === "includes" ? e2.data.includes(n.value, n.position) || (i = this._getOrReturnCtx(e2, i), J(i, { code: H.invalid_string, validation: { includes: n.value, position: n.position }, message: n.message }), o.dirty()) : n.kind === "toLowerCase" ? e2.data = e2.data.toLowerCase() : n.kind === "toUpperCase" ? e2.data = e2.data.toUpperCase() : n.kind === "startsWith" ? e2.data.startsWith(n.value) || (i = this._getOrReturnCtx(e2, i), J(i, { code: H.invalid_string, validation: { startsWith: n.value }, message: n.message }), o.dirty()) : n.kind === "endsWith" ? e2.data.endsWith(n.value) || (i = this._getOrReturnCtx(e2, i), J(i, { code: H.invalid_string, validation: { endsWith: n.value }, message: n.message }), o.dirty()) : n.kind === "datetime" ? ms(n).test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { code: H.invalid_string, validation: "datetime", message: n.message }), o.dirty()) : n.kind === "date" ? Nu.test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { code: H.invalid_string, validation: "date", message: n.message }), o.dirty()) : n.kind === "time" ? ju(n).test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { code: H.invalid_string, validation: "time", message: n.message }), o.dirty()) : n.kind === "duration" ? Ru.test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { validation: "duration", code: H.invalid_string, message: n.message }), o.dirty()) : n.kind === "ip" ? zu(e2.data, n.version) || (i = this._getOrReturnCtx(e2, i), J(i, { validation: "ip", code: H.invalid_string, message: n.message }), o.dirty()) : n.kind === "base64" ? Bu.test(e2.data) || (i = this._getOrReturnCtx(e2, i), J(i, { validation: "base64", code: H.invalid_string, message: n.message }), o.dirty()) : Ie2.assertNever(n);
    return { status: o.value, value: e2.data };
  }
  _regex(e2, r, o) {
    return this.refinement((i) => e2.test(i), { validation: r, code: H.invalid_string, ...fe.errToObj(o) });
  }
  _addCheck(e2) {
    return new t5({ ...this._def, checks: [...this._def.checks, e2] });
  }
  email(e2) {
    return this._addCheck({ kind: "email", ...fe.errToObj(e2) });
  }
  url(e2) {
    return this._addCheck({ kind: "url", ...fe.errToObj(e2) });
  }
  emoji(e2) {
    return this._addCheck({ kind: "emoji", ...fe.errToObj(e2) });
  }
  uuid(e2) {
    return this._addCheck({ kind: "uuid", ...fe.errToObj(e2) });
  }
  nanoid(e2) {
    return this._addCheck({ kind: "nanoid", ...fe.errToObj(e2) });
  }
  cuid(e2) {
    return this._addCheck({ kind: "cuid", ...fe.errToObj(e2) });
  }
  cuid2(e2) {
    return this._addCheck({ kind: "cuid2", ...fe.errToObj(e2) });
  }
  ulid(e2) {
    return this._addCheck({ kind: "ulid", ...fe.errToObj(e2) });
  }
  base64(e2) {
    return this._addCheck({ kind: "base64", ...fe.errToObj(e2) });
  }
  ip(e2) {
    return this._addCheck({ kind: "ip", ...fe.errToObj(e2) });
  }
  datetime(e2) {
    var r, o;
    return typeof e2 == "string" ? this._addCheck({ kind: "datetime", precision: null, offset: false, local: false, message: e2 }) : this._addCheck({ kind: "datetime", precision: typeof (e2 == null ? void 0 : e2.precision) > "u" ? null : e2 == null ? void 0 : e2.precision, offset: (r = e2 == null ? void 0 : e2.offset) !== null && r !== void 0 ? r : false, local: (o = e2 == null ? void 0 : e2.local) !== null && o !== void 0 ? o : false, ...fe.errToObj(e2 == null ? void 0 : e2.message) });
  }
  date(e2) {
    return this._addCheck({ kind: "date", message: e2 });
  }
  time(e2) {
    return typeof e2 == "string" ? this._addCheck({ kind: "time", precision: null, message: e2 }) : this._addCheck({ kind: "time", precision: typeof (e2 == null ? void 0 : e2.precision) > "u" ? null : e2 == null ? void 0 : e2.precision, ...fe.errToObj(e2 == null ? void 0 : e2.message) });
  }
  duration(e2) {
    return this._addCheck({ kind: "duration", ...fe.errToObj(e2) });
  }
  regex(e2, r) {
    return this._addCheck({ kind: "regex", regex: e2, ...fe.errToObj(r) });
  }
  includes(e2, r) {
    return this._addCheck({ kind: "includes", value: e2, position: r == null ? void 0 : r.position, ...fe.errToObj(r == null ? void 0 : r.message) });
  }
  startsWith(e2, r) {
    return this._addCheck({ kind: "startsWith", value: e2, ...fe.errToObj(r) });
  }
  endsWith(e2, r) {
    return this._addCheck({ kind: "endsWith", value: e2, ...fe.errToObj(r) });
  }
  min(e2, r) {
    return this._addCheck({ kind: "min", value: e2, ...fe.errToObj(r) });
  }
  max(e2, r) {
    return this._addCheck({ kind: "max", value: e2, ...fe.errToObj(r) });
  }
  length(e2, r) {
    return this._addCheck({ kind: "length", value: e2, ...fe.errToObj(r) });
  }
  nonempty(e2) {
    return this.min(1, fe.errToObj(e2));
  }
  trim() {
    return new t5({ ...this._def, checks: [...this._def.checks, { kind: "trim" }] });
  }
  toLowerCase() {
    return new t5({ ...this._def, checks: [...this._def.checks, { kind: "toLowerCase" }] });
  }
  toUpperCase() {
    return new t5({ ...this._def, checks: [...this._def.checks, { kind: "toUpperCase" }] });
  }
  get isDatetime() {
    return !!this._def.checks.find((e2) => e2.kind === "datetime");
  }
  get isDate() {
    return !!this._def.checks.find((e2) => e2.kind === "date");
  }
  get isTime() {
    return !!this._def.checks.find((e2) => e2.kind === "time");
  }
  get isDuration() {
    return !!this._def.checks.find((e2) => e2.kind === "duration");
  }
  get isEmail() {
    return !!this._def.checks.find((e2) => e2.kind === "email");
  }
  get isURL() {
    return !!this._def.checks.find((e2) => e2.kind === "url");
  }
  get isEmoji() {
    return !!this._def.checks.find((e2) => e2.kind === "emoji");
  }
  get isUUID() {
    return !!this._def.checks.find((e2) => e2.kind === "uuid");
  }
  get isNANOID() {
    return !!this._def.checks.find((e2) => e2.kind === "nanoid");
  }
  get isCUID() {
    return !!this._def.checks.find((e2) => e2.kind === "cuid");
  }
  get isCUID2() {
    return !!this._def.checks.find((e2) => e2.kind === "cuid2");
  }
  get isULID() {
    return !!this._def.checks.find((e2) => e2.kind === "ulid");
  }
  get isIP() {
    return !!this._def.checks.find((e2) => e2.kind === "ip");
  }
  get isBase64() {
    return !!this._def.checks.find((e2) => e2.kind === "base64");
  }
  get minLength() {
    let e2 = null;
    for (let r of this._def.checks) r.kind === "min" && (e2 === null || r.value > e2) && (e2 = r.value);
    return e2;
  }
  get maxLength() {
    let e2 = null;
    for (let r of this._def.checks) r.kind === "max" && (e2 === null || r.value < e2) && (e2 = r.value);
    return e2;
  }
};
Qt.create = (t20) => {
  var e2;
  return new Qt({ checks: [], typeName: xe.ZodString, coerce: (e2 = t20 == null ? void 0 : t20.coerce) !== null && e2 !== void 0 ? e2 : false, ...we(t20) });
};
function Vu(t20, e2) {
  let r = (t20.toString().split(".")[1] || "").length, o = (e2.toString().split(".")[1] || "").length, i = r > o ? r : o, n = parseInt(t20.toFixed(i).replace(".", "")), a = parseInt(e2.toFixed(i).replace(".", ""));
  return n % a / Math.pow(10, i);
}
var fr = class t6 extends Me {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte, this.step = this.multipleOf;
  }
  _parse(e2) {
    if (this._def.coerce && (e2.data = Number(e2.data)), this._getType(e2) !== $.number) {
      let n = this._getOrReturnCtx(e2);
      return J(n, { code: H.invalid_type, expected: $.number, received: n.parsedType }), _e;
    }
    let o, i = new Qe();
    for (let n of this._def.checks) n.kind === "int" ? Ie2.isInteger(e2.data) || (o = this._getOrReturnCtx(e2, o), J(o, { code: H.invalid_type, expected: "integer", received: "float", message: n.message }), i.dirty()) : n.kind === "min" ? (n.inclusive ? e2.data < n.value : e2.data <= n.value) && (o = this._getOrReturnCtx(e2, o), J(o, { code: H.too_small, minimum: n.value, type: "number", inclusive: n.inclusive, exact: false, message: n.message }), i.dirty()) : n.kind === "max" ? (n.inclusive ? e2.data > n.value : e2.data >= n.value) && (o = this._getOrReturnCtx(e2, o), J(o, { code: H.too_big, maximum: n.value, type: "number", inclusive: n.inclusive, exact: false, message: n.message }), i.dirty()) : n.kind === "multipleOf" ? Vu(e2.data, n.value) !== 0 && (o = this._getOrReturnCtx(e2, o), J(o, { code: H.not_multiple_of, multipleOf: n.value, message: n.message }), i.dirty()) : n.kind === "finite" ? Number.isFinite(e2.data) || (o = this._getOrReturnCtx(e2, o), J(o, { code: H.not_finite, message: n.message }), i.dirty()) : Ie2.assertNever(n);
    return { status: i.value, value: e2.data };
  }
  gte(e2, r) {
    return this.setLimit("min", e2, true, fe.toString(r));
  }
  gt(e2, r) {
    return this.setLimit("min", e2, false, fe.toString(r));
  }
  lte(e2, r) {
    return this.setLimit("max", e2, true, fe.toString(r));
  }
  lt(e2, r) {
    return this.setLimit("max", e2, false, fe.toString(r));
  }
  setLimit(e2, r, o, i) {
    return new t6({ ...this._def, checks: [...this._def.checks, { kind: e2, value: r, inclusive: o, message: fe.toString(i) }] });
  }
  _addCheck(e2) {
    return new t6({ ...this._def, checks: [...this._def.checks, e2] });
  }
  int(e2) {
    return this._addCheck({ kind: "int", message: fe.toString(e2) });
  }
  positive(e2) {
    return this._addCheck({ kind: "min", value: 0, inclusive: false, message: fe.toString(e2) });
  }
  negative(e2) {
    return this._addCheck({ kind: "max", value: 0, inclusive: false, message: fe.toString(e2) });
  }
  nonpositive(e2) {
    return this._addCheck({ kind: "max", value: 0, inclusive: true, message: fe.toString(e2) });
  }
  nonnegative(e2) {
    return this._addCheck({ kind: "min", value: 0, inclusive: true, message: fe.toString(e2) });
  }
  multipleOf(e2, r) {
    return this._addCheck({ kind: "multipleOf", value: e2, message: fe.toString(r) });
  }
  finite(e2) {
    return this._addCheck({ kind: "finite", message: fe.toString(e2) });
  }
  safe(e2) {
    return this._addCheck({ kind: "min", inclusive: true, value: Number.MIN_SAFE_INTEGER, message: fe.toString(e2) })._addCheck({ kind: "max", inclusive: true, value: Number.MAX_SAFE_INTEGER, message: fe.toString(e2) });
  }
  get minValue() {
    let e2 = null;
    for (let r of this._def.checks) r.kind === "min" && (e2 === null || r.value > e2) && (e2 = r.value);
    return e2;
  }
  get maxValue() {
    let e2 = null;
    for (let r of this._def.checks) r.kind === "max" && (e2 === null || r.value < e2) && (e2 = r.value);
    return e2;
  }
  get isInt() {
    return !!this._def.checks.find((e2) => e2.kind === "int" || e2.kind === "multipleOf" && Ie2.isInteger(e2.value));
  }
  get isFinite() {
    let e2 = null, r = null;
    for (let o of this._def.checks) {
      if (o.kind === "finite" || o.kind === "int" || o.kind === "multipleOf") return true;
      o.kind === "min" ? (r === null || o.value > r) && (r = o.value) : o.kind === "max" && (e2 === null || o.value < e2) && (e2 = o.value);
    }
    return Number.isFinite(r) && Number.isFinite(e2);
  }
};
fr.create = (t20) => new fr({ checks: [], typeName: xe.ZodNumber, coerce: (t20 == null ? void 0 : t20.coerce) || false, ...we(t20) });
var dr = class t7 extends Me {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte;
  }
  _parse(e2) {
    if (this._def.coerce && (e2.data = BigInt(e2.data)), this._getType(e2) !== $.bigint) {
      let n = this._getOrReturnCtx(e2);
      return J(n, { code: H.invalid_type, expected: $.bigint, received: n.parsedType }), _e;
    }
    let o, i = new Qe();
    for (let n of this._def.checks) n.kind === "min" ? (n.inclusive ? e2.data < n.value : e2.data <= n.value) && (o = this._getOrReturnCtx(e2, o), J(o, { code: H.too_small, type: "bigint", minimum: n.value, inclusive: n.inclusive, message: n.message }), i.dirty()) : n.kind === "max" ? (n.inclusive ? e2.data > n.value : e2.data >= n.value) && (o = this._getOrReturnCtx(e2, o), J(o, { code: H.too_big, type: "bigint", maximum: n.value, inclusive: n.inclusive, message: n.message }), i.dirty()) : n.kind === "multipleOf" ? e2.data % n.value !== BigInt(0) && (o = this._getOrReturnCtx(e2, o), J(o, { code: H.not_multiple_of, multipleOf: n.value, message: n.message }), i.dirty()) : Ie2.assertNever(n);
    return { status: i.value, value: e2.data };
  }
  gte(e2, r) {
    return this.setLimit("min", e2, true, fe.toString(r));
  }
  gt(e2, r) {
    return this.setLimit("min", e2, false, fe.toString(r));
  }
  lte(e2, r) {
    return this.setLimit("max", e2, true, fe.toString(r));
  }
  lt(e2, r) {
    return this.setLimit("max", e2, false, fe.toString(r));
  }
  setLimit(e2, r, o, i) {
    return new t7({ ...this._def, checks: [...this._def.checks, { kind: e2, value: r, inclusive: o, message: fe.toString(i) }] });
  }
  _addCheck(e2) {
    return new t7({ ...this._def, checks: [...this._def.checks, e2] });
  }
  positive(e2) {
    return this._addCheck({ kind: "min", value: BigInt(0), inclusive: false, message: fe.toString(e2) });
  }
  negative(e2) {
    return this._addCheck({ kind: "max", value: BigInt(0), inclusive: false, message: fe.toString(e2) });
  }
  nonpositive(e2) {
    return this._addCheck({ kind: "max", value: BigInt(0), inclusive: true, message: fe.toString(e2) });
  }
  nonnegative(e2) {
    return this._addCheck({ kind: "min", value: BigInt(0), inclusive: true, message: fe.toString(e2) });
  }
  multipleOf(e2, r) {
    return this._addCheck({ kind: "multipleOf", value: e2, message: fe.toString(r) });
  }
  get minValue() {
    let e2 = null;
    for (let r of this._def.checks) r.kind === "min" && (e2 === null || r.value > e2) && (e2 = r.value);
    return e2;
  }
  get maxValue() {
    let e2 = null;
    for (let r of this._def.checks) r.kind === "max" && (e2 === null || r.value < e2) && (e2 = r.value);
    return e2;
  }
};
dr.create = (t20) => {
  var e2;
  return new dr({ checks: [], typeName: xe.ZodBigInt, coerce: (e2 = t20 == null ? void 0 : t20.coerce) !== null && e2 !== void 0 ? e2 : false, ...we(t20) });
};
var hr = class extends Me {
  _parse(e2) {
    if (this._def.coerce && (e2.data = !!e2.data), this._getType(e2) !== $.boolean) {
      let o = this._getOrReturnCtx(e2);
      return J(o, { code: H.invalid_type, expected: $.boolean, received: o.parsedType }), _e;
    }
    return rt(e2.data);
  }
};
hr.create = (t20) => new hr({ typeName: xe.ZodBoolean, coerce: (t20 == null ? void 0 : t20.coerce) || false, ...we(t20) });
var pr = class t8 extends Me {
  _parse(e2) {
    if (this._def.coerce && (e2.data = new Date(e2.data)), this._getType(e2) !== $.date) {
      let n = this._getOrReturnCtx(e2);
      return J(n, { code: H.invalid_type, expected: $.date, received: n.parsedType }), _e;
    }
    if (isNaN(e2.data.getTime())) {
      let n = this._getOrReturnCtx(e2);
      return J(n, { code: H.invalid_date }), _e;
    }
    let o = new Qe(), i;
    for (let n of this._def.checks) n.kind === "min" ? e2.data.getTime() < n.value && (i = this._getOrReturnCtx(e2, i), J(i, { code: H.too_small, message: n.message, inclusive: true, exact: false, minimum: n.value, type: "date" }), o.dirty()) : n.kind === "max" ? e2.data.getTime() > n.value && (i = this._getOrReturnCtx(e2, i), J(i, { code: H.too_big, message: n.message, inclusive: true, exact: false, maximum: n.value, type: "date" }), o.dirty()) : Ie2.assertNever(n);
    return { status: o.value, value: new Date(e2.data.getTime()) };
  }
  _addCheck(e2) {
    return new t8({ ...this._def, checks: [...this._def.checks, e2] });
  }
  min(e2, r) {
    return this._addCheck({ kind: "min", value: e2.getTime(), message: fe.toString(r) });
  }
  max(e2, r) {
    return this._addCheck({ kind: "max", value: e2.getTime(), message: fe.toString(r) });
  }
  get minDate() {
    let e2 = null;
    for (let r of this._def.checks) r.kind === "min" && (e2 === null || r.value > e2) && (e2 = r.value);
    return e2 != null ? new Date(e2) : null;
  }
  get maxDate() {
    let e2 = null;
    for (let r of this._def.checks) r.kind === "max" && (e2 === null || r.value < e2) && (e2 = r.value);
    return e2 != null ? new Date(e2) : null;
  }
};
pr.create = (t20) => new pr({ checks: [], coerce: (t20 == null ? void 0 : t20.coerce) || false, typeName: xe.ZodDate, ...we(t20) });
var Vr = class extends Me {
  _parse(e2) {
    if (this._getType(e2) !== $.symbol) {
      let o = this._getOrReturnCtx(e2);
      return J(o, { code: H.invalid_type, expected: $.symbol, received: o.parsedType }), _e;
    }
    return rt(e2.data);
  }
};
Vr.create = (t20) => new Vr({ typeName: xe.ZodSymbol, ...we(t20) });
var mr = class extends Me {
  _parse(e2) {
    if (this._getType(e2) !== $.undefined) {
      let o = this._getOrReturnCtx(e2);
      return J(o, { code: H.invalid_type, expected: $.undefined, received: o.parsedType }), _e;
    }
    return rt(e2.data);
  }
};
mr.create = (t20) => new mr({ typeName: xe.ZodUndefined, ...we(t20) });
var gr = class extends Me {
  _parse(e2) {
    if (this._getType(e2) !== $.null) {
      let o = this._getOrReturnCtx(e2);
      return J(o, { code: H.invalid_type, expected: $.null, received: o.parsedType }), _e;
    }
    return rt(e2.data);
  }
};
gr.create = (t20) => new gr({ typeName: xe.ZodNull, ...we(t20) });
var $t = class extends Me {
  constructor() {
    super(...arguments), this._any = true;
  }
  _parse(e2) {
    return rt(e2.data);
  }
};
$t.create = (t20) => new $t({ typeName: xe.ZodAny, ...we(t20) });
var Ft = class extends Me {
  constructor() {
    super(...arguments), this._unknown = true;
  }
  _parse(e2) {
    return rt(e2.data);
  }
};
Ft.create = (t20) => new Ft({ typeName: xe.ZodUnknown, ...we(t20) });
var kt2 = class extends Me {
  _parse(e2) {
    let r = this._getOrReturnCtx(e2);
    return J(r, { code: H.invalid_type, expected: $.never, received: r.parsedType }), _e;
  }
};
kt2.create = (t20) => new kt2({ typeName: xe.ZodNever, ...we(t20) });
var Wr = class extends Me {
  _parse(e2) {
    if (this._getType(e2) !== $.undefined) {
      let o = this._getOrReturnCtx(e2);
      return J(o, { code: H.invalid_type, expected: $.void, received: o.parsedType }), _e;
    }
    return rt(e2.data);
  }
};
Wr.create = (t20) => new Wr({ typeName: xe.ZodVoid, ...we(t20) });
var Bt = class t9 extends Me {
  _parse(e2) {
    let { ctx: r, status: o } = this._processInputParams(e2), i = this._def;
    if (r.parsedType !== $.array) return J(r, { code: H.invalid_type, expected: $.array, received: r.parsedType }), _e;
    if (i.exactLength !== null) {
      let a = r.data.length > i.exactLength.value, s2 = r.data.length < i.exactLength.value;
      (a || s2) && (J(r, { code: a ? H.too_big : H.too_small, minimum: s2 ? i.exactLength.value : void 0, maximum: a ? i.exactLength.value : void 0, type: "array", inclusive: true, exact: true, message: i.exactLength.message }), o.dirty());
    }
    if (i.minLength !== null && r.data.length < i.minLength.value && (J(r, { code: H.too_small, minimum: i.minLength.value, type: "array", inclusive: true, exact: false, message: i.minLength.message }), o.dirty()), i.maxLength !== null && r.data.length > i.maxLength.value && (J(r, { code: H.too_big, maximum: i.maxLength.value, type: "array", inclusive: true, exact: false, message: i.maxLength.message }), o.dirty()), r.common.async) return Promise.all([...r.data].map((a, s2) => i.type._parseAsync(new vt(r, a, r.path, s2)))).then((a) => Qe.mergeArray(o, a));
    let n = [...r.data].map((a, s2) => i.type._parseSync(new vt(r, a, r.path, s2)));
    return Qe.mergeArray(o, n);
  }
  get element() {
    return this._def.type;
  }
  min(e2, r) {
    return new t9({ ...this._def, minLength: { value: e2, message: fe.toString(r) } });
  }
  max(e2, r) {
    return new t9({ ...this._def, maxLength: { value: e2, message: fe.toString(r) } });
  }
  length(e2, r) {
    return new t9({ ...this._def, exactLength: { value: e2, message: fe.toString(r) } });
  }
  nonempty(e2) {
    return this.min(1, e2);
  }
};
Bt.create = (t20, e2) => new Bt({ type: t20, minLength: null, maxLength: null, exactLength: null, typeName: xe.ZodArray, ...we(e2) });
function Nr(t20) {
  if (t20 instanceof lt2) {
    let e2 = {};
    for (let r in t20.shape) {
      let o = t20.shape[r];
      e2[r] = gt.create(Nr(o));
    }
    return new lt2({ ...t20._def, shape: () => e2 });
  } else return t20 instanceof Bt ? new Bt({ ...t20._def, type: Nr(t20.element) }) : t20 instanceof gt ? gt.create(Nr(t20.unwrap())) : t20 instanceof Ot2 ? Ot2.create(Nr(t20.unwrap())) : t20 instanceof At ? At.create(t20.items.map((e2) => Nr(e2))) : t20;
}
var lt2 = class t10 extends Me {
  constructor() {
    super(...arguments), this._cached = null, this.nonstrict = this.passthrough, this.augment = this.extend;
  }
  _getCached() {
    if (this._cached !== null) return this._cached;
    let e2 = this._def.shape(), r = Ie2.objectKeys(e2);
    return this._cached = { shape: e2, keys: r };
  }
  _parse(e2) {
    if (this._getType(e2) !== $.object) {
      let u2 = this._getOrReturnCtx(e2);
      return J(u2, { code: H.invalid_type, expected: $.object, received: u2.parsedType }), _e;
    }
    let { status: o, ctx: i } = this._processInputParams(e2), { shape: n, keys: a } = this._getCached(), s2 = [];
    if (!(this._def.catchall instanceof kt2 && this._def.unknownKeys === "strip")) for (let u2 in i.data) a.includes(u2) || s2.push(u2);
    let l = [];
    for (let u2 of a) {
      let c2 = n[u2], f = i.data[u2];
      l.push({ key: { status: "valid", value: u2 }, value: c2._parse(new vt(i, f, i.path, u2)), alwaysSet: u2 in i.data });
    }
    if (this._def.catchall instanceof kt2) {
      let u2 = this._def.unknownKeys;
      if (u2 === "passthrough") for (let c2 of s2) l.push({ key: { status: "valid", value: c2 }, value: { status: "valid", value: i.data[c2] } });
      else if (u2 === "strict") s2.length > 0 && (J(i, { code: H.unrecognized_keys, keys: s2 }), o.dirty());
      else if (u2 !== "strip") throw new Error("Internal ZodObject error: invalid unknownKeys value.");
    } else {
      let u2 = this._def.catchall;
      for (let c2 of s2) {
        let f = i.data[c2];
        l.push({ key: { status: "valid", value: c2 }, value: u2._parse(new vt(i, f, i.path, c2)), alwaysSet: c2 in i.data });
      }
    }
    return i.common.async ? Promise.resolve().then(async () => {
      let u2 = [];
      for (let c2 of l) {
        let f = await c2.key, d = await c2.value;
        u2.push({ key: f, value: d, alwaysSet: c2.alwaysSet });
      }
      return u2;
    }).then((u2) => Qe.mergeObjectSync(o, u2)) : Qe.mergeObjectSync(o, l);
  }
  get shape() {
    return this._def.shape();
  }
  strict(e2) {
    return fe.errToObj, new t10({ ...this._def, unknownKeys: "strict", ...e2 !== void 0 ? { errorMap: (r, o) => {
      var i, n, a, s2;
      let l = (a = (n = (i = this._def).errorMap) === null || n === void 0 ? void 0 : n.call(i, r, o).message) !== null && a !== void 0 ? a : o.defaultError;
      return r.code === "unrecognized_keys" ? { message: (s2 = fe.errToObj(e2).message) !== null && s2 !== void 0 ? s2 : l } : { message: l };
    } } : {} });
  }
  strip() {
    return new t10({ ...this._def, unknownKeys: "strip" });
  }
  passthrough() {
    return new t10({ ...this._def, unknownKeys: "passthrough" });
  }
  extend(e2) {
    return new t10({ ...this._def, shape: () => ({ ...this._def.shape(), ...e2 }) });
  }
  merge(e2) {
    return new t10({ unknownKeys: e2._def.unknownKeys, catchall: e2._def.catchall, shape: () => ({ ...this._def.shape(), ...e2._def.shape() }), typeName: xe.ZodObject });
  }
  setKey(e2, r) {
    return this.augment({ [e2]: r });
  }
  catchall(e2) {
    return new t10({ ...this._def, catchall: e2 });
  }
  pick(e2) {
    let r = {};
    return Ie2.objectKeys(e2).forEach((o) => {
      e2[o] && this.shape[o] && (r[o] = this.shape[o]);
    }), new t10({ ...this._def, shape: () => r });
  }
  omit(e2) {
    let r = {};
    return Ie2.objectKeys(this.shape).forEach((o) => {
      e2[o] || (r[o] = this.shape[o]);
    }), new t10({ ...this._def, shape: () => r });
  }
  deepPartial() {
    return Nr(this);
  }
  partial(e2) {
    let r = {};
    return Ie2.objectKeys(this.shape).forEach((o) => {
      let i = this.shape[o];
      e2 && !e2[o] ? r[o] = i : r[o] = i.optional();
    }), new t10({ ...this._def, shape: () => r });
  }
  required(e2) {
    let r = {};
    return Ie2.objectKeys(this.shape).forEach((o) => {
      if (e2 && !e2[o]) r[o] = this.shape[o];
      else {
        let n = this.shape[o];
        for (; n instanceof gt; ) n = n._def.innerType;
        r[o] = n;
      }
    }), new t10({ ...this._def, shape: () => r });
  }
  keyof() {
    return gs(Ie2.objectKeys(this.shape));
  }
};
lt2.create = (t20, e2) => new lt2({ shape: () => t20, unknownKeys: "strip", catchall: kt2.create(), typeName: xe.ZodObject, ...we(e2) });
lt2.strictCreate = (t20, e2) => new lt2({ shape: () => t20, unknownKeys: "strict", catchall: kt2.create(), typeName: xe.ZodObject, ...we(e2) });
lt2.lazycreate = (t20, e2) => new lt2({ shape: t20, unknownKeys: "strip", catchall: kt2.create(), typeName: xe.ZodObject, ...we(e2) });
var vr = class extends Me {
  _parse(e2) {
    let { ctx: r } = this._processInputParams(e2), o = this._def.options;
    function i(n) {
      for (let s2 of n) if (s2.result.status === "valid") return s2.result;
      for (let s2 of n) if (s2.result.status === "dirty") return r.common.issues.push(...s2.ctx.common.issues), s2.result;
      let a = n.map((s2) => new ft(s2.ctx.common.issues));
      return J(r, { code: H.invalid_union, unionErrors: a }), _e;
    }
    if (r.common.async) return Promise.all(o.map(async (n) => {
      let a = { ...r, common: { ...r.common, issues: [] }, parent: null };
      return { result: await n._parseAsync({ data: r.data, path: r.path, parent: a }), ctx: a };
    })).then(i);
    {
      let n, a = [];
      for (let l of o) {
        let u2 = { ...r, common: { ...r.common, issues: [] }, parent: null }, c2 = l._parseSync({ data: r.data, path: r.path, parent: u2 });
        if (c2.status === "valid") return c2;
        c2.status === "dirty" && !n && (n = { result: c2, ctx: u2 }), u2.common.issues.length && a.push(u2.common.issues);
      }
      if (n) return r.common.issues.push(...n.ctx.common.issues), n.result;
      let s2 = a.map((l) => new ft(l));
      return J(r, { code: H.invalid_union, unionErrors: s2 }), _e;
    }
  }
  get options() {
    return this._def.options;
  }
};
vr.create = (t20, e2) => new vr({ options: t20, typeName: xe.ZodUnion, ...we(e2) });
var Gt = (t20) => t20 instanceof br ? Gt(t20.schema) : t20 instanceof dt ? Gt(t20.innerType()) : t20 instanceof xr ? [t20.value] : t20 instanceof _r ? t20.options : t20 instanceof Tr ? Ie2.objectValues(t20.enum) : t20 instanceof Sr ? Gt(t20._def.innerType) : t20 instanceof mr ? [void 0] : t20 instanceof gr ? [null] : t20 instanceof gt ? [void 0, ...Gt(t20.unwrap())] : t20 instanceof Ot2 ? [null, ...Gt(t20.unwrap())] : t20 instanceof Mn2 || t20 instanceof wr ? Gt(t20.unwrap()) : t20 instanceof kr2 ? Gt(t20._def.innerType) : [];
var pi = class t11 extends Me {
  _parse(e2) {
    let { ctx: r } = this._processInputParams(e2);
    if (r.parsedType !== $.object) return J(r, { code: H.invalid_type, expected: $.object, received: r.parsedType }), _e;
    let o = this.discriminator, i = r.data[o], n = this.optionsMap.get(i);
    return n ? r.common.async ? n._parseAsync({ data: r.data, path: r.path, parent: r }) : n._parseSync({ data: r.data, path: r.path, parent: r }) : (J(r, { code: H.invalid_union_discriminator, options: Array.from(this.optionsMap.keys()), path: [o] }), _e);
  }
  get discriminator() {
    return this._def.discriminator;
  }
  get options() {
    return this._def.options;
  }
  get optionsMap() {
    return this._def.optionsMap;
  }
  static create(e2, r, o) {
    let i = /* @__PURE__ */ new Map();
    for (let n of r) {
      let a = Gt(n.shape[e2]);
      if (!a.length) throw new Error("A discriminator value for key `".concat(e2, "` could not be extracted from all schema options"));
      for (let s2 of a) {
        if (i.has(s2)) throw new Error("Discriminator property ".concat(String(e2), " has duplicate value ").concat(String(s2)));
        i.set(s2, n);
      }
    }
    return new t11({ typeName: xe.ZodDiscriminatedUnion, discriminator: e2, options: r, optionsMap: i, ...we(o) });
  }
};
function So(t20, e2) {
  let r = qt(t20), o = qt(e2);
  if (t20 === e2) return { valid: true, data: t20 };
  if (r === $.object && o === $.object) {
    let i = Ie2.objectKeys(e2), n = Ie2.objectKeys(t20).filter((s2) => i.indexOf(s2) !== -1), a = { ...t20, ...e2 };
    for (let s2 of n) {
      let l = So(t20[s2], e2[s2]);
      if (!l.valid) return { valid: false };
      a[s2] = l.data;
    }
    return { valid: true, data: a };
  } else if (r === $.array && o === $.array) {
    if (t20.length !== e2.length) return { valid: false };
    let i = [];
    for (let n = 0; n < t20.length; n++) {
      let a = t20[n], s2 = e2[n], l = So(a, s2);
      if (!l.valid) return { valid: false };
      i.push(l.data);
    }
    return { valid: true, data: i };
  } else return r === $.date && o === $.date && +t20 == +e2 ? { valid: true, data: t20 } : { valid: false };
}
var yr = class extends Me {
  _parse(e2) {
    let { status: r, ctx: o } = this._processInputParams(e2), i = (n, a) => {
      if (_o(n) || _o(a)) return _e;
      let s2 = So(n.value, a.value);
      return s2.valid ? ((To(n) || To(a)) && r.dirty(), { status: r.value, value: s2.data }) : (J(o, { code: H.invalid_intersection_types }), _e);
    };
    return o.common.async ? Promise.all([this._def.left._parseAsync({ data: o.data, path: o.path, parent: o }), this._def.right._parseAsync({ data: o.data, path: o.path, parent: o })]).then(([n, a]) => i(n, a)) : i(this._def.left._parseSync({ data: o.data, path: o.path, parent: o }), this._def.right._parseSync({ data: o.data, path: o.path, parent: o }));
  }
};
yr.create = (t20, e2, r) => new yr({ left: t20, right: e2, typeName: xe.ZodIntersection, ...we(r) });
var At = class t12 extends Me {
  _parse(e2) {
    let { status: r, ctx: o } = this._processInputParams(e2);
    if (o.parsedType !== $.array) return J(o, { code: H.invalid_type, expected: $.array, received: o.parsedType }), _e;
    if (o.data.length < this._def.items.length) return J(o, { code: H.too_small, minimum: this._def.items.length, inclusive: true, exact: false, type: "array" }), _e;
    !this._def.rest && o.data.length > this._def.items.length && (J(o, { code: H.too_big, maximum: this._def.items.length, inclusive: true, exact: false, type: "array" }), r.dirty());
    let n = [...o.data].map((a, s2) => {
      let l = this._def.items[s2] || this._def.rest;
      return l ? l._parse(new vt(o, a, o.path, s2)) : null;
    }).filter((a) => !!a);
    return o.common.async ? Promise.all(n).then((a) => Qe.mergeArray(r, a)) : Qe.mergeArray(r, n);
  }
  get items() {
    return this._def.items;
  }
  rest(e2) {
    return new t12({ ...this._def, rest: e2 });
  }
};
At.create = (t20, e2) => {
  if (!Array.isArray(t20)) throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
  return new At({ items: t20, typeName: xe.ZodTuple, rest: null, ...we(e2) });
};
var mi = class t13 extends Me {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e2) {
    let { status: r, ctx: o } = this._processInputParams(e2);
    if (o.parsedType !== $.object) return J(o, { code: H.invalid_type, expected: $.object, received: o.parsedType }), _e;
    let i = [], n = this._def.keyType, a = this._def.valueType;
    for (let s2 in o.data) i.push({ key: n._parse(new vt(o, s2, o.path, s2)), value: a._parse(new vt(o, o.data[s2], o.path, s2)), alwaysSet: s2 in o.data });
    return o.common.async ? Qe.mergeObjectAsync(r, i) : Qe.mergeObjectSync(r, i);
  }
  get element() {
    return this._def.valueType;
  }
  static create(e2, r, o) {
    return r instanceof Me ? new t13({ keyType: e2, valueType: r, typeName: xe.ZodRecord, ...we(o) }) : new t13({ keyType: Qt.create(), valueType: e2, typeName: xe.ZodRecord, ...we(r) });
  }
};
var Hr = class extends Me {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e2) {
    let { status: r, ctx: o } = this._processInputParams(e2);
    if (o.parsedType !== $.map) return J(o, { code: H.invalid_type, expected: $.map, received: o.parsedType }), _e;
    let i = this._def.keyType, n = this._def.valueType, a = [...o.data.entries()].map(([s2, l], u2) => ({ key: i._parse(new vt(o, s2, o.path, [u2, "key"])), value: n._parse(new vt(o, l, o.path, [u2, "value"])) }));
    if (o.common.async) {
      let s2 = /* @__PURE__ */ new Map();
      return Promise.resolve().then(async () => {
        for (let l of a) {
          let u2 = await l.key, c2 = await l.value;
          if (u2.status === "aborted" || c2.status === "aborted") return _e;
          (u2.status === "dirty" || c2.status === "dirty") && r.dirty(), s2.set(u2.value, c2.value);
        }
        return { status: r.value, value: s2 };
      });
    } else {
      let s2 = /* @__PURE__ */ new Map();
      for (let l of a) {
        let u2 = l.key, c2 = l.value;
        if (u2.status === "aborted" || c2.status === "aborted") return _e;
        (u2.status === "dirty" || c2.status === "dirty") && r.dirty(), s2.set(u2.value, c2.value);
      }
      return { status: r.value, value: s2 };
    }
  }
};
Hr.create = (t20, e2, r) => new Hr({ valueType: e2, keyType: t20, typeName: xe.ZodMap, ...we(r) });
var Zr = class t14 extends Me {
  _parse(e2) {
    let { status: r, ctx: o } = this._processInputParams(e2);
    if (o.parsedType !== $.set) return J(o, { code: H.invalid_type, expected: $.set, received: o.parsedType }), _e;
    let i = this._def;
    i.minSize !== null && o.data.size < i.minSize.value && (J(o, { code: H.too_small, minimum: i.minSize.value, type: "set", inclusive: true, exact: false, message: i.minSize.message }), r.dirty()), i.maxSize !== null && o.data.size > i.maxSize.value && (J(o, { code: H.too_big, maximum: i.maxSize.value, type: "set", inclusive: true, exact: false, message: i.maxSize.message }), r.dirty());
    let n = this._def.valueType;
    function a(l) {
      let u2 = /* @__PURE__ */ new Set();
      for (let c2 of l) {
        if (c2.status === "aborted") return _e;
        c2.status === "dirty" && r.dirty(), u2.add(c2.value);
      }
      return { status: r.value, value: u2 };
    }
    let s2 = [...o.data.values()].map((l, u2) => n._parse(new vt(o, l, o.path, u2)));
    return o.common.async ? Promise.all(s2).then((l) => a(l)) : a(s2);
  }
  min(e2, r) {
    return new t14({ ...this._def, minSize: { value: e2, message: fe.toString(r) } });
  }
  max(e2, r) {
    return new t14({ ...this._def, maxSize: { value: e2, message: fe.toString(r) } });
  }
  size(e2, r) {
    return this.min(e2, r).max(e2, r);
  }
  nonempty(e2) {
    return this.min(1, e2);
  }
};
Zr.create = (t20, e2) => new Zr({ valueType: t20, minSize: null, maxSize: null, typeName: xe.ZodSet, ...we(e2) });
var gi = class t15 extends Me {
  constructor() {
    super(...arguments), this.validate = this.implement;
  }
  _parse(e2) {
    let { ctx: r } = this._processInputParams(e2);
    if (r.parsedType !== $.function) return J(r, { code: H.invalid_type, expected: $.function, received: r.parsedType }), _e;
    function o(s2, l) {
      return di({ data: s2, path: r.path, errorMaps: [r.common.contextualErrorMap, r.schemaErrorMap, fi(), zr].filter((u2) => !!u2), issueData: { code: H.invalid_arguments, argumentsError: l } });
    }
    function i(s2, l) {
      return di({ data: s2, path: r.path, errorMaps: [r.common.contextualErrorMap, r.schemaErrorMap, fi(), zr].filter((u2) => !!u2), issueData: { code: H.invalid_return_type, returnTypeError: l } });
    }
    let n = { errorMap: r.common.contextualErrorMap }, a = r.data;
    if (this._def.returns instanceof er) {
      let s2 = this;
      return rt(async function(...l) {
        let u2 = new ft([]), c2 = await s2._def.args.parseAsync(l, n).catch((h) => {
          throw u2.addIssue(o(l, h)), u2;
        }), f = await Reflect.apply(a, this, c2);
        return await s2._def.returns._def.type.parseAsync(f, n).catch((h) => {
          throw u2.addIssue(i(f, h)), u2;
        });
      });
    } else {
      let s2 = this;
      return rt(function(...l) {
        let u2 = s2._def.args.safeParse(l, n);
        if (!u2.success) throw new ft([o(l, u2.error)]);
        let c2 = Reflect.apply(a, this, u2.data), f = s2._def.returns.safeParse(c2, n);
        if (!f.success) throw new ft([i(c2, f.error)]);
        return f.data;
      });
    }
  }
  parameters() {
    return this._def.args;
  }
  returnType() {
    return this._def.returns;
  }
  args(...e2) {
    return new t15({ ...this._def, args: At.create(e2).rest(Ft.create()) });
  }
  returns(e2) {
    return new t15({ ...this._def, returns: e2 });
  }
  implement(e2) {
    return this.parse(e2);
  }
  strictImplement(e2) {
    return this.parse(e2);
  }
  static create(e2, r, o) {
    return new t15({ args: e2 || At.create([]).rest(Ft.create()), returns: r || Ft.create(), typeName: xe.ZodFunction, ...we(o) });
  }
};
var br = class extends Me {
  get schema() {
    return this._def.getter();
  }
  _parse(e2) {
    let { ctx: r } = this._processInputParams(e2);
    return this._def.getter()._parse({ data: r.data, path: r.path, parent: r });
  }
};
br.create = (t20, e2) => new br({ getter: t20, typeName: xe.ZodLazy, ...we(e2) });
var xr = class extends Me {
  _parse(e2) {
    if (e2.data !== this._def.value) {
      let r = this._getOrReturnCtx(e2);
      return J(r, { received: r.data, code: H.invalid_literal, expected: this._def.value }), _e;
    }
    return { status: "valid", value: e2.data };
  }
  get value() {
    return this._def.value;
  }
};
xr.create = (t20, e2) => new xr({ value: t20, typeName: xe.ZodLiteral, ...we(e2) });
function gs(t20, e2) {
  return new _r({ values: t20, typeName: xe.ZodEnum, ...we(e2) });
}
var _r = class t16 extends Me {
  constructor() {
    super(...arguments), Tn.set(this, void 0);
  }
  _parse(e2) {
    if (typeof e2.data != "string") {
      let r = this._getOrReturnCtx(e2), o = this._def.values;
      return J(r, { expected: Ie2.joinValues(o), received: r.parsedType, code: H.invalid_type }), _e;
    }
    if (hi(this, Tn, "f") || ds(this, Tn, new Set(this._def.values), "f"), !hi(this, Tn, "f").has(e2.data)) {
      let r = this._getOrReturnCtx(e2), o = this._def.values;
      return J(r, { received: r.data, code: H.invalid_enum_value, options: o }), _e;
    }
    return rt(e2.data);
  }
  get options() {
    return this._def.values;
  }
  get enum() {
    let e2 = {};
    for (let r of this._def.values) e2[r] = r;
    return e2;
  }
  get Values() {
    let e2 = {};
    for (let r of this._def.values) e2[r] = r;
    return e2;
  }
  get Enum() {
    let e2 = {};
    for (let r of this._def.values) e2[r] = r;
    return e2;
  }
  extract(e2, r = this._def) {
    return t16.create(e2, { ...this._def, ...r });
  }
  exclude(e2, r = this._def) {
    return t16.create(this.options.filter((o) => !e2.includes(o)), { ...this._def, ...r });
  }
};
Tn = /* @__PURE__ */ new WeakMap();
_r.create = gs;
var Tr = class extends Me {
  constructor() {
    super(...arguments), Sn.set(this, void 0);
  }
  _parse(e2) {
    let r = Ie2.getValidEnumValues(this._def.values), o = this._getOrReturnCtx(e2);
    if (o.parsedType !== $.string && o.parsedType !== $.number) {
      let i = Ie2.objectValues(r);
      return J(o, { expected: Ie2.joinValues(i), received: o.parsedType, code: H.invalid_type }), _e;
    }
    if (hi(this, Sn, "f") || ds(this, Sn, new Set(Ie2.getValidEnumValues(this._def.values)), "f"), !hi(this, Sn, "f").has(e2.data)) {
      let i = Ie2.objectValues(r);
      return J(o, { received: o.data, code: H.invalid_enum_value, options: i }), _e;
    }
    return rt(e2.data);
  }
  get enum() {
    return this._def.values;
  }
};
Sn = /* @__PURE__ */ new WeakMap();
Tr.create = (t20, e2) => new Tr({ values: t20, typeName: xe.ZodNativeEnum, ...we(e2) });
var er = class extends Me {
  unwrap() {
    return this._def.type;
  }
  _parse(e2) {
    let { ctx: r } = this._processInputParams(e2);
    if (r.parsedType !== $.promise && r.common.async === false) return J(r, { code: H.invalid_type, expected: $.promise, received: r.parsedType }), _e;
    let o = r.parsedType === $.promise ? r.data : Promise.resolve(r.data);
    return rt(o.then((i) => this._def.type.parseAsync(i, { path: r.path, errorMap: r.common.contextualErrorMap })));
  }
};
er.create = (t20, e2) => new er({ type: t20, typeName: xe.ZodPromise, ...we(e2) });
var dt = class extends Me {
  innerType() {
    return this._def.schema;
  }
  sourceType() {
    return this._def.schema._def.typeName === xe.ZodEffects ? this._def.schema.sourceType() : this._def.schema;
  }
  _parse(e2) {
    let { status: r, ctx: o } = this._processInputParams(e2), i = this._def.effect || null, n = { addIssue: (a) => {
      J(o, a), a.fatal ? r.abort() : r.dirty();
    }, get path() {
      return o.path;
    } };
    if (n.addIssue = n.addIssue.bind(n), i.type === "preprocess") {
      let a = i.transform(o.data, n);
      if (o.common.async) return Promise.resolve(a).then(async (s2) => {
        if (r.value === "aborted") return _e;
        let l = await this._def.schema._parseAsync({ data: s2, path: o.path, parent: o });
        return l.status === "aborted" ? _e : l.status === "dirty" || r.value === "dirty" ? jr(l.value) : l;
      });
      {
        if (r.value === "aborted") return _e;
        let s2 = this._def.schema._parseSync({ data: a, path: o.path, parent: o });
        return s2.status === "aborted" ? _e : s2.status === "dirty" || r.value === "dirty" ? jr(s2.value) : s2;
      }
    }
    if (i.type === "refinement") {
      let a = (s2) => {
        let l = i.refinement(s2, n);
        if (o.common.async) return Promise.resolve(l);
        if (l instanceof Promise) throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
        return s2;
      };
      if (o.common.async === false) {
        let s2 = this._def.schema._parseSync({ data: o.data, path: o.path, parent: o });
        return s2.status === "aborted" ? _e : (s2.status === "dirty" && r.dirty(), a(s2.value), { status: r.value, value: s2.value });
      } else return this._def.schema._parseAsync({ data: o.data, path: o.path, parent: o }).then((s2) => s2.status === "aborted" ? _e : (s2.status === "dirty" && r.dirty(), a(s2.value).then(() => ({ status: r.value, value: s2.value }))));
    }
    if (i.type === "transform") if (o.common.async === false) {
      let a = this._def.schema._parseSync({ data: o.data, path: o.path, parent: o });
      if (!kn(a)) return a;
      let s2 = i.transform(a.value, n);
      if (s2 instanceof Promise) throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");
      return { status: r.value, value: s2 };
    } else return this._def.schema._parseAsync({ data: o.data, path: o.path, parent: o }).then((a) => kn(a) ? Promise.resolve(i.transform(a.value, n)).then((s2) => ({ status: r.value, value: s2 })) : a);
    Ie2.assertNever(i);
  }
};
dt.create = (t20, e2, r) => new dt({ schema: t20, typeName: xe.ZodEffects, effect: e2, ...we(r) });
dt.createWithPreprocess = (t20, e2, r) => new dt({ schema: e2, effect: { type: "preprocess", transform: t20 }, typeName: xe.ZodEffects, ...we(r) });
var gt = class extends Me {
  _parse(e2) {
    return this._getType(e2) === $.undefined ? rt(void 0) : this._def.innerType._parse(e2);
  }
  unwrap() {
    return this._def.innerType;
  }
};
gt.create = (t20, e2) => new gt({ innerType: t20, typeName: xe.ZodOptional, ...we(e2) });
var Ot2 = class extends Me {
  _parse(e2) {
    return this._getType(e2) === $.null ? rt(null) : this._def.innerType._parse(e2);
  }
  unwrap() {
    return this._def.innerType;
  }
};
Ot2.create = (t20, e2) => new Ot2({ innerType: t20, typeName: xe.ZodNullable, ...we(e2) });
var Sr = class extends Me {
  _parse(e2) {
    let { ctx: r } = this._processInputParams(e2), o = r.data;
    return r.parsedType === $.undefined && (o = this._def.defaultValue()), this._def.innerType._parse({ data: o, path: r.path, parent: r });
  }
  removeDefault() {
    return this._def.innerType;
  }
};
Sr.create = (t20, e2) => new Sr({ innerType: t20, typeName: xe.ZodDefault, defaultValue: typeof e2.default == "function" ? e2.default : () => e2.default, ...we(e2) });
var kr2 = class extends Me {
  _parse(e2) {
    let { ctx: r } = this._processInputParams(e2), o = { ...r, common: { ...r.common, issues: [] } }, i = this._def.innerType._parse({ data: o.data, path: o.path, parent: { ...o } });
    return wn(i) ? i.then((n) => ({ status: "valid", value: n.status === "valid" ? n.value : this._def.catchValue({ get error() {
      return new ft(o.common.issues);
    }, input: o.data }) })) : { status: "valid", value: i.status === "valid" ? i.value : this._def.catchValue({ get error() {
      return new ft(o.common.issues);
    }, input: o.data }) };
  }
  removeCatch() {
    return this._def.innerType;
  }
};
kr2.create = (t20, e2) => new kr2({ innerType: t20, typeName: xe.ZodCatch, catchValue: typeof e2.catch == "function" ? e2.catch : () => e2.catch, ...we(e2) });
var Yr = class extends Me {
  _parse(e2) {
    if (this._getType(e2) !== $.nan) {
      let o = this._getOrReturnCtx(e2);
      return J(o, { code: H.invalid_type, expected: $.nan, received: o.parsedType }), _e;
    }
    return { status: "valid", value: e2.data };
  }
};
Yr.create = (t20) => new Yr({ typeName: xe.ZodNaN, ...we(t20) });
var Wu = Symbol("zod_brand");
var Mn2 = class extends Me {
  _parse(e2) {
    let { ctx: r } = this._processInputParams(e2), o = r.data;
    return this._def.type._parse({ data: o, path: r.path, parent: r });
  }
  unwrap() {
    return this._def.type;
  }
};
var Cn = class t17 extends Me {
  _parse(e2) {
    let { status: r, ctx: o } = this._processInputParams(e2);
    if (o.common.async) return (async () => {
      let n = await this._def.in._parseAsync({ data: o.data, path: o.path, parent: o });
      return n.status === "aborted" ? _e : n.status === "dirty" ? (r.dirty(), jr(n.value)) : this._def.out._parseAsync({ data: n.value, path: o.path, parent: o });
    })();
    {
      let i = this._def.in._parseSync({ data: o.data, path: o.path, parent: o });
      return i.status === "aborted" ? _e : i.status === "dirty" ? (r.dirty(), { status: "dirty", value: i.value }) : this._def.out._parseSync({ data: i.value, path: o.path, parent: o });
    }
  }
  static create(e2, r) {
    return new t17({ in: e2, out: r, typeName: xe.ZodPipeline });
  }
};
var wr = class extends Me {
  _parse(e2) {
    let r = this._def.innerType._parse(e2), o = (i) => (kn(i) && (i.value = Object.freeze(i.value)), i);
    return wn(r) ? r.then((i) => o(i)) : o(r);
  }
  unwrap() {
    return this._def.innerType;
  }
};
wr.create = (t20, e2) => new wr({ innerType: t20, typeName: xe.ZodReadonly, ...we(e2) });
function vs2(t20, e2 = {}, r) {
  return t20 ? $t.create().superRefine((o, i) => {
    var n, a;
    if (!t20(o)) {
      let s2 = typeof e2 == "function" ? e2(o) : typeof e2 == "string" ? { message: e2 } : e2, l = (a = (n = s2.fatal) !== null && n !== void 0 ? n : r) !== null && a !== void 0 ? a : true, u2 = typeof s2 == "string" ? { message: s2 } : s2;
      i.addIssue({ code: "custom", ...u2, fatal: l });
    }
  }) : $t.create();
}
var Hu = { object: lt2.lazycreate };
var xe;
(function(t20) {
  t20.ZodString = "ZodString", t20.ZodNumber = "ZodNumber", t20.ZodNaN = "ZodNaN", t20.ZodBigInt = "ZodBigInt", t20.ZodBoolean = "ZodBoolean", t20.ZodDate = "ZodDate", t20.ZodSymbol = "ZodSymbol", t20.ZodUndefined = "ZodUndefined", t20.ZodNull = "ZodNull", t20.ZodAny = "ZodAny", t20.ZodUnknown = "ZodUnknown", t20.ZodNever = "ZodNever", t20.ZodVoid = "ZodVoid", t20.ZodArray = "ZodArray", t20.ZodObject = "ZodObject", t20.ZodUnion = "ZodUnion", t20.ZodDiscriminatedUnion = "ZodDiscriminatedUnion", t20.ZodIntersection = "ZodIntersection", t20.ZodTuple = "ZodTuple", t20.ZodRecord = "ZodRecord", t20.ZodMap = "ZodMap", t20.ZodSet = "ZodSet", t20.ZodFunction = "ZodFunction", t20.ZodLazy = "ZodLazy", t20.ZodLiteral = "ZodLiteral", t20.ZodEnum = "ZodEnum", t20.ZodEffects = "ZodEffects", t20.ZodNativeEnum = "ZodNativeEnum", t20.ZodOptional = "ZodOptional", t20.ZodNullable = "ZodNullable", t20.ZodDefault = "ZodDefault", t20.ZodCatch = "ZodCatch", t20.ZodPromise = "ZodPromise", t20.ZodBranded = "ZodBranded", t20.ZodPipeline = "ZodPipeline", t20.ZodReadonly = "ZodReadonly";
})(xe || (xe = {}));
var Zu = (t20, e2 = { message: "Input not instance of ".concat(t20.name) }) => vs2((r) => r instanceof t20, e2);
var ys = Qt.create;
var bs = fr.create;
var Yu = Yr.create;
var Xu = dr.create;
var xs2 = hr.create;
var Ku = pr.create;
var Ju = Vr.create;
var qu = mr.create;
var Qu2 = gr.create;
var $u = $t.create;
var ec = Ft.create;
var tc = kt2.create;
var rc = Wr.create;
var nc = Bt.create;
var ic = lt2.create;
var oc = lt2.strictCreate;
var ac = vr.create;
var sc = pi.create;
var lc = yr.create;
var uc = At.create;
var cc = mi.create;
var fc = Hr.create;
var dc = Zr.create;
var hc = gi.create;
var pc = br.create;
var mc = xr.create;
var gc = _r.create;
var vc = Tr.create;
var yc = er.create;
var cs = dt.create;
var bc = gt.create;
var xc = Ot2.create;
var _c = dt.createWithPreprocess;
var Tc = Cn.create;
var Sc = () => ys().optional();
var kc = () => bs().optional();
var wc = () => xs2().optional();
var Mc = { string: (t20) => Qt.create({ ...t20, coerce: true }), number: (t20) => fr.create({ ...t20, coerce: true }), boolean: (t20) => hr.create({ ...t20, coerce: true }), bigint: (t20) => dr.create({ ...t20, coerce: true }), date: (t20) => pr.create({ ...t20, coerce: true }) };
var Cc = _e;
var K = Object.freeze({ __proto__: null, defaultErrorMap: zr, setErrorMap: Cu, getErrorMap: fi, makeIssue: di, EMPTY_PATH: Du, addIssueToContext: J, ParseStatus: Qe, INVALID: _e, DIRTY: jr, OK: rt, isAborted: _o, isDirty: To, isValid: kn, isAsync: wn, get util() {
  return Ie2;
}, get objectUtil() {
  return xo;
}, ZodParsedType: $, getParsedType: qt, ZodType: Me, datetimeRegex: ms, ZodString: Qt, ZodNumber: fr, ZodBigInt: dr, ZodBoolean: hr, ZodDate: pr, ZodSymbol: Vr, ZodUndefined: mr, ZodNull: gr, ZodAny: $t, ZodUnknown: Ft, ZodNever: kt2, ZodVoid: Wr, ZodArray: Bt, ZodObject: lt2, ZodUnion: vr, ZodDiscriminatedUnion: pi, ZodIntersection: yr, ZodTuple: At, ZodRecord: mi, ZodMap: Hr, ZodSet: Zr, ZodFunction: gi, ZodLazy: br, ZodLiteral: xr, ZodEnum: _r, ZodNativeEnum: Tr, ZodPromise: er, ZodEffects: dt, ZodTransformer: dt, ZodOptional: gt, ZodNullable: Ot2, ZodDefault: Sr, ZodCatch: kr2, ZodNaN: Yr, BRAND: Wu, ZodBranded: Mn2, ZodPipeline: Cn, ZodReadonly: wr, custom: vs2, Schema: Me, ZodSchema: Me, late: Hu, get ZodFirstPartyTypeKind() {
  return xe;
}, coerce: Mc, any: $u, array: nc, bigint: Xu, boolean: xs2, date: Ku, discriminatedUnion: sc, effect: cs, enum: gc, function: hc, instanceof: Zu, intersection: lc, lazy: pc, literal: mc, map: fc, nan: Yu, nativeEnum: vc, never: tc, null: Qu2, nullable: xc, number: bs, object: ic, oboolean: wc, onumber: kc, optional: bc, ostring: Sc, pipeline: Tc, preprocess: _c, promise: yc, record: cc, set: dc, strictObject: oc, string: ys, symbol: Ju, transformer: cs, tuple: uc, undefined: qu, union: ac, unknown: ec, void: rc, NEVER: Cc, ZodIssueCode: H, quotelessJson: Mu, ZodError: ft });
c();
function wi(t20) {
  return (t20 % (2 * Math.PI) + 2 * Math.PI) % (2 * Math.PI);
}
c();
c();
c();
c();
c();
c();
c();
c();
var nt = 63710088e-1;
var $s = { centimeters: nt * 100, centimetres: nt * 100, degrees: nt / 111325, feet: nt * 3.28084, inches: nt * 39.37, kilometers: nt / 1e3, kilometres: nt / 1e3, meters: nt, metres: nt, miles: nt / 1609.344, millimeters: nt * 1e3, millimetres: nt * 1e3, nauticalmiles: nt / 1852, radians: 1, yards: nt * 1.0936 };
var Sm = { centimeters: 100, centimetres: 100, degrees: 1 / 111325, feet: 3.28084, inches: 39.37, kilometers: 1 / 1e3, kilometres: 1 / 1e3, meters: 1, metres: 1, miles: 1 / 1609.344, millimeters: 1e3, millimetres: 1e3, nauticalmiles: 1 / 1852, radians: 1 / nt, yards: 1.0936133 };
function tr(t20, e2, r) {
  r === void 0 && (r = {});
  var o = { type: "Feature" };
  return (r.id === 0 || r.id) && (o.id = r.id), r.bbox && (o.bbox = r.bbox), o.properties = e2 || {}, o.geometry = t20, o;
}
function xd(t20, e2, r) {
  if (r === void 0 && (r = {}), !t20) throw new Error("coordinates is required");
  if (!Array.isArray(t20)) throw new Error("coordinates must be an Array");
  if (t20.length < 2) throw new Error("coordinates must be at least 2 numbers long");
  if (!Qs(t20[0]) || !Qs(t20[1])) throw new Error("coordinates must contain numbers");
  var o = { type: "Point", coordinates: t20 };
  return tr(o, e2, r);
}
function km(t20, e2, r) {
  r === void 0 && (r = {});
  for (var o = 0, i = t20; o < i.length; o++) {
    var n = i[o];
    if (n.length < 4) throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");
    for (var a = 0; a < n[n.length - 1].length; a++) if (n[n.length - 1][a] !== n[0][a]) throw new Error("First and last Position are not equivalent.");
  }
  var s2 = { type: "Polygon", coordinates: t20 };
  return tr(s2, e2, r);
}
function el2(t20, e2, r) {
  if (r === void 0 && (r = {}), t20.length < 2) throw new Error("coordinates must be an array of two or more positions");
  var o = { type: "LineString", coordinates: t20 };
  return tr(o, e2, r);
}
function wm(t20, e2) {
  e2 === void 0 && (e2 = {});
  var r = { type: "FeatureCollection" };
  return e2.id && (r.id = e2.id), e2.bbox && (r.bbox = e2.bbox), r.features = t20, r;
}
function Mm(t20, e2, r) {
  r === void 0 && (r = {});
  var o = { type: "MultiLineString", coordinates: t20 };
  return tr(o, e2, r);
}
function Cm(t20, e2, r) {
  r === void 0 && (r = {});
  var o = { type: "MultiPolygon", coordinates: t20 };
  return tr(o, e2, r);
}
function Dm(t20, e2) {
  e2 === void 0 && (e2 = "kilometers");
  var r = $s[e2];
  if (!r) throw new Error(e2 + " units is invalid");
  return t20 * r;
}
function Em(t20, e2) {
  e2 === void 0 && (e2 = "kilometers");
  var r = $s[e2];
  if (!r) throw new Error(e2 + " units is invalid");
  return t20 / r;
}
function Am(t20) {
  var e2 = t20 % (2 * Math.PI);
  return e2 * 180 / Math.PI;
}
function Om(t20) {
  var e2 = t20 % 360;
  return e2 * Math.PI / 180;
}
function Qs(t20) {
  return !isNaN(t20) && t20 !== null && !Array.isArray(t20);
}
function Mi(t20, e2, r) {
  if (t20 !== null) for (var o, i, n, a, s2, l, u2, c2 = 0, f = 0, d, h = t20.type, g = h === "FeatureCollection", m = h === "Feature", y = g ? t20.features.length : 1, E = 0; E < y; E++) {
    u2 = g ? t20.features[E].geometry : m ? t20.geometry : t20, d = u2 ? u2.type === "GeometryCollection" : false, s2 = d ? u2.geometries.length : 1;
    for (var k = 0; k < s2; k++) {
      var b = 0, _ = 0;
      if (a = d ? u2.geometries[k] : u2, a !== null) {
        l = a.coordinates;
        var w2 = a.type;
        switch (c2 = r && (w2 === "Polygon" || w2 === "MultiPolygon") ? 1 : 0, w2) {
          case null:
            break;
          case "Point":
            if (e2(l, f, E, b, _) === false) return false;
            f++, b++;
            break;
          case "LineString":
          case "MultiPoint":
            for (o = 0; o < l.length; o++) {
              if (e2(l[o], f, E, b, _) === false) return false;
              f++, w2 === "MultiPoint" && b++;
            }
            w2 === "LineString" && b++;
            break;
          case "Polygon":
          case "MultiLineString":
            for (o = 0; o < l.length; o++) {
              for (i = 0; i < l[o].length - c2; i++) {
                if (e2(l[o][i], f, E, b, _) === false) return false;
                f++;
              }
              w2 === "MultiLineString" && b++, w2 === "Polygon" && _++;
            }
            w2 === "Polygon" && b++;
            break;
          case "MultiPolygon":
            for (o = 0; o < l.length; o++) {
              for (_ = 0, i = 0; i < l[o].length; i++) {
                for (n = 0; n < l[o][i].length - c2; n++) {
                  if (e2(l[o][i][n], f, E, b, _) === false) return false;
                  f++;
                }
                _++;
              }
              b++;
            }
            break;
          case "GeometryCollection":
            for (o = 0; o < a.geometries.length; o++) if (Mi(a.geometries[o], e2, r) === false) return false;
            break;
          default:
            throw new Error("Unknown Geometry Type");
        }
      }
    }
  }
}
function Lm(t20, e2) {
  if (t20.type === "Feature") e2(t20, 0);
  else if (t20.type === "FeatureCollection") for (var r = 0; r < t20.features.length && e2(t20.features[r], r) !== false; r++) ;
}
function _d(t20, e2) {
  var r, o, i, n, a, s2, l, u2, c2, f, d = 0, h = t20.type === "FeatureCollection", g = t20.type === "Feature", m = h ? t20.features.length : 1;
  for (r = 0; r < m; r++) {
    for (s2 = h ? t20.features[r].geometry : g ? t20.geometry : t20, u2 = h ? t20.features[r].properties : g ? t20.properties : {}, c2 = h ? t20.features[r].bbox : g ? t20.bbox : void 0, f = h ? t20.features[r].id : g ? t20.id : void 0, l = s2 ? s2.type === "GeometryCollection" : false, a = l ? s2.geometries.length : 1, i = 0; i < a; i++) {
      if (n = l ? s2.geometries[i] : s2, n === null) {
        if (e2(null, d, u2, c2, f) === false) return false;
        continue;
      }
      switch (n.type) {
        case "Point":
        case "LineString":
        case "MultiPoint":
        case "Polygon":
        case "MultiLineString":
        case "MultiPolygon": {
          if (e2(n, d, u2, c2, f) === false) return false;
          break;
        }
        case "GeometryCollection": {
          for (o = 0; o < n.geometries.length; o++) if (e2(n.geometries[o], d, u2, c2, f) === false) return false;
          break;
        }
        default:
          throw new Error("Unknown Geometry Type");
      }
    }
    d++;
  }
}
function Td(t20, e2) {
  _d(t20, function(r, o, i, n, a) {
    var s2 = r === null ? null : r.type;
    switch (s2) {
      case null:
      case "Point":
      case "LineString":
      case "Polygon":
        return e2(tr(r, i, { bbox: n, id: a }), o, 0) === false ? false : void 0;
    }
    var l;
    switch (s2) {
      case "MultiPoint":
        l = "Point";
        break;
      case "MultiLineString":
        l = "LineString";
        break;
      case "MultiPolygon":
        l = "Polygon";
        break;
    }
    for (var u2 = 0; u2 < r.coordinates.length; u2++) {
      var c2 = r.coordinates[u2], f = { type: l, coordinates: c2 };
      if (e2(tr(f, i), o, u2) === false) return false;
    }
  });
}
function Sd(t20, e2) {
  Td(t20, function(r, o, i) {
    var n = 0;
    if (r.geometry) {
      var a = r.geometry.type;
      if (!(a === "Point" || a === "MultiPoint")) {
        var s2, l = 0, u2 = 0, c2 = 0;
        if (Mi(r, function(f, d, h, g, m) {
          if (s2 === void 0 || o > l || g > u2 || m > c2) {
            s2 = f, l = o, u2 = g, c2 = m, n = 0;
            return;
          }
          var y = el2([s2, f], r.properties);
          if (e2(y, o, i, m, n) === false) return false;
          n++, s2 = f;
        }) === false) return false;
      }
    }
  });
}
function Gm(t20, e2, r) {
  var o = r, i = false;
  return Sd(t20, function(n, a, s2, l, u2) {
    i === false && r === void 0 ? o = n : o = e2(o, n, a, s2, l, u2), i = true;
  }), o;
}
function Uo(t20) {
  var e2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0];
  return Mi(t20, function(r) {
    e2[0] > r[0] && (e2[0] = r[0]), e2[1] > r[1] && (e2[1] = r[1]), e2[2] < r[0] && (e2[2] = r[0]), e2[3] < r[1] && (e2[3] = r[1]);
  }), e2;
}
Uo.default = Uo;
var tl = Uo;
function rl(t20) {
  return tl(t20);
}
c();
var Lo = "#ffffff";
var Go = class {
  constructor(e2 = {}) {
    t(this, "initialColor", Lo);
    t(this, "color", Lo);
    t(this, "initialTopColor");
    t(this, "topColor");
    t(this, "topTexture");
    t(this, "texture");
    t(this, "hoverColor");
    t(this, "dirty", true);
    t(this, "visible", true);
    t(this, "opacity", 1);
    t(this, "width", 0.1);
    t(this, "height", 0.1);
    t(this, "initialHeight", 0.1);
    t(this, "altitude", 0);
    t(this, "join", "round");
    t(this, "cap", "round");
    t(this, "outline", true);
    t(this, "showImage", true);
    t(this, "flipImageToFaceCamera", true);
    t(this, "url");
    t(this, "side", "double");
    t(this, "renderOrder", 0);
    this.color = (e2 == null ? void 0 : e2.color) !== void 0 ? e2.color : this.color, this.initialColor = this.color, this.width = (e2 == null ? void 0 : e2.width) !== void 0 ? e2.width : this.width, this.opacity = (e2 == null ? void 0 : e2.opacity) !== void 0 ? e2.opacity : this.opacity, this.visible = (e2 == null ? void 0 : e2.visible) !== void 0 ? e2.visible : this.visible, this.height = (e2 == null ? void 0 : e2.height) !== void 0 ? e2.height : this.height, this.initialHeight = this.height, this.altitude = (e2 == null ? void 0 : e2.altitude) !== void 0 ? e2.altitude : this.altitude, this.join = (e2 == null ? void 0 : e2.join) !== void 0 ? e2.join : this.join, this.cap = (e2 == null ? void 0 : e2.cap) !== void 0 ? e2.cap : this.cap, this.topColor = e2 == null ? void 0 : e2.topColor, this.initialTopColor = this.topColor, this.texture = e2 == null ? void 0 : e2.texture, this.topTexture = e2 == null ? void 0 : e2.topTexture, this.outline = (e2 == null ? void 0 : e2.outline) !== void 0 ? !!e2.outline : this.outline, this.showImage = (e2 == null ? void 0 : e2.showImage) !== void 0 ? e2.showImage : this.showImage, this.flipImageToFaceCamera = (e2 == null ? void 0 : e2.flipImageToFaceCamera) !== void 0 ? e2.flipImageToFaceCamera : this.flipImageToFaceCamera, this.url = e2 == null ? void 0 : e2.url, this.side = (e2 == null ? void 0 : e2.side) !== void 0 ? e2.side : this.side, this.renderOrder = (e2 == null ? void 0 : e2.renderOrder) !== void 0 ? e2.renderOrder : this.renderOrder;
  }
};
var rr = class extends Jo {
  constructor() {
    super(...arguments);
    t(this, "type", "entityBatchedMesh");
    t(this, "userData", { entities: {} });
  }
};
var Pn;
var Rn;
var Dr;
var It = class {
  constructor(e2) {
    t(this, "mesh");
    t(this, "focusMesh");
    t(this, "outline");
    t(this, "imageMesh");
    t(this, "textMesh");
    t(this, "textEntityId");
    t(this, "type", "geometry");
    t(this, "dirty", true);
    t(this, "detached", false);
    t(this, "instanceIndex", -1);
    t(this, "geometry");
    t(this, "material");
    t(this, "feature");
    t(this, "currentHeight", 0.1);
    t(this, "focusable", false);
    t(this, "color", new Nt());
    t(this, "topColor", new Nt());
    t(this, "position", new R());
    v(this, Pn, 0);
    v(this, Rn, 1);
    v(this, Dr);
    t(this, "texturesVisible", false);
    this.feature = e2;
  }
  get visible() {
    return this.mesh && this.instanceIndex !== -1 ? this.mesh.getVisibleAt(this.instanceIndex) : false;
  }
  set visible(e2) {
    this.mesh && this.instanceIndex !== -1 && this.mesh.setVisibleAt(this.instanceIndex, e2);
  }
  get renderOrder() {
    return this.mesh ? this.mesh.renderOrder : 0;
  }
  set renderOrder(e2) {
    this.mesh && (this.mesh.renderOrder = e2);
  }
  setColor(e2, r) {
    this.color.set(e2), this.topColor.set(r), this.material && this.material.setColor(this.instanceIndex, this.color, this.topColor);
  }
  getColor() {
    var e2;
    return (e2 = this.material) == null ? void 0 : e2.getColor(this.instanceIndex);
  }
  get altitude() {
    return u(this, Pn);
  }
  set altitude(e2) {
    this.mesh && (this.mesh.position.z = e2, w(this, Pn, e2));
  }
  get opacity() {
    return u(this, Rn);
  }
  set opacity(e2) {
    if (this.material && (this.material.opacity = e2, this.material.transparent = e2 < 1, this.material.needsUpdate = true), this.imageMesh) {
      let r = Array.isArray(this.imageMesh.material) ? this.imageMesh.material : [this.imageMesh.material];
      for (let o of r) o.opacity = e2, o.needsUpdate = true;
    }
    w(this, Rn, e2);
  }
  get texture() {
    var e2, r;
    return (r = (e2 = this.material) == null ? void 0 : e2.texture) == null ? void 0 : r.image.src;
  }
  set texture(e2) {
    this.material && (this.material.texture = e2);
  }
  get textureInstance() {
    var e2;
    return (e2 = this.material) == null ? void 0 : e2.texture;
  }
  set topTexture(e2) {
    this.material && (this.material.topTexture = e2);
  }
  get topTexture() {
    var e2, r;
    return (r = (e2 = this.material) == null ? void 0 : e2.topTexture) == null ? void 0 : r.image.src;
  }
  get topTextureInstance() {
    var e2;
    return (e2 = this.material) == null ? void 0 : e2.topTexture;
  }
  set blendTexture(e2) {
    this.material && (this.material.blendTexture = e2);
  }
  get featureBbox() {
    return u(this, Dr) ? u(this, Dr) : (w(this, Dr, rl(this.feature)), u(this, Dr));
  }
  showTextures() {
    this.material && (this.material.showTextures(this.instanceIndex), this.texturesVisible = true);
  }
  hideTextures() {
    this.material && (this.material.hideTextures(this.instanceIndex), this.texturesVisible = false);
  }
  removeSideTexture() {
    this.material && this.material.removeSideTexture(this.instanceIndex);
  }
  removeTopTexture() {
    this.material && this.material.removeTopTexture(this.instanceIndex);
  }
};
Pn = /* @__PURE__ */ new WeakMap(), Rn = /* @__PURE__ */ new WeakMap(), Dr = /* @__PURE__ */ new WeakMap();
c();
var nl = "#ffffff";
var nr;
var Ci = class {
  constructor(e2 = {}) {
    t(this, "color", nl);
    t(this, "initialColor", nl);
    t(this, "topColor");
    t(this, "initialTopColor");
    t(this, "opacity", 1);
    t(this, "height");
    v(this, nr);
    t(this, "outline", true);
    t(this, "texture");
    t(this, "topTexture");
    t(this, "dirty", true);
    var r, o;
    this.color = (r = e2 == null ? void 0 : e2.color) != null ? r : this.color, this.initialColor = this.color, this.topColor = e2 == null ? void 0 : e2.topColor, this.initialTopColor = this.topColor, this.opacity = (o = e2 == null ? void 0 : e2.opacity) != null ? o : this.opacity, this.height = e2 == null ? void 0 : e2.height, this.shading = e2 == null ? void 0 : e2.shading, this.outline = (e2 == null ? void 0 : e2.outline) !== void 0 ? !!e2.outline : this.outline;
  }
  get shading() {
    return u(this, nr);
  }
  set shading(e2) {
    var r;
    if (!e2) {
      w(this, nr, void 0);
      return;
    }
    w(this, nr, (r = u(this, nr)) != null ? r : { start: 0, end: 0, intensity: 0 }), Object.assign(u(this, nr), e2);
  }
};
nr = /* @__PURE__ */ new WeakMap();
c();
c();
function qr(t20) {
  var r;
  let e2 = (r = t20.parent) == null ? void 0 : r.children.find((o) => o.userData.outlineOfEntityId === t20.userData.entityId);
  return e2 instanceof kr ? e2 : void 0;
}
c();
c();
c();
c();
var Qr = class {
  constructor() {
    t(this, "hover", false);
    t(this, "dirty", false);
  }
};
c();
c();
function Di(t20) {
  "@babel/helpers - typeof";
  return Di = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e2) {
    return typeof e2;
  } : function(e2) {
    return e2 && typeof Symbol == "function" && e2.constructor === Symbol && e2 !== Symbol.prototype ? "symbol" : typeof e2;
  }, Di(t20);
}
var wd = /^\s+/;
var Md = /\s+$/;
function ae(t20, e2) {
  if (t20 = t20 || "", e2 = e2 || {}, t20 instanceof ae) return t20;
  if (!(this instanceof ae)) return new ae(t20, e2);
  var r = Cd(t20);
  this._originalInput = t20, this._r = r.r, this._g = r.g, this._b = r.b, this._a = r.a, this._roundA = Math.round(100 * this._a) / 100, this._format = e2.format || r.format, this._gradientType = e2.gradientType, this._r < 1 && (this._r = Math.round(this._r)), this._g < 1 && (this._g = Math.round(this._g)), this._b < 1 && (this._b = Math.round(this._b)), this._ok = r.ok;
}
ae.prototype = { isDark: function() {
  return this.getBrightness() < 128;
}, isLight: function() {
  return !this.isDark();
}, isValid: function() {
  return this._ok;
}, getOriginalInput: function() {
  return this._originalInput;
}, getFormat: function() {
  return this._format;
}, getAlpha: function() {
  return this._a;
}, getBrightness: function() {
  var e2 = this.toRgb();
  return (e2.r * 299 + e2.g * 587 + e2.b * 114) / 1e3;
}, getLuminance: function() {
  var e2 = this.toRgb(), r, o, i, n, a, s2;
  return r = e2.r / 255, o = e2.g / 255, i = e2.b / 255, r <= 0.03928 ? n = r / 12.92 : n = Math.pow((r + 0.055) / 1.055, 2.4), o <= 0.03928 ? a = o / 12.92 : a = Math.pow((o + 0.055) / 1.055, 2.4), i <= 0.03928 ? s2 = i / 12.92 : s2 = Math.pow((i + 0.055) / 1.055, 2.4), 0.2126 * n + 0.7152 * a + 0.0722 * s2;
}, setAlpha: function(e2) {
  return this._a = cl(e2), this._roundA = Math.round(100 * this._a) / 100, this;
}, toHsv: function() {
  var e2 = ol(this._r, this._g, this._b);
  return { h: e2.h * 360, s: e2.s, v: e2.v, a: this._a };
}, toHsvString: function() {
  var e2 = ol(this._r, this._g, this._b), r = Math.round(e2.h * 360), o = Math.round(e2.s * 100), i = Math.round(e2.v * 100);
  return this._a == 1 ? "hsv(" + r + ", " + o + "%, " + i + "%)" : "hsva(" + r + ", " + o + "%, " + i + "%, " + this._roundA + ")";
}, toHsl: function() {
  var e2 = il(this._r, this._g, this._b);
  return { h: e2.h * 360, s: e2.s, l: e2.l, a: this._a };
}, toHslString: function() {
  var e2 = il(this._r, this._g, this._b), r = Math.round(e2.h * 360), o = Math.round(e2.s * 100), i = Math.round(e2.l * 100);
  return this._a == 1 ? "hsl(" + r + ", " + o + "%, " + i + "%)" : "hsla(" + r + ", " + o + "%, " + i + "%, " + this._roundA + ")";
}, toHex: function(e2) {
  return al(this._r, this._g, this._b, e2);
}, toHexString: function(e2) {
  return "#" + this.toHex(e2);
}, toHex8: function(e2) {
  return Od(this._r, this._g, this._b, this._a, e2);
}, toHex8String: function(e2) {
  return "#" + this.toHex8(e2);
}, toRgb: function() {
  return { r: Math.round(this._r), g: Math.round(this._g), b: Math.round(this._b), a: this._a };
}, toRgbString: function() {
  return this._a == 1 ? "rgb(" + Math.round(this._r) + ", " + Math.round(this._g) + ", " + Math.round(this._b) + ")" : "rgba(" + Math.round(this._r) + ", " + Math.round(this._g) + ", " + Math.round(this._b) + ", " + this._roundA + ")";
}, toPercentageRgb: function() {
  return { r: Math.round(He(this._r, 255) * 100) + "%", g: Math.round(He(this._g, 255) * 100) + "%", b: Math.round(He(this._b, 255) * 100) + "%", a: this._a };
}, toPercentageRgbString: function() {
  return this._a == 1 ? "rgb(" + Math.round(He(this._r, 255) * 100) + "%, " + Math.round(He(this._g, 255) * 100) + "%, " + Math.round(He(this._b, 255) * 100) + "%)" : "rgba(" + Math.round(He(this._r, 255) * 100) + "%, " + Math.round(He(this._g, 255) * 100) + "%, " + Math.round(He(this._b, 255) * 100) + "%, " + this._roundA + ")";
}, toName: function() {
  return this._a === 0 ? "transparent" : this._a < 1 ? false : Vd[al(this._r, this._g, this._b, true)] || false;
}, toFilter: function(e2) {
  var r = "#" + sl(this._r, this._g, this._b, this._a), o = r, i = this._gradientType ? "GradientType = 1, " : "";
  if (e2) {
    var n = ae(e2);
    o = "#" + sl(n._r, n._g, n._b, n._a);
  }
  return "progid:DXImageTransform.Microsoft.gradient(" + i + "startColorstr=" + r + ",endColorstr=" + o + ")";
}, toString: function(e2) {
  var r = !!e2;
  e2 = e2 || this._format;
  var o = false, i = this._a < 1 && this._a >= 0, n = !r && i && (e2 === "hex" || e2 === "hex6" || e2 === "hex3" || e2 === "hex4" || e2 === "hex8" || e2 === "name");
  return n ? e2 === "name" && this._a === 0 ? this.toName() : this.toRgbString() : (e2 === "rgb" && (o = this.toRgbString()), e2 === "prgb" && (o = this.toPercentageRgbString()), (e2 === "hex" || e2 === "hex6") && (o = this.toHexString()), e2 === "hex3" && (o = this.toHexString(true)), e2 === "hex4" && (o = this.toHex8String(true)), e2 === "hex8" && (o = this.toHex8String()), e2 === "name" && (o = this.toName()), e2 === "hsl" && (o = this.toHslString()), e2 === "hsv" && (o = this.toHsvString()), o || this.toHexString());
}, clone: function() {
  return ae(this.toString());
}, _applyModification: function(e2, r) {
  var o = e2.apply(null, [this].concat([].slice.call(r)));
  return this._r = o._r, this._g = o._g, this._b = o._b, this.setAlpha(o._a), this;
}, lighten: function() {
  return this._applyModification(Ud, arguments);
}, brighten: function() {
  return this._applyModification(Ld, arguments);
}, darken: function() {
  return this._applyModification(Gd, arguments);
}, desaturate: function() {
  return this._applyModification(Id, arguments);
}, saturate: function() {
  return this._applyModification(Pd, arguments);
}, greyscale: function() {
  return this._applyModification(Rd, arguments);
}, spin: function() {
  return this._applyModification(Fd, arguments);
}, _applyCombination: function(e2, r) {
  return e2.apply(null, [this].concat([].slice.call(r)));
}, analogous: function() {
  return this._applyCombination(jd, arguments);
}, complement: function() {
  return this._applyCombination(Bd, arguments);
}, monochromatic: function() {
  return this._applyCombination(zd, arguments);
}, splitcomplement: function() {
  return this._applyCombination(Nd, arguments);
}, triad: function() {
  return this._applyCombination(ll2, [3]);
}, tetrad: function() {
  return this._applyCombination(ll2, [4]);
} };
ae.fromRatio = function(t20, e2) {
  if (Di(t20) == "object") {
    var r = {};
    for (var o in t20) t20.hasOwnProperty(o) && (o === "a" ? r[o] = t20[o] : r[o] = Un(t20[o]));
    t20 = r;
  }
  return ae(t20, e2);
};
function Cd(t20) {
  var e2 = { r: 0, g: 0, b: 0 }, r = 1, o = null, i = null, n = null, a = false, s2 = false;
  return typeof t20 == "string" && (t20 = Yd(t20)), Di(t20) == "object" && (Vt2(t20.r) && Vt2(t20.g) && Vt2(t20.b) ? (e2 = Dd(t20.r, t20.g, t20.b), a = true, s2 = String(t20.r).substr(-1) === "%" ? "prgb" : "rgb") : Vt2(t20.h) && Vt2(t20.s) && Vt2(t20.v) ? (o = Un(t20.s), i = Un(t20.v), e2 = Ad(t20.h, o, i), a = true, s2 = "hsv") : Vt2(t20.h) && Vt2(t20.s) && Vt2(t20.l) && (o = Un(t20.s), n = Un(t20.l), e2 = Ed(t20.h, o, n), a = true, s2 = "hsl"), t20.hasOwnProperty("a") && (r = t20.a)), r = cl(r), { ok: a, format: t20.format || s2, r: Math.min(255, Math.max(e2.r, 0)), g: Math.min(255, Math.max(e2.g, 0)), b: Math.min(255, Math.max(e2.b, 0)), a: r };
}
function Dd(t20, e2, r) {
  return { r: He(t20, 255) * 255, g: He(e2, 255) * 255, b: He(r, 255) * 255 };
}
function il(t20, e2, r) {
  t20 = He(t20, 255), e2 = He(e2, 255), r = He(r, 255);
  var o = Math.max(t20, e2, r), i = Math.min(t20, e2, r), n, a, s2 = (o + i) / 2;
  if (o == i) n = a = 0;
  else {
    var l = o - i;
    switch (a = s2 > 0.5 ? l / (2 - o - i) : l / (o + i), o) {
      case t20:
        n = (e2 - r) / l + (e2 < r ? 6 : 0);
        break;
      case e2:
        n = (r - t20) / l + 2;
        break;
      case r:
        n = (t20 - e2) / l + 4;
        break;
    }
    n /= 6;
  }
  return { h: n, s: a, l: s2 };
}
function Ed(t20, e2, r) {
  var o, i, n;
  t20 = He(t20, 360), e2 = He(e2, 100), r = He(r, 100);
  function a(u2, c2, f) {
    return f < 0 && (f += 1), f > 1 && (f -= 1), f < 1 / 6 ? u2 + (c2 - u2) * 6 * f : f < 1 / 2 ? c2 : f < 2 / 3 ? u2 + (c2 - u2) * (2 / 3 - f) * 6 : u2;
  }
  if (e2 === 0) o = i = n = r;
  else {
    var s2 = r < 0.5 ? r * (1 + e2) : r + e2 - r * e2, l = 2 * r - s2;
    o = a(l, s2, t20 + 1 / 3), i = a(l, s2, t20), n = a(l, s2, t20 - 1 / 3);
  }
  return { r: o * 255, g: i * 255, b: n * 255 };
}
function ol(t20, e2, r) {
  t20 = He(t20, 255), e2 = He(e2, 255), r = He(r, 255);
  var o = Math.max(t20, e2, r), i = Math.min(t20, e2, r), n, a, s2 = o, l = o - i;
  if (a = o === 0 ? 0 : l / o, o == i) n = 0;
  else {
    switch (o) {
      case t20:
        n = (e2 - r) / l + (e2 < r ? 6 : 0);
        break;
      case e2:
        n = (r - t20) / l + 2;
        break;
      case r:
        n = (t20 - e2) / l + 4;
        break;
    }
    n /= 6;
  }
  return { h: n, s: a, v: s2 };
}
function Ad(t20, e2, r) {
  t20 = He(t20, 360) * 6, e2 = He(e2, 100), r = He(r, 100);
  var o = Math.floor(t20), i = t20 - o, n = r * (1 - e2), a = r * (1 - i * e2), s2 = r * (1 - (1 - i) * e2), l = o % 6, u2 = [r, a, n, n, s2, r][l], c2 = [s2, r, r, a, n, n][l], f = [n, n, s2, r, r, a][l];
  return { r: u2 * 255, g: c2 * 255, b: f * 255 };
}
function al(t20, e2, r, o) {
  var i = [Mt(Math.round(t20).toString(16)), Mt(Math.round(e2).toString(16)), Mt(Math.round(r).toString(16))];
  return o && i[0].charAt(0) == i[0].charAt(1) && i[1].charAt(0) == i[1].charAt(1) && i[2].charAt(0) == i[2].charAt(1) ? i[0].charAt(0) + i[1].charAt(0) + i[2].charAt(0) : i.join("");
}
function Od(t20, e2, r, o, i) {
  var n = [Mt(Math.round(t20).toString(16)), Mt(Math.round(e2).toString(16)), Mt(Math.round(r).toString(16)), Mt(fl(o))];
  return i && n[0].charAt(0) == n[0].charAt(1) && n[1].charAt(0) == n[1].charAt(1) && n[2].charAt(0) == n[2].charAt(1) && n[3].charAt(0) == n[3].charAt(1) ? n[0].charAt(0) + n[1].charAt(0) + n[2].charAt(0) + n[3].charAt(0) : n.join("");
}
function sl(t20, e2, r, o) {
  var i = [Mt(fl(o)), Mt(Math.round(t20).toString(16)), Mt(Math.round(e2).toString(16)), Mt(Math.round(r).toString(16))];
  return i.join("");
}
ae.equals = function(t20, e2) {
  return !t20 || !e2 ? false : ae(t20).toRgbString() == ae(e2).toRgbString();
};
ae.random = function() {
  return ae.fromRatio({ r: Math.random(), g: Math.random(), b: Math.random() });
};
function Id(t20, e2) {
  e2 = e2 === 0 ? 0 : e2 || 10;
  var r = ae(t20).toHsl();
  return r.s -= e2 / 100, r.s = Ei(r.s), ae(r);
}
function Pd(t20, e2) {
  e2 = e2 === 0 ? 0 : e2 || 10;
  var r = ae(t20).toHsl();
  return r.s += e2 / 100, r.s = Ei(r.s), ae(r);
}
function Rd(t20) {
  return ae(t20).desaturate(100);
}
function Ud(t20, e2) {
  e2 = e2 === 0 ? 0 : e2 || 10;
  var r = ae(t20).toHsl();
  return r.l += e2 / 100, r.l = Ei(r.l), ae(r);
}
function Ld(t20, e2) {
  e2 = e2 === 0 ? 0 : e2 || 10;
  var r = ae(t20).toRgb();
  return r.r = Math.max(0, Math.min(255, r.r - Math.round(255 * -(e2 / 100)))), r.g = Math.max(0, Math.min(255, r.g - Math.round(255 * -(e2 / 100)))), r.b = Math.max(0, Math.min(255, r.b - Math.round(255 * -(e2 / 100)))), ae(r);
}
function Gd(t20, e2) {
  e2 = e2 === 0 ? 0 : e2 || 10;
  var r = ae(t20).toHsl();
  return r.l -= e2 / 100, r.l = Ei(r.l), ae(r);
}
function Fd(t20, e2) {
  var r = ae(t20).toHsl(), o = (r.h + e2) % 360;
  return r.h = o < 0 ? 360 + o : o, ae(r);
}
function Bd(t20) {
  var e2 = ae(t20).toHsl();
  return e2.h = (e2.h + 180) % 360, ae(e2);
}
function ll2(t20, e2) {
  if (isNaN(e2) || e2 <= 0) throw new Error("Argument to polyad must be a positive number");
  for (var r = ae(t20).toHsl(), o = [ae(t20)], i = 360 / e2, n = 1; n < e2; n++) o.push(ae({ h: (r.h + n * i) % 360, s: r.s, l: r.l }));
  return o;
}
function Nd(t20) {
  var e2 = ae(t20).toHsl(), r = e2.h;
  return [ae(t20), ae({ h: (r + 72) % 360, s: e2.s, l: e2.l }), ae({ h: (r + 216) % 360, s: e2.s, l: e2.l })];
}
function jd(t20, e2, r) {
  e2 = e2 || 6, r = r || 30;
  var o = ae(t20).toHsl(), i = 360 / r, n = [ae(t20)];
  for (o.h = (o.h - (i * e2 >> 1) + 720) % 360; --e2; ) o.h = (o.h + i) % 360, n.push(ae(o));
  return n;
}
function zd(t20, e2) {
  e2 = e2 || 6;
  for (var r = ae(t20).toHsv(), o = r.h, i = r.s, n = r.v, a = [], s2 = 1 / e2; e2--; ) a.push(ae({ h: o, s: i, v: n })), n = (n + s2) % 1;
  return a;
}
ae.mix = function(t20, e2, r) {
  r = r === 0 ? 0 : r || 50;
  var o = ae(t20).toRgb(), i = ae(e2).toRgb(), n = r / 100, a = { r: (i.r - o.r) * n + o.r, g: (i.g - o.g) * n + o.g, b: (i.b - o.b) * n + o.b, a: (i.a - o.a) * n + o.a };
  return ae(a);
};
ae.readability = function(t20, e2) {
  var r = ae(t20), o = ae(e2);
  return (Math.max(r.getLuminance(), o.getLuminance()) + 0.05) / (Math.min(r.getLuminance(), o.getLuminance()) + 0.05);
};
ae.isReadable = function(t20, e2, r) {
  var o = ae.readability(t20, e2), i, n;
  switch (n = false, i = Xd(r), i.level + i.size) {
    case "AAsmall":
    case "AAAlarge":
      n = o >= 4.5;
      break;
    case "AAlarge":
      n = o >= 3;
      break;
    case "AAAsmall":
      n = o >= 7;
      break;
  }
  return n;
};
ae.mostReadable = function(t20, e2, r) {
  var o = null, i = 0, n, a, s2, l;
  r = r || {}, a = r.includeFallbackColors, s2 = r.level, l = r.size;
  for (var u2 = 0; u2 < e2.length; u2++) n = ae.readability(t20, e2[u2]), n > i && (i = n, o = ae(e2[u2]));
  return ae.isReadable(t20, o, { level: s2, size: l }) || !a ? o : (r.includeFallbackColors = false, ae.mostReadable(t20, ["#fff", "#000"], r));
};
var Fo = ae.names = { aliceblue: "f0f8ff", antiquewhite: "faebd7", aqua: "0ff", aquamarine: "7fffd4", azure: "f0ffff", beige: "f5f5dc", bisque: "ffe4c4", black: "000", blanchedalmond: "ffebcd", blue: "00f", blueviolet: "8a2be2", brown: "a52a2a", burlywood: "deb887", burntsienna: "ea7e5d", cadetblue: "5f9ea0", chartreuse: "7fff00", chocolate: "d2691e", coral: "ff7f50", cornflowerblue: "6495ed", cornsilk: "fff8dc", crimson: "dc143c", cyan: "0ff", darkblue: "00008b", darkcyan: "008b8b", darkgoldenrod: "b8860b", darkgray: "a9a9a9", darkgreen: "006400", darkgrey: "a9a9a9", darkkhaki: "bdb76b", darkmagenta: "8b008b", darkolivegreen: "556b2f", darkorange: "ff8c00", darkorchid: "9932cc", darkred: "8b0000", darksalmon: "e9967a", darkseagreen: "8fbc8f", darkslateblue: "483d8b", darkslategray: "2f4f4f", darkslategrey: "2f4f4f", darkturquoise: "00ced1", darkviolet: "9400d3", deeppink: "ff1493", deepskyblue: "00bfff", dimgray: "696969", dimgrey: "696969", dodgerblue: "1e90ff", firebrick: "b22222", floralwhite: "fffaf0", forestgreen: "228b22", fuchsia: "f0f", gainsboro: "dcdcdc", ghostwhite: "f8f8ff", gold: "ffd700", goldenrod: "daa520", gray: "808080", green: "008000", greenyellow: "adff2f", grey: "808080", honeydew: "f0fff0", hotpink: "ff69b4", indianred: "cd5c5c", indigo: "4b0082", ivory: "fffff0", khaki: "f0e68c", lavender: "e6e6fa", lavenderblush: "fff0f5", lawngreen: "7cfc00", lemonchiffon: "fffacd", lightblue: "add8e6", lightcoral: "f08080", lightcyan: "e0ffff", lightgoldenrodyellow: "fafad2", lightgray: "d3d3d3", lightgreen: "90ee90", lightgrey: "d3d3d3", lightpink: "ffb6c1", lightsalmon: "ffa07a", lightseagreen: "20b2aa", lightskyblue: "87cefa", lightslategray: "789", lightslategrey: "789", lightsteelblue: "b0c4de", lightyellow: "ffffe0", lime: "0f0", limegreen: "32cd32", linen: "faf0e6", magenta: "f0f", maroon: "800000", mediumaquamarine: "66cdaa", mediumblue: "0000cd", mediumorchid: "ba55d3", mediumpurple: "9370db", mediumseagreen: "3cb371", mediumslateblue: "7b68ee", mediumspringgreen: "00fa9a", mediumturquoise: "48d1cc", mediumvioletred: "c71585", midnightblue: "191970", mintcream: "f5fffa", mistyrose: "ffe4e1", moccasin: "ffe4b5", navajowhite: "ffdead", navy: "000080", oldlace: "fdf5e6", olive: "808000", olivedrab: "6b8e23", orange: "ffa500", orangered: "ff4500", orchid: "da70d6", palegoldenrod: "eee8aa", palegreen: "98fb98", paleturquoise: "afeeee", palevioletred: "db7093", papayawhip: "ffefd5", peachpuff: "ffdab9", peru: "cd853f", pink: "ffc0cb", plum: "dda0dd", powderblue: "b0e0e6", purple: "800080", rebeccapurple: "663399", red: "f00", rosybrown: "bc8f8f", royalblue: "4169e1", saddlebrown: "8b4513", salmon: "fa8072", sandybrown: "f4a460", seagreen: "2e8b57", seashell: "fff5ee", sienna: "a0522d", silver: "c0c0c0", skyblue: "87ceeb", slateblue: "6a5acd", slategray: "708090", slategrey: "708090", snow: "fffafa", springgreen: "00ff7f", steelblue: "4682b4", tan: "d2b48c", teal: "008080", thistle: "d8bfd8", tomato: "ff6347", turquoise: "40e0d0", violet: "ee82ee", wheat: "f5deb3", white: "fff", whitesmoke: "f5f5f5", yellow: "ff0", yellowgreen: "9acd32" };
var Vd = ae.hexNames = Wd(Fo);
function Wd(t20) {
  var e2 = {};
  for (var r in t20) t20.hasOwnProperty(r) && (e2[t20[r]] = r);
  return e2;
}
function cl(t20) {
  return t20 = parseFloat(t20), (isNaN(t20) || t20 < 0 || t20 > 1) && (t20 = 1), t20;
}
function He(t20, e2) {
  Hd(t20) && (t20 = "100%");
  var r = Zd(t20);
  return t20 = Math.min(e2, Math.max(0, parseFloat(t20))), r && (t20 = parseInt(t20 * e2, 10) / 100), Math.abs(t20 - e2) < 1e-6 ? 1 : t20 % e2 / parseFloat(e2);
}
function Ei(t20) {
  return Math.min(1, Math.max(0, t20));
}
function ht(t20) {
  return parseInt(t20, 16);
}
function Hd(t20) {
  return typeof t20 == "string" && t20.indexOf(".") != -1 && parseFloat(t20) === 1;
}
function Zd(t20) {
  return typeof t20 == "string" && t20.indexOf("%") != -1;
}
function Mt(t20) {
  return t20.length == 1 ? "0" + t20 : "" + t20;
}
function Un(t20) {
  return t20 <= 1 && (t20 = t20 * 100 + "%"), t20;
}
function fl(t20) {
  return Math.round(parseFloat(t20) * 255).toString(16);
}
function ul(t20) {
  return ht(t20) / 255;
}
var wt = function() {
  var t20 = "[-\\+]?\\d+%?", e2 = "[-\\+]?\\d*\\.\\d+%?", r = "(?:" + e2 + ")|(?:" + t20 + ")", o = "[\\s|\\(]+(" + r + ")[,|\\s]+(" + r + ")[,|\\s]+(" + r + ")\\s*\\)?", i = "[\\s|\\(]+(" + r + ")[,|\\s]+(" + r + ")[,|\\s]+(" + r + ")[,|\\s]+(" + r + ")\\s*\\)?";
  return { CSS_UNIT: new RegExp(r), rgb: new RegExp("rgb" + o), rgba: new RegExp("rgba" + i), hsl: new RegExp("hsl" + o), hsla: new RegExp("hsla" + i), hsv: new RegExp("hsv" + o), hsva: new RegExp("hsva" + i), hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/, hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/, hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/, hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/ };
}();
function Vt2(t20) {
  return !!wt.CSS_UNIT.exec(t20);
}
function Yd(t20) {
  t20 = t20.replace(wd, "").replace(Md, "").toLowerCase();
  var e2 = false;
  if (Fo[t20]) t20 = Fo[t20], e2 = true;
  else if (t20 == "transparent") return { r: 0, g: 0, b: 0, a: 0, format: "name" };
  var r;
  return (r = wt.rgb.exec(t20)) ? { r: r[1], g: r[2], b: r[3] } : (r = wt.rgba.exec(t20)) ? { r: r[1], g: r[2], b: r[3], a: r[4] } : (r = wt.hsl.exec(t20)) ? { h: r[1], s: r[2], l: r[3] } : (r = wt.hsla.exec(t20)) ? { h: r[1], s: r[2], l: r[3], a: r[4] } : (r = wt.hsv.exec(t20)) ? { h: r[1], s: r[2], v: r[3] } : (r = wt.hsva.exec(t20)) ? { h: r[1], s: r[2], v: r[3], a: r[4] } : (r = wt.hex8.exec(t20)) ? { r: ht(r[1]), g: ht(r[2]), b: ht(r[3]), a: ul(r[4]), format: e2 ? "name" : "hex8" } : (r = wt.hex6.exec(t20)) ? { r: ht(r[1]), g: ht(r[2]), b: ht(r[3]), format: e2 ? "name" : "hex" } : (r = wt.hex4.exec(t20)) ? { r: ht(r[1] + "" + r[1]), g: ht(r[2] + "" + r[2]), b: ht(r[3] + "" + r[3]), a: ul(r[4] + "" + r[4]), format: e2 ? "name" : "hex8" } : (r = wt.hex3.exec(t20)) ? { r: ht(r[1] + "" + r[1]), g: ht(r[2] + "" + r[2]), b: ht(r[3] + "" + r[3]), format: e2 ? "name" : "hex" } : false;
}
function Xd(t20) {
  var e2, r;
  return t20 = t20 || { level: "AA", size: "small" }, e2 = (t20.level || "AA").toUpperCase(), r = (t20.size || "small").toLowerCase(), e2 !== "AA" && e2 !== "AAA" && (e2 = "AA"), r !== "small" && r !== "large" && (r = "small"), { level: e2, size: r };
}
var Bo = s(qs());
c();
var dl = ["", "", "low", "medium", "high", "always-visible"];
function hl(t20) {
  return Math.min(5, Math.max(2, t20));
}
function $r2(t20) {
  if (typeof t20 == "number") return hl(t20);
  let e2 = dl.indexOf(t20);
  return e2 === -1 ? 3 : e2;
}
function dg(t20) {
  let e2 = hl(t20);
  return dl[e2];
}
var jo = K.object({ rank: K.union([K.enum(["low", "medium", "high", "always-visible"]), K.number()]).optional(), interactive: K.boolean().optional(), appearance: K.object({ margin: K.number().min(6).optional(), text: K.object({ numLines: K.number().optional(), lineHeight: K.number().optional(), size: K.number().optional(), maxWidth: K.number().optional(), foregroundColor: K.string().optional(), backgroundColor: K.string().optional() }).optional(), marker: K.object({ size: K.number().optional(), foregroundColor: K.object({ active: K.string().optional(), inactive: K.string().optional() }).optional(), backgroundColor: K.object({ active: K.string().optional(), inactive: K.string().optional() }).optional() }).optional() }).optional() });
function xg(t20, e2, r) {
  K.array(K.number()).min(2).max(3).parse(t20), K.string().parse(e2), jo.parse(r || {});
}
var en = { margin: 6, text: { numLines: 2, lineHeight: 1.2, size: 11.5, maxWidth: 150, foregroundColor: "white", backgroundColor: "#333" }, marker: { size: 5, foregroundColor: { active: "white", inactive: void 0 }, backgroundColor: { active: "#333", inactive: void 0 } } };
var Kd = { lightOnDark: { ...en, text: { ...en.text, foregroundColor: "white", backgroundColor: "#333" }, marker: { ...en.marker, foregroundColor: { active: "white", inactive: void 0 }, backgroundColor: { active: "#333", inactive: void 0 } } }, darkOnLight: { ...en, text: { ...en.text, foregroundColor: "#333", backgroundColor: "white" }, marker: { ...en.marker, foregroundColor: { active: "#333", inactive: void 0 }, backgroundColor: { active: "white", inactive: void 0 } } } };
var Jd = "LOW_PRIORITY";
var pl = 4;
var qd = 6;
var Qd = 20;
var $d = 2.5;
var eh = 2;
var th = "cover";
var rh = -1 / 0;
var ml = 6.5;
var gl = { heightAbovePolygon: 0, appearance: Kd.darkOnLight };
var tn2 = class tn3 {
  constructor(e2, r, o) {
    t(this, "lines", 0);
    t(this, "id");
    t(this, "rank");
    t(this, "type", "label");
    t(this, "initialRank");
    t(this, "contextConfigured", false);
    t(this, "fillText");
    t(this, "newStyle", {});
    t(this, "opacity", 0);
    t(this, "visibilityNeedsUpdate", false);
    t(this, "text");
    t(this, "style", { top: 0, left: 0, textLabelVisible: true, pinVisibility: 1, textAlign: "left" });
    t(this, "projection", new at());
    t(this, "labelCacheId");
    t(this, "_cache", {});
    t(this, "appearance");
    t(this, "options");
    t(this, "visible", true);
    t(this, "enabled", true);
    t(this, "isOccluded", false);
    t(this, "offscreen", false);
    t(this, "canShow", false);
    t(this, "activeBoundingBox", { x: 0, y: 0, w: 0, h: 0 });
    t(this, "dimensions", { width: 0, height: 0 });
    t(this, "currentStrategyIndex", -1);
    t(this, "totalMarkerSize", 0);
    t(this, "dirty", true);
    t(this, "parentDirty", true);
    t(this, "collisionDirty", true);
    t(this, "lastTextAlign");
    t(this, "imageHash");
    t(this, "markerSize", 0);
    t(this, "iconVisible", false);
    t(this, "dp");
    t(this, "animate", true);
    t(this, "onStrategySelected", (e3) => {
      if (this.currentStrategyIndex === e3) return;
      let r2 = this.strategies[e3];
      r2 && r2.onStrategySelected(this), this.currentStrategyIndex = e3;
      let o2 = this.style;
      this.style = this.newStyle, this.newStyle = o2;
    });
    t(this, "packedMessage", { x: 0, y: 0, enabled: false, rank: 0, bboxes: [], shouldCollideWithScreenEdges: false, lockedToStrategyIndex: -1 });
    var n, a;
    if (this.id = (n = r.id) != null ? n : tt(), this.options = (0, Bo.default)({}, r, gl), this.text = e2, this.dp = (s2 = 1) => s2 * o.pixelRatio, typeof r.rank == "string") this.rank = $r2(r.rank), this.initialRank = this.rank;
    else if (r.rank != null && r.rank > 0) this.rank = r.rank, this.initialRank = r.rank;
    else {
      let s2 = Math.trunc(e.env.NODE_ENV === "test" ? tn3.testId : tn3.testId * 10) / 10;
      tn3.testId += 1e-3, this.rank = s2, this.initialRank = s2;
    }
    let i = (0, Bo.default)({}, this.options.appearance, gl.appearance);
    this.appearance = { margin: i.margin, text: { lineHeight: i.text.lineHeight, numLines: i.text.numLines, size: i.text.size, maxWidth: i.text.maxWidth, foregroundColor: i.text.foregroundColor, backgroundColor: i.text.backgroundColor }, marker: { foregroundColor: { active: i.marker.foregroundColor.active, inactive: i.marker.foregroundColor.inactive || ae(i.marker.foregroundColor.active).setAlpha(0.5).toRgbString() }, backgroundColor: { active: i.marker.backgroundColor.active, inactive: i.marker.backgroundColor.inactive || ae(i.marker.backgroundColor.active).setAlpha(0.5).toRgbString() }, icon: i.marker.icon, iconSize: i.marker.iconSize || Qd, iconPadding: (a = i.marker.iconPadding) != null ? a : eh, iconFit: i.marker.iconFit || th, iconOverflow: i.marker.iconOverflow || "hidden", iconVisibleAtZoomLevel: i.marker.iconVisibleAtZoomLevel == null ? rh : i.marker.iconVisibleAtZoomLevel } };
  }
  setEntity() {
  }
  calculateMarkerSize() {
    let e2 = this.dp();
    this.iconVisible && typeof this.appearance.marker.iconSize < "u" && this.imageHash ? this.markerSize = this.dp(this.appearance.marker.iconSize) : this.markerSize = this.dp(ml), this.totalMarkerSize = Math.ceil((this.markerSize + $d) / e2);
  }
  get lowPriorityStrategyIndex() {
    return this.text === "" ? -1 : 3;
  }
  get strategies() {
    let { width: e2, height: r } = this.dimensions, { margin: o } = this.appearance, i = Math.max(qd, o), n = this.iconVisible ? i / 2 : 0, a = this.iconVisible ? this.totalMarkerSize : ml, s2 = [{ name: "RIGHT", getBoundingBox: () => {
      let l = Math.max(this.totalMarkerSize, r);
      return [l / 2 + i, l / 2 + i, this.totalMarkerSize / 2 + i, this.totalMarkerSize / 2 + e2 + i];
    }, onStrategySelected: () => {
      this.newStyle.textAlign = "left", this.newStyle.pinVisibility = 1, this.newStyle.top = -r / 2, this.newStyle.left = this.totalMarkerSize / 2 + pl, this.newStyle.textLabelVisible = true;
    } }, { name: "LEFT", getBoundingBox: () => {
      let l = Math.max(this.totalMarkerSize, r);
      return [l / 2 + i, l / 2 + i, this.totalMarkerSize / 2 + e2 + i, this.totalMarkerSize / 2 + i];
    }, onStrategySelected: () => {
      this.newStyle.textAlign = "right", this.newStyle.pinVisibility = 1, this.newStyle.top = -r / 2, this.newStyle.left = -e2 - this.totalMarkerSize / 2 - pl, this.newStyle.textLabelVisible = true;
    } }, { name: "TOP", getBoundingBox: () => {
      let l = this.dp();
      return [r + this.totalMarkerSize / 2 / l + i, this.totalMarkerSize / 2 + i, e2 / 2 + i, e2 / 2 + i];
    }, onStrategySelected: () => {
      this.newStyle.pinVisibility = 1, this.newStyle.textAlign = "center", this.newStyle.textLabelVisible = true, this.newStyle.top = -r - this.totalMarkerSize / 2, this.newStyle.left = -e2 / 2;
    } }, { name: Jd, getBoundingBox: () => [a / 2 + n, a / 2 + n, a / 2 + n, a / 2 + n], onStrategySelected: () => {
      this.newStyle.pinVisibility = 0.5, this.newStyle.textLabelVisible = false, this.newStyle.top = 0, this.newStyle.left = 0;
    } }];
    return this.text === "" ? [{ name: "ICON_ONLY", getBoundingBox: () => [this.totalMarkerSize / 2 + i, this.totalMarkerSize / 2 + i, this.totalMarkerSize / 2 + i, this.totalMarkerSize / 2 + i], onStrategySelected: () => {
      this.newStyle.pinVisibility = 1, this.newStyle.textLabelVisible = false, this.newStyle.top = 0, this.newStyle.left = 0;
    } }] : s2;
  }
  updatePosition() {
  }
  disable() {
    this.visible = false;
  }
  toPackedMessage(e2 = false) {
    var r;
    if (this.visible && e2 && this.collisionDirty === false && this.currentStrategyIndex != null && this.currentStrategyIndex !== -1 && this.currentStrategyIndex !== this.lowPriorityStrategyIndex ? this.packedMessage.lockedToStrategyIndex = this.currentStrategyIndex : this.packedMessage.lockedToStrategyIndex = -1, this.packedMessage.x = this.projection.x, this.packedMessage.y = this.projection.y, this.packedMessage.enabled = this.enabled, this.packedMessage.rank = this.rank, this.currentStrategyIndex !== -1 && this.currentStrategyIndex !== this.lowPriorityStrategyIndex && this.currentStrategyIndex !== ((r = this.packedMessage.bboxes[0]) == null ? void 0 : r[4])) {
      let o = this.packedMessage.bboxes.findIndex((i) => i[4] === this.currentStrategyIndex);
      if (o !== -1) {
        let i = this.packedMessage.bboxes.splice(o, 1)[0];
        this.packedMessage.bboxes.unshift(i);
      }
    }
    if (!this.collisionDirty) return this.packedMessage;
    this.packedMessage.bboxes = [];
    for (let o = 0; o < this.strategies.length; o++) {
      let i = this.strategies[o];
      o === this.currentStrategyIndex && this.currentStrategyIndex !== -1 && this.currentStrategyIndex !== this.lowPriorityStrategyIndex ? this.packedMessage.bboxes.unshift([...i.getBoundingBox(), o]) : this.packedMessage.bboxes.push([...i.getBoundingBox(), o]);
    }
    return this.packedMessage.shouldCollideWithScreenEdges = false, this.collisionDirty = false, this.packedMessage;
  }
  destroy() {
  }
};
t(tn2, "testId", 0);
var No = tn2;
var vl = No;
c();
var Ai = 4;
var zo = K.object({ rank: K.union([K.enum(["low", "medium", "high", "always-visible"]), K.number()]).optional(), interactive: K.union([K.boolean(), K.literal("pointer-events-auto")]).optional(), id: K.string().optional(), anchor: K.union([K.enum(["top", "bottom", "left", "right", "center", "top-left", "top-right", "bottom-left", "bottom-right"]), K.array(K.enum(["top", "bottom", "left", "right", "center", "top-left", "top-right", "bottom-left", "bottom-right"]))]).optional(), dynamicResize: K.boolean().optional(), zIndex: K.number().optional() });
function Og(t20, e2, r) {
  K.array(K.number()).min(2).max(3).parse(t20), K.string().parse(e2), zo.parse(r);
}
var rn = class rn2 {
  constructor(e2, r = {}) {
    t(this, "id");
    t(this, "type", "marker");
    t(this, "rank", 0);
    t(this, "initialRank", 0);
    t(this, "activeAnchor", "center");
    t(this, "pointerEvents", "none");
    t(this, "options", { rank: "low", interactive: false, id: "", anchor: "center", dynamicResize: false, occluderId: 0, zIndex: void 0, verticalOffset: 0 });
    t(this, "projection", new at());
    t(this, "enabled", true);
    t(this, "canShow", false);
    t(this, "visible", true);
    t(this, "isOccluded", false);
    t(this, "offscreen", false);
    t(this, "strategyIndex", -1);
    t(this, "activeBoundingBox", { x: 0, y: 0, w: 0, h: 0 });
    t(this, "dimensions", { width: 0, height: 0 });
    t(this, "containerEl");
    t(this, "contentEl", null);
    t(this, "contentHtml", "");
    t(this, "style", { top: "0px", left: "0px" });
    t(this, "dirty", false);
    t(this, "parentDirty", true);
    t(this, "collisionDirty", true);
    t(this, "visibilityNeedsUpdate", "show");
    t(this, "animation", null);
    t(this, "currentStrategyIndex", -1);
    t(this, "onStrategySelected", (e3, r2 = false) => {
      var s2, l;
      if (this.currentStrategyIndex === e3 || r2) return;
      this.currentStrategyIndex = e3, this.activeAnchor = (l = (s2 = this.strategies[e3]) == null ? void 0 : s2.name) != null ? l : "center", this.containerEl.getAttribute("data-anchor") !== this.activeAnchor && this.containerEl.setAttribute("data-anchor", this.activeAnchor);
      let { width: o2, height: i } = this.dimensions, n = -i / 2 + "px", a = -o2 / 2 + "px";
      switch (this.style.top = n, this.style.left = a, this.activeAnchor) {
        case "top": {
          this.style.top = -i + "px";
          break;
        }
        case "bottom": {
          this.style.top = "0px";
          break;
        }
        case "left": {
          this.style.left = -o2 + "px";
          break;
        }
        case "right": {
          this.style.left = "0px";
          break;
        }
        case "top-left": {
          this.style.top = -i + "px", this.style.left = -o2 + "px";
          break;
        }
        case "top-right": {
          this.style.top = -i + "px", this.style.left = "0px";
          break;
        }
        case "bottom-left": {
          this.style.top = "0px", this.style.left = -o2 + "px";
          break;
        }
        case "bottom-right": {
          this.style.top = "0px", this.style.left = "0px";
          break;
        }
        default:
          this.style.top = n, this.style.left = a;
      }
      this.containerEl.style.top = this.style.top, this.containerEl.style.left = this.style.left;
    });
    t(this, "packedMessage", { x: 0, y: 0, enabled: false, rank: 0, bboxes: [], lockedToStrategyIndex: -1, shouldCollideWithScreenEdges: false });
    if (this.id = (r == null ? void 0 : r.id) || tt(), this.options = { ...this.options, ...r }, typeof r.rank == "string") this.rank = $r2(r.rank);
    else if (r.rank != null && r.rank > 0) this.rank = r.rank;
    else {
      let i = Math.trunc(e.env.NODE_ENV === "test" ? rn2.testId : rn2.testId * 10) / 10;
      rn2.testId += 1e-3, this.rank = i;
    }
    typeof r.interactive == "string" && (this.pointerEvents = r.interactive === "pointer-events-auto" ? "auto" : "none"), this.contentHtml = e2, this.initialRank = this.rank;
    let o = document.createElement("div");
    o.style.opacity = "0", o.innerHTML = '<div class="mappedin-marker">'.concat(this.contentHtml, "</div>"), this.containerEl = o.querySelector(".mappedin-marker"), this.containerEl.setAttribute("data-marker-id", this.id.toString()), this.contentEl = this.containerEl ? this.containerEl.firstElementChild : null;
  }
  updateDimensions(e2, r) {
    if (e2 != null && r != null) this.dimensions = { width: e2, height: r };
    else {
      let { width: o, height: i } = this.containerEl.getBoundingClientRect();
      this.dimensions = { width: o, height: i };
    }
    Object.assign(this.containerEl, { width: this.dimensions.width + "px", height: this.dimensions.height + "px" }), this.currentStrategyIndex = -1;
  }
  get strategies() {
    let { width: e2, height: r } = this.dimensions;
    return (Array.isArray(this.options.anchor) ? this.options.anchor : [this.options.anchor]).map((i) => ({ name: i, getBoundingBox: () => {
      let n = r / 2, a = r / 2, s2 = e2 / 2, l = e2 / 2;
      switch (i) {
        case "top": {
          n = r, a = 0;
          break;
        }
        case "bottom": {
          n = 0, a = r;
          break;
        }
        case "left": {
          s2 = e2, l = 0;
          break;
        }
        case "right": {
          s2 = 0, l = e2;
          break;
        }
        case "top-left": {
          n = r, s2 = e2, a = 0, l = 0;
          break;
        }
        case "top-right": {
          n = r, l = e2, a = 0, s2 = 0;
          break;
        }
        case "bottom-left": {
          a = r, s2 = e2, n = 0, l = 0;
          break;
        }
        case "bottom-right": {
          a = r, l = e2, n = 0, s2 = 0;
          break;
        }
      }
      return [n + Ai, a + Ai, s2 + Ai, l + Ai];
    } }));
  }
  toPackedMessage(e2 = false) {
    var r;
    if (this.packedMessage.x = this.projection.x, this.packedMessage.y = this.projection.y, this.packedMessage.enabled = this.enabled, this.packedMessage.rank = this.rank, this.packedMessage.shouldCollideWithScreenEdges = true, this.visible && e2 && this.currentStrategyIndex !== -1 && this.collisionDirty === false ? this.packedMessage.lockedToStrategyIndex = this.currentStrategyIndex : this.packedMessage.lockedToStrategyIndex = -1, this.currentStrategyIndex !== -1 && this.currentStrategyIndex !== ((r = this.packedMessage.bboxes[0]) == null ? void 0 : r[4])) {
      let o = this.packedMessage.bboxes.findIndex((i) => i[4] === this.currentStrategyIndex);
      if (o !== -1) {
        let i = this.packedMessage.bboxes.splice(o, 1)[0];
        this.packedMessage.bboxes.unshift(i);
      }
    }
    if (!this.collisionDirty) return this.packedMessage;
    this.packedMessage.bboxes = [];
    for (let o = 0; o < this.strategies.length; o++) {
      let i = this.strategies[o];
      o === this.currentStrategyIndex && this.currentStrategyIndex !== -1 ? this.packedMessage.bboxes.unshift([...i.getBoundingBox(), o]) : this.packedMessage.bboxes.push([...i.getBoundingBox(), o]);
    }
    return this.collisionDirty = false, this.packedMessage;
  }
  destroy() {
  }
};
t(rn, "testId", 0);
var yl = rn;
c();
var Er = class extends de {
  constructor() {
    super(...arguments);
    t(this, "type", "geometry");
    t(this, "userData", { entityId: "", type: "geometry" });
  }
  raycast(r, o) {
    this.userData.type === "model" && this.children[0] && r.intersectObject(this.children[0], true).forEach((i) => {
      o.push(i);
    });
  }
};
var Pt = class {
  constructor(e2, r) {
    t(this, "id", tt());
    t(this, "components");
    t(this, "entities2D", /* @__PURE__ */ new Map());
    this.components = [e2, r];
  }
  get object3d() {
    return this.components[0].mesh;
  }
  get parentObject3D() {
    var e2;
    return (e2 = this.components[0].mesh) == null ? void 0 : e2.parent;
  }
  get type() {
    return this.components[0].type;
  }
  addEntity(e2) {
    this.parentObject3D instanceof pt ? (this.parentObject3D.add(e2.object3d), e2.object3d.userData.parentEntityId = this.id) : this.entities2D.set(e2.id, e2);
  }
  removeEntity(e2) {
    var r;
    (r = e2.parentObject3D) == null || r.remove(e2.object3d), this.entities2D.delete(e2.id);
  }
  removeAllEntities() {
    for (let e2 of this.entities2D.values()) this.removeEntity(e2);
  }
};
c();
var ir = class extends de {
};
var Wt = class {
  constructor(e2, r, o = 0) {
    t(this, "id");
    t(this, "verticalOffset");
    t(this, "positionDirty", true);
    t(this, "occluderId");
    t(this, "object3d", new ir());
    t(this, "components");
    t(this, "disposed", false);
    t(this, "worldPosition", new R());
    this.id = e2.id || tt(), this.components = [e2], this.verticalOffset = o, this.object3d = new ir(), this.object3d.position.set(r.x, r.y, r.z + o), this.object3d.userData.entityId = this.id, this.object3d.userData.type = this.type;
  }
  get type() {
    return this.components[0].type;
  }
  get parentObject3D() {
    return this.object3d.parent;
  }
  get position() {
    return this.object3d.getWorldPosition(this.worldPosition), this.worldPosition;
  }
  setAltitude(e2) {
    this.object3d.position.z = e2;
  }
};
c();
c();
c();
c();
c();
function nh() {
  var t20 = /* @__PURE__ */ Object.create(null);
  function e2(i, n) {
    var a = i.id, s2 = i.name, l = i.dependencies;
    l === void 0 && (l = []);
    var u2 = i.init;
    u2 === void 0 && (u2 = function() {
    });
    var c2 = i.getTransferables;
    if (c2 === void 0 && (c2 = null), !t20[a]) try {
      l = l.map(function(d) {
        return d && d.isWorkerModule && (e2(d, function(h) {
          if (h instanceof Error) throw h;
        }), d = t20[d.id].value), d;
      }), u2 = o("<" + s2 + ">.init", u2), c2 && (c2 = o("<" + s2 + ">.getTransferables", c2));
      var f = null;
      typeof u2 == "function" ? f = u2.apply(void 0, l) : console.error("worker module init function failed to rehydrate"), t20[a] = { id: a, value: f, getTransferables: c2 }, n(f);
    } catch (d) {
      d && d.noLog || console.error(d), n(d);
    }
  }
  function r(i, n) {
    var a, s2 = i.id, l = i.args;
    (!t20[s2] || typeof t20[s2].value != "function") && n(new Error("Worker module " + s2 + ": not found or its 'init' did not return a function"));
    try {
      var u2 = (a = t20[s2]).value.apply(a, l);
      u2 && typeof u2.then == "function" ? u2.then(c2, function(f) {
        return n(f instanceof Error ? f : new Error("" + f));
      }) : c2(u2);
    } catch (f) {
      n(f);
    }
    function c2(f) {
      try {
        var d = t20[s2].getTransferables && t20[s2].getTransferables(f);
        (!d || !Array.isArray(d) || !d.length) && (d = void 0), n(f, d);
      } catch (h) {
        console.error(h), n(h);
      }
    }
  }
  function o(i, n) {
    var a = void 0;
    self.troikaDefine = function(l) {
      return a = l;
    };
    var s2 = URL.createObjectURL(new Blob(["/** " + i.replace(/\*/g, "") + " **/\n\ntroikaDefine(\n" + n + "\n)"], { type: "application/javascript" }));
    try {
      importScripts(s2);
    } catch (l) {
      console.error(l);
    }
    return URL.revokeObjectURL(s2), delete self.troikaDefine, a;
  }
  self.addEventListener("message", function(i) {
    var n = i.data, a = n.messageId, s2 = n.action, l = n.data;
    try {
      s2 === "registerModule" && e2(l, function(u2) {
        u2 instanceof Error ? postMessage({ messageId: a, success: false, error: u2.message }) : postMessage({ messageId: a, success: true, result: { isCallable: typeof u2 == "function" } });
      }), s2 === "callModule" && r(l, function(u2, c2) {
        u2 instanceof Error ? postMessage({ messageId: a, success: false, error: u2.message }) : postMessage({ messageId: a, success: true, result: u2 }, c2 || void 0);
      });
    } catch (u2) {
      postMessage({ messageId: a, success: false, error: u2.stack });
    }
  });
}
function ih(t20) {
  var e2 = function() {
    for (var r = [], o = arguments.length; o--; ) r[o] = arguments[o];
    return e2._getInitResult().then(function(i) {
      if (typeof i == "function") return i.apply(void 0, r);
      throw new Error("Worker module function was called but `init` did not return a callable function");
    });
  };
  return e2._getInitResult = function() {
    var r = t20.dependencies, o = t20.init;
    r = Array.isArray(r) ? r.map(function(n) {
      return n && (n = n.onMainThread || n, n._getInitResult && (n = n._getInitResult())), n;
    }) : [];
    var i = Promise.all(r).then(function(n) {
      return o.apply(null, n);
    });
    return e2._getInitResult = function() {
      return i;
    }, i;
  }, e2;
}
var xl = function() {
  var t20 = false;
  if (typeof window < "u" && typeof window.document < "u") try {
    var e2 = new Worker(URL.createObjectURL(new Blob([""], { type: "application/javascript" })));
    e2.terminate(), t20 = true;
  } catch (r) {
    typeof e < "u" && e.env.NODE_ENV === "test" || console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: [" + r.message + "]");
  }
  return xl = function() {
    return t20;
  }, t20;
};
var oh = 0;
var ah = 0;
var Vo = false;
var Ln = /* @__PURE__ */ Object.create(null);
var Gn = /* @__PURE__ */ Object.create(null);
var Wo = /* @__PURE__ */ Object.create(null);
function Ar(t20) {
  if ((!t20 || typeof t20.init != "function") && !Vo) throw new Error("requires `options.init` function");
  var e2 = t20.dependencies, r = t20.init, o = t20.getTransferables, i = t20.workerId, n = ih(t20);
  i == null && (i = "#default");
  var a = "workerModule" + ++oh, s2 = t20.name || a, l = null;
  e2 = e2 && e2.map(function(c2) {
    return typeof c2 == "function" && !c2.workerModuleData && (Vo = true, c2 = Ar({ workerId: i, name: "<" + s2 + "> function dependency: " + c2.name, init: "function(){return (\n" + Oi(c2) + "\n)}" }), Vo = false), c2 && c2.workerModuleData && (c2 = c2.workerModuleData), c2;
  });
  function u2() {
    for (var c2 = [], f = arguments.length; f--; ) c2[f] = arguments[f];
    if (!xl()) return n.apply(void 0, c2);
    if (!l) {
      l = bl(i, "registerModule", u2.workerModuleData);
      var d = function() {
        l = null, Gn[i].delete(d);
      };
      (Gn[i] || (Gn[i] = /* @__PURE__ */ new Set())).add(d);
    }
    return l.then(function(h) {
      var g = h.isCallable;
      if (g) return bl(i, "callModule", { id: a, args: c2 });
      throw new Error("Worker module function was called but `init` did not return a callable function");
    });
  }
  return u2.workerModuleData = { isWorkerModule: true, id: a, name: s2, dependencies: e2, init: Oi(r), getTransferables: o && Oi(o) }, u2.onMainThread = n, u2;
}
function _l(t20) {
  Gn[t20] && Gn[t20].forEach(function(e2) {
    e2();
  }), Ln[t20] && (Ln[t20].terminate(), delete Ln[t20]);
}
function Oi(t20) {
  var e2 = t20.toString();
  return !/^function/.test(e2) && /^\w+\s*\(/.test(e2) && (e2 = "function " + e2), e2;
}
function sh(t20) {
  var e2 = Ln[t20];
  if (!e2) {
    var r = Oi(nh);
    e2 = Ln[t20] = new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: " + t20.replace(/\*/g, "") + " **/\n\n;(" + r + ")()"], { type: "application/javascript" }))), e2.onmessage = function(o) {
      var i = o.data, n = i.messageId, a = Wo[n];
      if (!a) throw new Error("WorkerModule response with empty or unknown messageId");
      delete Wo[n], a(i);
    };
  }
  return e2;
}
function bl(t20, e2, r) {
  return new Promise(function(o, i) {
    var n = ++ah;
    Wo[n] = function(a) {
      a.success ? o(a.result) : i(new Error("Error in worker " + e2 + " call: " + a.error));
    }, sh(t20).postMessage({ messageId: n, action: e2, data: r });
  });
}
c();
function Ho() {
  var t20 = function(e2) {
    function r(B, G, v2, S, C, O, M2, V) {
      var R2 = 1 - M2;
      V.x = R2 * R2 * B + 2 * R2 * M2 * v2 + M2 * M2 * C, V.y = R2 * R2 * G + 2 * R2 * M2 * S + M2 * M2 * O;
    }
    function o(B, G, v2, S, C, O, M2, V, R2, N) {
      var Q = 1 - R2;
      N.x = Q * Q * Q * B + 3 * Q * Q * R2 * v2 + 3 * Q * R2 * R2 * C + R2 * R2 * R2 * M2, N.y = Q * Q * Q * G + 3 * Q * Q * R2 * S + 3 * Q * R2 * R2 * O + R2 * R2 * R2 * V;
    }
    function i(B, G) {
      for (var v2 = /([MLQCZ])([^MLQCZ]*)/g, S, C, O, M2, V; S = v2.exec(B); ) {
        var R2 = S[2].replace(/^\s*|\s*$/g, "").split(/[,\s]+/).map(function(N) {
          return parseFloat(N);
        });
        switch (S[1]) {
          case "M":
            M2 = C = R2[0], V = O = R2[1];
            break;
          case "L":
            (R2[0] !== M2 || R2[1] !== V) && G("L", M2, V, M2 = R2[0], V = R2[1]);
            break;
          case "Q": {
            G("Q", M2, V, M2 = R2[2], V = R2[3], R2[0], R2[1]);
            break;
          }
          case "C": {
            G("C", M2, V, M2 = R2[4], V = R2[5], R2[0], R2[1], R2[2], R2[3]);
            break;
          }
          case "Z":
            (M2 !== C || V !== O) && G("L", M2, V, C, O);
            break;
        }
      }
    }
    function n(B, G, v2) {
      v2 === void 0 && (v2 = 16);
      var S = { x: 0, y: 0 };
      i(B, function(C, O, M2, V, R2, N, Q, se, Y) {
        switch (C) {
          case "L":
            G(O, M2, V, R2);
            break;
          case "Q": {
            for (var W = O, Se = M2, ve2 = 1; ve2 < v2; ve2++) r(O, M2, N, Q, V, R2, ve2 / (v2 - 1), S), G(W, Se, S.x, S.y), W = S.x, Se = S.y;
            break;
          }
          case "C": {
            for (var te = O, le = M2, he = 1; he < v2; he++) o(O, M2, N, Q, se, Y, V, R2, he / (v2 - 1), S), G(te, le, S.x, S.y), te = S.x, le = S.y;
            break;
          }
        }
      });
    }
    var a = "precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}", s2 = "precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}", l = /* @__PURE__ */ new WeakMap(), u2 = { premultipliedAlpha: false, preserveDrawingBuffer: true, antialias: false, depth: false };
    function c2(B, G) {
      var v2 = B.getContext ? B.getContext("webgl", u2) : B, S = l.get(v2);
      if (!S) {
        let Q = function(te) {
          var le = O[te];
          if (!le && (le = O[te] = v2.getExtension(te), !le)) throw new Error(te + " not supported");
          return le;
        }, se = function(te, le) {
          var he = v2.createShader(le);
          return v2.shaderSource(he, te), v2.compileShader(he), he;
        }, Y = function(te, le, he, X) {
          if (!M2[te]) {
            var ue = {}, ce = {}, j = v2.createProgram();
            v2.attachShader(j, se(le, v2.VERTEX_SHADER)), v2.attachShader(j, se(he, v2.FRAGMENT_SHADER)), v2.linkProgram(j), M2[te] = { program: j, transaction: function(ie) {
              v2.useProgram(j), ie({ setUniform: function(ee, Pe2) {
                for (var de2 = [], me = arguments.length - 2; me-- > 0; ) de2[me] = arguments[me + 2];
                var be = ce[Pe2] || (ce[Pe2] = v2.getUniformLocation(j, Pe2));
                v2["uniform" + ee].apply(v2, [be].concat(de2));
              }, setAttribute: function(ee, Pe2, de2, me, be) {
                var Ce = ue[ee];
                Ce || (Ce = ue[ee] = { buf: v2.createBuffer(), loc: v2.getAttribLocation(j, ee), data: null }), v2.bindBuffer(v2.ARRAY_BUFFER, Ce.buf), v2.vertexAttribPointer(Ce.loc, Pe2, v2.FLOAT, false, 0, 0), v2.enableVertexAttribArray(Ce.loc), C ? v2.vertexAttribDivisor(Ce.loc, me) : Q("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Ce.loc, me), be !== Ce.data && (v2.bufferData(v2.ARRAY_BUFFER, be, de2), Ce.data = be);
              } });
            } };
          }
          M2[te].transaction(X);
        }, W = function(te, le) {
          R2++;
          try {
            v2.activeTexture(v2.TEXTURE0 + R2);
            var he = V[te];
            he || (he = V[te] = v2.createTexture(), v2.bindTexture(v2.TEXTURE_2D, he), v2.texParameteri(v2.TEXTURE_2D, v2.TEXTURE_MIN_FILTER, v2.NEAREST), v2.texParameteri(v2.TEXTURE_2D, v2.TEXTURE_MAG_FILTER, v2.NEAREST)), v2.bindTexture(v2.TEXTURE_2D, he), le(he, R2);
          } finally {
            R2--;
          }
        }, Se = function(te, le, he) {
          var X = v2.createFramebuffer();
          N.push(X), v2.bindFramebuffer(v2.FRAMEBUFFER, X), v2.activeTexture(v2.TEXTURE0 + le), v2.bindTexture(v2.TEXTURE_2D, te), v2.framebufferTexture2D(v2.FRAMEBUFFER, v2.COLOR_ATTACHMENT0, v2.TEXTURE_2D, te, 0);
          try {
            he(X);
          } finally {
            v2.deleteFramebuffer(X), v2.bindFramebuffer(v2.FRAMEBUFFER, N[--N.length - 1] || null);
          }
        }, ve2 = function() {
          O = {}, M2 = {}, V = {}, R2 = -1, N.length = 0;
        };
        var C = typeof WebGL2RenderingContext < "u" && v2 instanceof WebGL2RenderingContext, O = {}, M2 = {}, V = {}, R2 = -1, N = [];
        v2.canvas.addEventListener("webglcontextlost", function(te) {
          ve2(), te.preventDefault();
        }, false), l.set(v2, S = { gl: v2, isWebGL2: C, getExtension: Q, withProgram: Y, withTexture: W, withTextureFramebuffer: Se, handleContextLoss: ve2 });
      }
      G(S);
    }
    function f(B, G, v2, S, C, O, M2, V) {
      M2 === void 0 && (M2 = 15), V === void 0 && (V = null), c2(B, function(R2) {
        var N = R2.gl, Q = R2.withProgram, se = R2.withTexture;
        se("copy", function(Y, W) {
          N.texImage2D(N.TEXTURE_2D, 0, N.RGBA, C, O, 0, N.RGBA, N.UNSIGNED_BYTE, G), Q("copy", a, s2, function(Se) {
            var ve2 = Se.setUniform, te = Se.setAttribute;
            te("aUV", 2, N.STATIC_DRAW, 0, new Float32Array([0, 0, 2, 0, 0, 2])), ve2("1i", "image", W), N.bindFramebuffer(N.FRAMEBUFFER, V || null), N.disable(N.BLEND), N.colorMask(M2 & 8, M2 & 4, M2 & 2, M2 & 1), N.viewport(v2, S, C, O), N.scissor(v2, S, C, O), N.drawArrays(N.TRIANGLES, 0, 3);
          });
        });
      });
    }
    function d(B, G, v2) {
      var S = B.width, C = B.height;
      c2(B, function(O) {
        var M2 = O.gl, V = new Uint8Array(S * C * 4);
        M2.readPixels(0, 0, S, C, M2.RGBA, M2.UNSIGNED_BYTE, V), B.width = G, B.height = v2, f(M2, V, 0, 0, S, C);
      });
    }
    var h = Object.freeze({ __proto__: null, withWebGLContext: c2, renderImageData: f, resizeWebGLCanvasWithoutClearing: d });
    function g(B, G, v2, S, C, O) {
      O === void 0 && (O = 1);
      var M2 = new Uint8Array(B * G), V = S[2] - S[0], R2 = S[3] - S[1], N = [];
      n(v2, function(te, le, he, X) {
        N.push({ x1: te, y1: le, x2: he, y2: X, minX: Math.min(te, he), minY: Math.min(le, X), maxX: Math.max(te, he), maxY: Math.max(le, X) });
      }), N.sort(function(te, le) {
        return te.maxX - le.maxX;
      });
      for (var Q = 0; Q < B; Q++) for (var se = 0; se < G; se++) {
        var Y = Se(S[0] + V * (Q + 0.5) / B, S[1] + R2 * (se + 0.5) / G), W = Math.pow(1 - Math.abs(Y) / C, O) / 2;
        Y < 0 && (W = 1 - W), W = Math.max(0, Math.min(255, Math.round(W * 255))), M2[se * B + Q] = W;
      }
      return M2;
      function Se(te, le) {
        for (var he = 1 / 0, X = 1 / 0, ue = N.length; ue--; ) {
          var ce = N[ue];
          if (ce.maxX + X <= te) break;
          if (te + X > ce.minX && le - X < ce.maxY && le + X > ce.minY) {
            var j = E(te, le, ce.x1, ce.y1, ce.x2, ce.y2);
            j < he && (he = j, X = Math.sqrt(he));
          }
        }
        return ve2(te, le) && (X = -X), X;
      }
      function ve2(te, le) {
        for (var he = 0, X = N.length; X--; ) {
          var ue = N[X];
          if (ue.maxX <= te) break;
          var ce = ue.y1 > le != ue.y2 > le && te < (ue.x2 - ue.x1) * (le - ue.y1) / (ue.y2 - ue.y1) + ue.x1;
          ce && (he += ue.y1 < ue.y2 ? 1 : -1);
        }
        return he !== 0;
      }
    }
    function m(B, G, v2, S, C, O, M2, V, R2, N) {
      O === void 0 && (O = 1), V === void 0 && (V = 0), R2 === void 0 && (R2 = 0), N === void 0 && (N = 0), y(B, G, v2, S, C, O, M2, null, V, R2, N);
    }
    function y(B, G, v2, S, C, O, M2, V, R2, N, Q) {
      O === void 0 && (O = 1), R2 === void 0 && (R2 = 0), N === void 0 && (N = 0), Q === void 0 && (Q = 0);
      for (var se = g(B, G, v2, S, C, O), Y = new Uint8Array(se.length * 4), W = 0; W < se.length; W++) Y[W * 4 + Q] = se[W];
      f(M2, Y, R2, N, B, G, 1 << 3 - Q, V);
    }
    function E(B, G, v2, S, C, O) {
      var M2 = C - v2, V = O - S, R2 = M2 * M2 + V * V, N = R2 ? Math.max(0, Math.min(1, ((B - v2) * M2 + (G - S) * V) / R2)) : 0, Q = B - (v2 + N * M2), se = G - (S + N * V);
      return Q * Q + se * se;
    }
    var k = Object.freeze({ __proto__: null, generate: g, generateIntoCanvas: m, generateIntoFramebuffer: y }), b = "precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}", _ = "precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}", w2 = "precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}", P = new Float32Array([0, 0, 2, 0, 0, 2]), T = null, A = false, z = {}, U = /* @__PURE__ */ new WeakMap();
    function q2(B) {
      if (!A && !Z(B)) throw new Error("WebGL generation not supported");
    }
    function x(B, G, v2, S, C, O, M2) {
      if (O === void 0 && (O = 1), M2 === void 0 && (M2 = null), !M2 && (M2 = T, !M2)) {
        var V = typeof OffscreenCanvas == "function" ? new OffscreenCanvas(1, 1) : typeof document < "u" ? document.createElement("canvas") : null;
        if (!V) throw new Error("OffscreenCanvas or DOM canvas not supported");
        M2 = T = V.getContext("webgl", { depth: false });
      }
      q2(M2);
      var R2 = new Uint8Array(B * G * 4);
      c2(M2, function(Y) {
        var W = Y.gl, Se = Y.withTexture, ve2 = Y.withTextureFramebuffer;
        Se("readable", function(te, le) {
          W.texImage2D(W.TEXTURE_2D, 0, W.RGBA, B, G, 0, W.RGBA, W.UNSIGNED_BYTE, null), ve2(te, le, function(he) {
            D(B, G, v2, S, C, O, W, he, 0, 0, 0), W.readPixels(0, 0, B, G, W.RGBA, W.UNSIGNED_BYTE, R2);
          });
        });
      });
      for (var N = new Uint8Array(B * G), Q = 0, se = 0; Q < R2.length; Q += 4) N[se++] = R2[Q];
      return N;
    }
    function L(B, G, v2, S, C, O, M2, V, R2, N) {
      O === void 0 && (O = 1), V === void 0 && (V = 0), R2 === void 0 && (R2 = 0), N === void 0 && (N = 0), D(B, G, v2, S, C, O, M2, null, V, R2, N);
    }
    function D(B, G, v2, S, C, O, M2, V, R2, N, Q) {
      O === void 0 && (O = 1), R2 === void 0 && (R2 = 0), N === void 0 && (N = 0), Q === void 0 && (Q = 0), q2(M2);
      var se = [];
      n(v2, function(Y, W, Se, ve2) {
        se.push(Y, W, Se, ve2);
      }), se = new Float32Array(se), c2(M2, function(Y) {
        var W = Y.gl, Se = Y.isWebGL2, ve2 = Y.getExtension, te = Y.withProgram, le = Y.withTexture, he = Y.withTextureFramebuffer, X = Y.handleContextLoss;
        if (le("rawDistances", function(ue, ce) {
          (B !== ue._lastWidth || G !== ue._lastHeight) && W.texImage2D(W.TEXTURE_2D, 0, W.RGBA, ue._lastWidth = B, ue._lastHeight = G, 0, W.RGBA, W.UNSIGNED_BYTE, null), te("main", b, _, function(j) {
            var ke2 = j.setAttribute, ie = j.setUniform, pe = !Se && ve2("ANGLE_instanced_arrays"), ee = !Se && ve2("EXT_blend_minmax");
            ke2("aUV", 2, W.STATIC_DRAW, 0, P), ke2("aLineSegment", 4, W.DYNAMIC_DRAW, 1, se), ie.apply(void 0, ["4f", "uGlyphBounds"].concat(S)), ie("1f", "uMaxDistance", C), ie("1f", "uExponent", O), he(ue, ce, function(Pe2) {
              W.enable(W.BLEND), W.colorMask(true, true, true, true), W.viewport(0, 0, B, G), W.scissor(0, 0, B, G), W.blendFunc(W.ONE, W.ONE), W.blendEquationSeparate(W.FUNC_ADD, Se ? W.MAX : ee.MAX_EXT), W.clear(W.COLOR_BUFFER_BIT), Se ? W.drawArraysInstanced(W.TRIANGLES, 0, 3, se.length / 4) : pe.drawArraysInstancedANGLE(W.TRIANGLES, 0, 3, se.length / 4);
            });
          }), te("post", a, w2, function(j) {
            j.setAttribute("aUV", 2, W.STATIC_DRAW, 0, P), j.setUniform("1i", "tex", ce), W.bindFramebuffer(W.FRAMEBUFFER, V), W.disable(W.BLEND), W.colorMask(Q === 0, Q === 1, Q === 2, Q === 3), W.viewport(R2, N, B, G), W.scissor(R2, N, B, G), W.drawArrays(W.TRIANGLES, 0, 3);
          });
        }), W.isContextLost()) throw X(), new Error("webgl context lost");
      });
    }
    function Z(B) {
      var G = !B || B === T ? z : B.canvas || B, v2 = U.get(G);
      if (v2 === void 0) {
        A = true;
        var S = null;
        try {
          var C = [97, 106, 97, 61, 99, 137, 118, 80, 80, 118, 137, 99, 61, 97, 106, 97], O = x(4, 4, "M8,8L16,8L24,24L16,24Z", [0, 0, 32, 32], 24, 1, B);
          v2 = O && C.length === O.length && O.every(function(M2, V) {
            return M2 === C[V];
          }), v2 || (S = "bad trial run results", console.info(C, O));
        } catch (M2) {
          v2 = false, S = M2.message;
        }
        S && console.warn("WebGL SDF generation not supported:", S), A = false, U.set(G, v2);
      }
      return v2;
    }
    var F = Object.freeze({ __proto__: null, generate: x, generateIntoCanvas: L, generateIntoFramebuffer: D, isSupported: Z });
    function ne(B, G, v2, S, C, O) {
      C === void 0 && (C = Math.max(S[2] - S[0], S[3] - S[1]) / 2), O === void 0 && (O = 1);
      try {
        return x.apply(F, arguments);
      } catch (M2) {
        return console.info("WebGL SDF generation failed, falling back to JS", M2), g.apply(k, arguments);
      }
    }
    function oe(B, G, v2, S, C, O, M2, V, R2, N) {
      C === void 0 && (C = Math.max(S[2] - S[0], S[3] - S[1]) / 2), O === void 0 && (O = 1), V === void 0 && (V = 0), R2 === void 0 && (R2 = 0), N === void 0 && (N = 0);
      try {
        return L.apply(F, arguments);
      } catch (Q) {
        return console.info("WebGL SDF generation failed, falling back to JS", Q), m.apply(k, arguments);
      }
    }
    return e2.forEachPathCommand = i, e2.generate = ne, e2.generateIntoCanvas = oe, e2.javascript = k, e2.pathToLineSegments = n, e2.webgl = F, e2.webglUtils = h, Object.defineProperty(e2, "__esModule", { value: true }), e2;
  }({});
  return t20;
}
c();
function lh() {
  var t20 = function(e2) {
    var r = { R: "13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73", EN: "1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9", ES: "17,2,6dp+1,f+1,av,16vr,mx+1,4o,2", ET: "z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj", AN: "16o+5,2j+9,2+1,35,ed,1ff2+9,87+u", CS: "18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b", B: "a,3,f+2,2v,690", S: "9,2,k", WS: "c,k,4f4,1vk+a,u,1j,335", ON: "x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i", BN: "0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1", NSM: "lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n", AL: "16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d", LRO: "6ct", RLO: "6cu", LRE: "6cq", RLE: "6cr", PDF: "6cs", LRI: "6ee", RLI: "6ef", FSI: "6eg", PDI: "6eh" }, o = {}, i = {};
    o.L = 1, i[1] = "L", Object.keys(r).forEach(function(X, ue) {
      o[X] = 1 << ue + 1, i[o[X]] = X;
    }), Object.freeze(o);
    var n = o.LRI | o.RLI | o.FSI, a = o.L | o.R | o.AL, s2 = o.B | o.S | o.WS | o.ON | o.FSI | o.LRI | o.RLI | o.PDI, l = o.BN | o.RLE | o.LRE | o.RLO | o.LRO | o.PDF, u2 = o.S | o.WS | o.B | n | o.PDI | l, c2 = null;
    function f() {
      if (!c2) {
        c2 = /* @__PURE__ */ new Map();
        var X = function(ce) {
          if (r.hasOwnProperty(ce)) {
            var j = 0;
            r[ce].split(",").forEach(function(ke2) {
              var ie = ke2.split("+"), pe = ie[0], ee = ie[1];
              pe = parseInt(pe, 36), ee = ee ? parseInt(ee, 36) : 0, c2.set(j += pe, o[ce]);
              for (var Pe2 = 0; Pe2 < ee; Pe2++) c2.set(++j, o[ce]);
            });
          }
        };
        for (var ue in r) X(ue);
      }
    }
    function d(X) {
      return f(), c2.get(X.codePointAt(0)) || o.L;
    }
    function h(X) {
      return i[d(X)];
    }
    var g = { pairs: "14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1", canonical: "6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye" };
    function m(X, ue) {
      var ce = 36, j = 0, ke2 = /* @__PURE__ */ new Map(), ie = ue && /* @__PURE__ */ new Map(), pe;
      return X.split(",").forEach(function ee(Pe2) {
        if (Pe2.indexOf("+") !== -1) for (var de2 = +Pe2; de2--; ) ee(pe);
        else {
          pe = Pe2;
          var me = Pe2.split(">"), be = me[0], Ce = me[1];
          be = String.fromCodePoint(j += parseInt(be, ce)), Ce = String.fromCodePoint(j += parseInt(Ce, ce)), ke2.set(be, Ce), ue && ie.set(Ce, be);
        }
      }), { map: ke2, reverseMap: ie };
    }
    var y, E, k;
    function b() {
      if (!y) {
        var X = m(g.pairs, true), ue = X.map, ce = X.reverseMap;
        y = ue, E = ce, k = m(g.canonical, false).map;
      }
    }
    function _(X) {
      return b(), y.get(X) || null;
    }
    function w2(X) {
      return b(), E.get(X) || null;
    }
    function P(X) {
      return b(), k.get(X) || null;
    }
    var T = o.L, A = o.R, z = o.EN, U = o.ES, q2 = o.ET, x = o.AN, L = o.CS, D = o.B, Z = o.S, F = o.ON, ne = o.BN, oe = o.NSM, B = o.AL, G = o.LRO, v2 = o.RLO, S = o.LRE, C = o.RLE, O = o.PDF, M2 = o.LRI, V = o.RLI, R2 = o.FSI, N = o.PDI;
    function Q(X, ue) {
      for (var ce = 125, j = new Uint32Array(X.length), ke2 = 0; ke2 < X.length; ke2++) j[ke2] = d(X[ke2]);
      var ie = /* @__PURE__ */ new Map();
      function pe(ot, xt) {
        var at2 = j[ot];
        j[ot] = xt, ie.set(at2, ie.get(at2) - 1), at2 & s2 && ie.set(s2, ie.get(s2) - 1), ie.set(xt, (ie.get(xt) || 0) + 1), xt & s2 && ie.set(s2, (ie.get(s2) || 0) + 1);
      }
      for (var ee = new Uint8Array(X.length), Pe2 = /* @__PURE__ */ new Map(), de2 = [], me = null, be = 0; be < X.length; be++) me || de2.push(me = { start: be, end: X.length - 1, level: ue === "rtl" ? 1 : ue === "ltr" ? 0 : Pa(be, false) }), j[be] & D && (me.end = be, me = null);
      for (var Ce = C | S | v2 | G | n | N | O | D, Ge = function(ot) {
        return ot + (ot & 1 ? 1 : 2);
      }, Ze = function(ot) {
        return ot + (ot & 1 ? 2 : 1);
      }, Ee = 0; Ee < de2.length; Ee++) {
        me = de2[Ee];
        var Ae2 = [{ _level: me.level, _override: 0, _isolate: 0 }], ye = void 0, Ne = 0, ze2 = 0, it = 0;
        ie.clear();
        for (var Fe2 = me.start; Fe2 <= me.end; Fe2++) {
          var Te2 = j[Fe2];
          if (ye = Ae2[Ae2.length - 1], ie.set(Te2, (ie.get(Te2) || 0) + 1), Te2 & s2 && ie.set(s2, (ie.get(s2) || 0) + 1), Te2 & Ce) if (Te2 & (C | S)) {
            ee[Fe2] = ye._level;
            var Re = (Te2 === C ? Ze : Ge)(ye._level);
            Re <= ce && !Ne && !ze2 ? Ae2.push({ _level: Re, _override: 0, _isolate: 0 }) : Ne || ze2++;
          } else if (Te2 & (v2 | G)) {
            ee[Fe2] = ye._level;
            var Ht = (Te2 === v2 ? Ze : Ge)(ye._level);
            Ht <= ce && !Ne && !ze2 ? Ae2.push({ _level: Ht, _override: Te2 & v2 ? A : T, _isolate: 0 }) : Ne || ze2++;
          } else if (Te2 & n) {
            Te2 & R2 && (Te2 = Pa(Fe2 + 1, true) === 1 ? V : M2), ee[Fe2] = ye._level, ye._override && pe(Fe2, ye._override);
            var Ue = (Te2 === V ? Ze : Ge)(ye._level);
            Ue <= ce && Ne === 0 && ze2 === 0 ? (it++, Ae2.push({ _level: Ue, _override: 0, _isolate: 1, _isolInitIndex: Fe2 })) : Ne++;
          } else if (Te2 & N) {
            if (Ne > 0) Ne--;
            else if (it > 0) {
              for (ze2 = 0; !Ae2[Ae2.length - 1]._isolate; ) Ae2.pop();
              var Oe = Ae2[Ae2.length - 1]._isolInitIndex;
              Oe != null && (Pe2.set(Oe, Fe2), Pe2.set(Fe2, Oe)), Ae2.pop(), it--;
            }
            ye = Ae2[Ae2.length - 1], ee[Fe2] = ye._level, ye._override && pe(Fe2, ye._override);
          } else Te2 & O ? (Ne === 0 && (ze2 > 0 ? ze2-- : !ye._isolate && Ae2.length > 1 && (Ae2.pop(), ye = Ae2[Ae2.length - 1])), ee[Fe2] = ye._level) : Te2 & D && (ee[Fe2] = me.level);
          else ee[Fe2] = ye._level, ye._override && Te2 !== ne && pe(Fe2, ye._override);
        }
        for (var Ye2 = [], Ve = null, De = me.start; De <= me.end; De++) {
          var We = j[De];
          if (!(We & l)) {
            var $e = ee[De], qe = We & n, Xe = We === N;
            Ve && $e === Ve._level ? (Ve._end = De, Ve._endsWithIsolInit = qe) : Ye2.push(Ve = { _start: De, _end: De, _level: $e, _startsWithPDI: Xe, _endsWithIsolInit: qe });
          }
        }
        for (var yt = [], Zt = 0; Zt < Ye2.length; Zt++) {
          var Rt = Ye2[Zt];
          if (!Rt._startsWithPDI || Rt._startsWithPDI && !Pe2.has(Rt._start)) {
            for (var Yt = [Ve = Rt], or = void 0; Ve && Ve._endsWithIsolInit && (or = Pe2.get(Ve._end)) != null; ) for (var Ut = Zt + 1; Ut < Ye2.length; Ut++) if (Ye2[Ut]._start === or) {
              Yt.push(Ve = Ye2[Ut]);
              break;
            }
            for (var et = [], ar = 0; ar < Yt.length; ar++) for (var ha = Yt[ar], Vi = ha._start; Vi <= ha._end; Vi++) et.push(Vi);
            for (var hu = ee[et[0]], pa = me.level, Hn = et[0] - 1; Hn >= 0; Hn--) if (!(j[Hn] & l)) {
              pa = ee[Hn];
              break;
            }
            var Wi = et[et.length - 1], pu = ee[Wi], ma = me.level;
            if (!(j[Wi] & n)) {
              for (var Zn = Wi + 1; Zn <= me.end; Zn++) if (!(j[Zn] & l)) {
                ma = ee[Zn];
                break;
              }
            }
            yt.push({ _seqIndices: et, _sosType: Math.max(pa, hu) % 2 ? A : T, _eosType: Math.max(ma, pu) % 2 ? A : T });
          }
        }
        for (var Hi = 0; Hi < yt.length; Hi++) {
          var Zi = yt[Hi], ge = Zi._seqIndices, un = Zi._sosType, mu = Zi._eosType, Rr = ee[ge[0]] & 1 ? A : T;
          if (ie.get(oe)) for (var Yn = 0; Yn < ge.length; Yn++) {
            var ga = ge[Yn];
            if (j[ga] & oe) {
              for (var Yi = un, Xn = Yn - 1; Xn >= 0; Xn--) if (!(j[ge[Xn]] & l)) {
                Yi = j[ge[Xn]];
                break;
              }
              pe(ga, Yi & (n | N) ? F : Yi);
            }
          }
          if (ie.get(z)) for (var Kn = 0; Kn < ge.length; Kn++) {
            var va = ge[Kn];
            if (j[va] & z) for (var Jn = Kn - 1; Jn >= -1; Jn--) {
              var ya = Jn === -1 ? un : j[ge[Jn]];
              if (ya & a) {
                ya === B && pe(va, x);
                break;
              }
            }
          }
          if (ie.get(B)) for (var Xi = 0; Xi < ge.length; Xi++) {
            var ba = ge[Xi];
            j[ba] & B && pe(ba, A);
          }
          if (ie.get(U) || ie.get(L)) for (var cn = 1; cn < ge.length - 1; cn++) {
            var Ki = ge[cn];
            if (j[Ki] & (U | L)) {
              for (var Ur = 0, Ji = 0, qi = cn - 1; qi >= 0 && (Ur = j[ge[qi]], !!(Ur & l)); qi--) ;
              for (var Qi = cn + 1; Qi < ge.length && (Ji = j[ge[Qi]], !!(Ji & l)); Qi++) ;
              Ur === Ji && (j[Ki] === U ? Ur === z : Ur & (z | x)) && pe(Ki, Ur);
            }
          }
          if (ie.get(z)) for (var Ct = 0; Ct < ge.length; Ct++) {
            var gu = ge[Ct];
            if (j[gu] & z) {
              for (var qn = Ct - 1; qn >= 0 && j[ge[qn]] & (q2 | l); qn--) pe(ge[qn], z);
              for (Ct++; Ct < ge.length && j[ge[Ct]] & (q2 | l | z); Ct++) j[ge[Ct]] !== z && pe(ge[Ct], z);
            }
          }
          if (ie.get(q2) || ie.get(U) || ie.get(L)) for (var fn = 0; fn < ge.length; fn++) {
            var xa = ge[fn];
            if (j[xa] & (q2 | U | L)) {
              pe(xa, F);
              for (var Qn = fn - 1; Qn >= 0 && j[ge[Qn]] & l; Qn--) pe(ge[Qn], F);
              for (var $n = fn + 1; $n < ge.length && j[ge[$n]] & l; $n++) pe(ge[$n], F);
            }
          }
          if (ie.get(z)) for (var $i = 0, _a = un; $i < ge.length; $i++) {
            var Ta = ge[$i], eo = j[Ta];
            eo & z ? _a === T && pe(Ta, T) : eo & a && (_a = eo);
          }
          if (ie.get(s2)) {
            var dn = A | z | x, Sa = dn | T, ei = [];
            {
              for (var Lr = [], Gr = 0; Gr < ge.length; Gr++) if (j[ge[Gr]] & s2) {
                var hn = X[ge[Gr]], ka = void 0;
                if (_(hn) !== null) if (Lr.length < 63) Lr.push({ char: hn, seqIndex: Gr });
                else break;
                else if ((ka = w2(hn)) !== null) for (var pn = Lr.length - 1; pn >= 0; pn--) {
                  var to = Lr[pn].char;
                  if (to === ka || to === w2(P(hn)) || _(P(to)) === hn) {
                    ei.push([Lr[pn].seqIndex, Gr]), Lr.length = pn;
                    break;
                  }
                }
              }
              ei.sort(function(ot, xt) {
                return ot[0] - xt[0];
              });
            }
            for (var ro = 0; ro < ei.length; ro++) {
              for (var wa = ei[ro], ti = wa[0], no = wa[1], Ma = false, bt = 0, io = ti + 1; io < no; io++) {
                var Ca = ge[io];
                if (j[Ca] & Sa) {
                  Ma = true;
                  var Da = j[Ca] & dn ? A : T;
                  if (Da === Rr) {
                    bt = Da;
                    break;
                  }
                }
              }
              if (Ma && !bt) {
                bt = un;
                for (var oo = ti - 1; oo >= 0; oo--) {
                  var Ea = ge[oo];
                  if (j[Ea] & Sa) {
                    var Aa = j[Ea] & dn ? A : T;
                    Aa !== Rr ? bt = Aa : bt = Rr;
                    break;
                  }
                }
              }
              if (bt) {
                if (j[ge[ti]] = j[ge[no]] = bt, bt !== Rr) {
                  for (var mn = ti + 1; mn < ge.length; mn++) if (!(j[ge[mn]] & l)) {
                    d(X[ge[mn]]) & oe && (j[ge[mn]] = bt);
                    break;
                  }
                }
                if (bt !== Rr) {
                  for (var gn = no + 1; gn < ge.length; gn++) if (!(j[ge[gn]] & l)) {
                    d(X[ge[gn]]) & oe && (j[ge[gn]] = bt);
                    break;
                  }
                }
              }
            }
            for (var Xt = 0; Xt < ge.length; Xt++) if (j[ge[Xt]] & s2) {
              for (var Oa = Xt, ao = Xt, so = un, vn = Xt - 1; vn >= 0; vn--) if (j[ge[vn]] & l) Oa = vn;
              else {
                so = j[ge[vn]] & dn ? A : T;
                break;
              }
              for (var Ia = mu, yn = Xt + 1; yn < ge.length; yn++) if (j[ge[yn]] & (s2 | l)) ao = yn;
              else {
                Ia = j[ge[yn]] & dn ? A : T;
                break;
              }
              for (var lo = Oa; lo <= ao; lo++) j[ge[lo]] = so === Ia ? so : Rr;
              Xt = ao;
            }
          }
        }
        for (var ut = me.start; ut <= me.end; ut++) {
          var vu = ee[ut], ri = j[ut];
          if (vu & 1 ? ri & (T | z | x) && ee[ut]++ : ri & A ? ee[ut]++ : ri & (x | z) && (ee[ut] += 2), ri & l && (ee[ut] = ut === 0 ? me.level : ee[ut - 1]), ut === me.end || d(X[ut]) & (Z | D)) for (var ni2 = ut; ni2 >= 0 && d(X[ni2]) & u2; ni2--) ee[ni2] = me.level;
        }
      }
      return { levels: ee, paragraphs: de2 };
      function Pa(ot, xt) {
        for (var at2 = ot; at2 < X.length; at2++) {
          var Kt = j[at2];
          if (Kt & (A | B)) return 1;
          if (Kt & (D | T) || xt && Kt === N) return 0;
          if (Kt & n) {
            var Ra = yu(at2);
            at2 = Ra === -1 ? X.length : Ra;
          }
        }
        return 0;
      }
      function yu(ot) {
        for (var xt = 1, at2 = ot + 1; at2 < X.length; at2++) {
          var Kt = j[at2];
          if (Kt & D) break;
          if (Kt & N) {
            if (--xt === 0) return at2;
          } else Kt & n && xt++;
        }
        return -1;
      }
    }
    var se = "14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1", Y;
    function W() {
      if (!Y) {
        var X = m(se, true), ue = X.map, ce = X.reverseMap;
        ce.forEach(function(j, ke2) {
          ue.set(ke2, j);
        }), Y = ue;
      }
    }
    function Se(X) {
      return W(), Y.get(X) || null;
    }
    function ve2(X, ue, ce, j) {
      var ke2 = X.length;
      ce = Math.max(0, ce == null ? 0 : +ce), j = Math.min(ke2 - 1, j == null ? ke2 - 1 : +j);
      for (var ie = /* @__PURE__ */ new Map(), pe = ce; pe <= j; pe++) if (ue[pe] & 1) {
        var ee = Se(X[pe]);
        ee !== null && ie.set(pe, ee);
      }
      return ie;
    }
    function te(X, ue, ce, j) {
      var ke2 = X.length;
      ce = Math.max(0, ce == null ? 0 : +ce), j = Math.min(ke2 - 1, j == null ? ke2 - 1 : +j);
      var ie = [];
      return ue.paragraphs.forEach(function(pe) {
        var ee = Math.max(ce, pe.start), Pe2 = Math.min(j, pe.end);
        if (ee < Pe2) {
          for (var de2 = ue.levels.slice(ee, Pe2 + 1), me = Pe2; me >= ee && d(X[me]) & u2; me--) de2[me] = pe.level;
          for (var be = pe.level, Ce = 1 / 0, Ge = 0; Ge < de2.length; Ge++) {
            var Ze = de2[Ge];
            Ze > be && (be = Ze), Ze < Ce && (Ce = Ze | 1);
          }
          for (var Ee = be; Ee >= Ce; Ee--) for (var Ae2 = 0; Ae2 < de2.length; Ae2++) if (de2[Ae2] >= Ee) {
            for (var ye = Ae2; Ae2 + 1 < de2.length && de2[Ae2 + 1] >= Ee; ) Ae2++;
            Ae2 > ye && ie.push([ye + ee, Ae2 + ee]);
          }
        }
      }), ie;
    }
    function le(X, ue, ce, j) {
      var ke2 = he(X, ue, ce, j), ie = [].concat(X);
      return ke2.forEach(function(pe, ee) {
        ie[ee] = (ue.levels[pe] & 1 ? Se(X[pe]) : null) || X[pe];
      }), ie.join("");
    }
    function he(X, ue, ce, j) {
      for (var ke2 = te(X, ue, ce, j), ie = [], pe = 0; pe < X.length; pe++) ie[pe] = pe;
      return ke2.forEach(function(ee) {
        for (var Pe2 = ee[0], de2 = ee[1], me = ie.slice(Pe2, de2 + 1), be = me.length; be--; ) ie[de2 - be] = me[be];
      }), ie;
    }
    return e2.closingToOpeningBracket = w2, e2.getBidiCharType = d, e2.getBidiCharTypeName = h, e2.getCanonicalBracket = P, e2.getEmbeddingLevels = Q, e2.getMirroredCharacter = Se, e2.getMirroredCharactersMap = ve2, e2.getReorderSegments = te, e2.getReorderedIndices = he, e2.getReorderedString = le, e2.openingToClosingBracket = _, Object.defineProperty(e2, "__esModule", { value: true }), e2;
  }({});
  return t20;
}
var Tl = lh;
c();
var Yo = /\bvoid\s+main\s*\(\s*\)\s*{/g;
function Zo(t20) {
  let e2 = /^[ \t]*#include +<([\w\d./]+)>/gm;
  function r(o, i) {
    let n = Vt[i];
    return n ? Zo(n) : o;
  }
  return t20.replace(e2, r);
}
var Je = [];
for (let t20 = 0; t20 < 256; t20++) Je[t20] = (t20 < 16 ? "0" : "") + t20.toString(16);
function uh() {
  let t20 = Math.random() * 4294967295 | 0, e2 = Math.random() * 4294967295 | 0, r = Math.random() * 4294967295 | 0, o = Math.random() * 4294967295 | 0;
  return (Je[t20 & 255] + Je[t20 >> 8 & 255] + Je[t20 >> 16 & 255] + Je[t20 >> 24 & 255] + "-" + Je[e2 & 255] + Je[e2 >> 8 & 255] + "-" + Je[e2 >> 16 & 15 | 64] + Je[e2 >> 24 & 255] + "-" + Je[r & 63 | 128] + Je[r >> 8 & 255] + "-" + Je[r >> 16 & 255] + Je[r >> 24 & 255] + Je[o & 255] + Je[o >> 8 & 255] + Je[o >> 16 & 255] + Je[o >> 24 & 255]).toUpperCase();
}
var Or = Object.assign || function() {
  let t20 = arguments[0];
  for (let e2 = 1, r = arguments.length; e2 < r; e2++) {
    let o = arguments[e2];
    if (o) for (let i in o) Object.prototype.hasOwnProperty.call(o, i) && (t20[i] = o[i]);
  }
  return t20;
};
var ch = Date.now();
var Sl = /* @__PURE__ */ new WeakMap();
var kl = /* @__PURE__ */ new Map();
var fh = 1e10;
function nn(t20, e2) {
  let r = mh(e2), o = Sl.get(t20);
  if (o || Sl.set(t20, o = /* @__PURE__ */ Object.create(null)), o[r]) return new o[r]();
  let i = "_onBeforeCompile".concat(r), n = function(u2, c2) {
    t20.onBeforeCompile.call(this, u2, c2);
    let f = this.customProgramCacheKey() + "|" + u2.vertexShader + "|" + u2.fragmentShader, d = kl[f];
    if (!d) {
      let h = dh(this, u2, e2, r);
      d = kl[f] = h;
    }
    u2.vertexShader = d.vertexShader, u2.fragmentShader = d.fragmentShader, Or(u2.uniforms, this.uniforms), e2.timeUniform && (u2.uniforms[e2.timeUniform] = { get value() {
      return Date.now() - ch;
    } }), this[i] && this[i](u2);
  }, a = function() {
    return s2(e2.chained ? t20 : t20.clone());
  }, s2 = function(u2) {
    let c2 = Object.create(u2, l);
    return Object.defineProperty(c2, "baseMaterial", { value: t20 }), Object.defineProperty(c2, "id", { value: fh++ }), c2.uuid = uh(), c2.uniforms = Or({}, u2.uniforms, e2.uniforms), c2.defines = Or({}, u2.defines, e2.defines), c2.defines["TROIKA_DERIVED_MATERIAL_".concat(r)] = "", c2.extensions = Or({}, u2.extensions, e2.extensions), c2._listeners = void 0, c2;
  }, l = { constructor: { value: a }, isDerivedMaterial: { value: true }, type: { get: () => t20.type, set: (u2) => {
    t20.type = u2;
  } }, isDerivedFrom: { writable: true, configurable: true, value: function(u2) {
    let c2 = this.baseMaterial;
    return u2 === c2 || c2.isDerivedMaterial && c2.isDerivedFrom(u2) || false;
  } }, customProgramCacheKey: { writable: true, configurable: true, value: function() {
    return t20.customProgramCacheKey() + "|" + r;
  } }, onBeforeCompile: { get() {
    return n;
  }, set(u2) {
    this[i] = u2;
  } }, copy: { writable: true, configurable: true, value: function(u2) {
    return t20.copy.call(this, u2), !t20.isShaderMaterial && !t20.isDerivedMaterial && (Or(this.extensions, u2.extensions), Or(this.defines, u2.defines), Or(this.uniforms, au.clone(u2.uniforms))), this;
  } }, clone: { writable: true, configurable: true, value: function() {
    let u2 = new t20.constructor();
    return s2(u2).copy(this);
  } }, getDepthMaterial: { writable: true, configurable: true, value: function() {
    let u2 = this._depthMaterial;
    return u2 || (u2 = this._depthMaterial = nn(t20.isDerivedMaterial ? t20.getDepthMaterial() : new $r({ depthPacking: qh }), e2), u2.defines.IS_DEPTH_MATERIAL = "", u2.uniforms = this.uniforms), u2;
  } }, getDistanceMaterial: { writable: true, configurable: true, value: function() {
    let u2 = this._distanceMaterial;
    return u2 || (u2 = this._distanceMaterial = nn(t20.isDerivedMaterial ? t20.getDistanceMaterial() : new Kr(), e2), u2.defines.IS_DISTANCE_MATERIAL = "", u2.uniforms = this.uniforms), u2;
  } }, dispose: { writable: true, configurable: true, value() {
    let { _depthMaterial: u2, _distanceMaterial: c2 } = this;
    u2 && u2.dispose(), c2 && c2.dispose(), t20.dispose.call(this);
  } } };
  return o[r] = a, new a();
}
function dh(t20, { vertexShader: e2, fragmentShader: r }, o, i) {
  let { vertexDefs: n, vertexMainIntro: a, vertexMainOutro: s2, vertexTransform: l, fragmentDefs: u2, fragmentMainIntro: c2, fragmentMainOutro: f, fragmentColorTransform: d, customRewriter: h, timeUniform: g } = o;
  if (n = n || "", a = a || "", s2 = s2 || "", u2 = u2 || "", c2 = c2 || "", f = f || "", (l || h) && (e2 = Zo(e2)), (d || h) && (r = r.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm, "\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"), r = Zo(r)), h) {
    let m = h({ vertexShader: e2, fragmentShader: r });
    e2 = m.vertexShader, r = m.fragmentShader;
  }
  if (d) {
    let m = [];
    r = r.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm, (y) => (m.push(y), "")), f = "".concat(d, "\n").concat(m.join("\n"), "\n").concat(f);
  }
  if (g) {
    let m = "\nuniform float ".concat(g, ";\n");
    n = m + n, u2 = m + u2;
  }
  return l && (e2 = "vec3 troika_position_".concat(i, ";\nvec3 troika_normal_").concat(i, ";\nvec2 troika_uv_").concat(i, ";\n").concat(e2, "\n"), n = "".concat(n, "\nvoid troikaVertexTransform").concat(i, "(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ").concat(l, "\n}\n"), a = "\ntroika_position_".concat(i, " = vec3(position);\ntroika_normal_").concat(i, " = vec3(normal);\ntroika_uv_").concat(i, " = vec2(uv);\ntroikaVertexTransform").concat(i, "(troika_position_").concat(i, ", troika_normal_").concat(i, ", troika_uv_").concat(i, ");\n").concat(a, "\n"), e2 = e2.replace(/\b(position|normal|uv)\b/g, (m, y, E, k) => /\battribute\s+vec[23]\s+$/.test(k.substr(0, E)) ? y : "troika_".concat(y, "_").concat(i)), t20.map && t20.map.channel > 0 || (e2 = e2.replace(/\bMAP_UV\b/g, "troika_uv_".concat(i)))), e2 = wl2(e2, i, n, a, s2), r = wl2(r, i, u2, c2, f), { vertexShader: e2, fragmentShader: r };
}
function wl2(t20, e2, r, o, i) {
  return (o || i || r) && (t20 = t20.replace(Yo, "\n".concat(r, "\nvoid troikaOrigMain").concat(e2, "() {")), t20 += "\nvoid main() {\n  ".concat(o, "\n  troikaOrigMain").concat(e2, "();\n  ").concat(i, "\n}")), t20;
}
function hh(t20, e2) {
  return t20 === "uniforms" ? void 0 : typeof e2 == "function" ? e2.toString() : e2;
}
var ph = 0;
var Ml2 = /* @__PURE__ */ new Map();
function mh(t20) {
  let e2 = JSON.stringify(t20, hh), r = Ml2.get(e2);
  return r == null && Ml2.set(e2, r = ++ph), r;
}
function gh() {
  return typeof window > "u" && (self.window = self), function(t20) {
    var e2 = { parse: function(i) {
      var n = e2._bin, a = new Uint8Array(i);
      if (n.readASCII(a, 0, 4) == "ttcf") {
        var s2 = 4;
        n.readUshort(a, s2), s2 += 2, n.readUshort(a, s2), s2 += 2;
        var l = n.readUint(a, s2);
        s2 += 4;
        for (var u2 = [], c2 = 0; c2 < l; c2++) {
          var f = n.readUint(a, s2);
          s2 += 4, u2.push(e2._readFont(a, f));
        }
        return u2;
      }
      return [e2._readFont(a, 0)];
    }, _readFont: function(i, n) {
      var a = e2._bin, s2 = n;
      a.readFixed(i, n), n += 4;
      var l = a.readUshort(i, n);
      n += 2, a.readUshort(i, n), n += 2, a.readUshort(i, n), n += 2, a.readUshort(i, n), n += 2;
      for (var u2 = ["cmap", "head", "hhea", "maxp", "hmtx", "name", "OS/2", "post", "loca", "glyf", "kern", "CFF ", "GDEF", "GPOS", "GSUB", "SVG "], c2 = { _data: i, _offset: s2 }, f = {}, d = 0; d < l; d++) {
        var h = a.readASCII(i, n, 4);
        n += 4, a.readUint(i, n), n += 4;
        var g = a.readUint(i, n);
        n += 4;
        var m = a.readUint(i, n);
        n += 4, f[h] = { offset: g, length: m };
      }
      for (d = 0; d < u2.length; d++) {
        var y = u2[d];
        f[y] && (c2[y.trim()] = e2[y.trim()].parse(i, f[y].offset, f[y].length, c2));
      }
      return c2;
    }, _tabOffset: function(i, n, a) {
      for (var s2 = e2._bin, l = s2.readUshort(i, a + 4), u2 = a + 12, c2 = 0; c2 < l; c2++) {
        var f = s2.readASCII(i, u2, 4);
        u2 += 4, s2.readUint(i, u2), u2 += 4;
        var d = s2.readUint(i, u2);
        if (u2 += 4, s2.readUint(i, u2), u2 += 4, f == n) return d;
      }
      return 0;
    } };
    e2._bin = { readFixed: function(i, n) {
      return (i[n] << 8 | i[n + 1]) + (i[n + 2] << 8 | i[n + 3]) / 65540;
    }, readF2dot14: function(i, n) {
      return e2._bin.readShort(i, n) / 16384;
    }, readInt: function(i, n) {
      return e2._bin._view(i).getInt32(n);
    }, readInt8: function(i, n) {
      return e2._bin._view(i).getInt8(n);
    }, readShort: function(i, n) {
      return e2._bin._view(i).getInt16(n);
    }, readUshort: function(i, n) {
      return e2._bin._view(i).getUint16(n);
    }, readUshorts: function(i, n, a) {
      for (var s2 = [], l = 0; l < a; l++) s2.push(e2._bin.readUshort(i, n + 2 * l));
      return s2;
    }, readUint: function(i, n) {
      return e2._bin._view(i).getUint32(n);
    }, readUint64: function(i, n) {
      return 4294967296 * e2._bin.readUint(i, n) + e2._bin.readUint(i, n + 4);
    }, readASCII: function(i, n, a) {
      for (var s2 = "", l = 0; l < a; l++) s2 += String.fromCharCode(i[n + l]);
      return s2;
    }, readUnicode: function(i, n, a) {
      for (var s2 = "", l = 0; l < a; l++) {
        var u2 = i[n++] << 8 | i[n++];
        s2 += String.fromCharCode(u2);
      }
      return s2;
    }, _tdec: typeof window < "u" && window.TextDecoder ? new window.TextDecoder() : null, readUTF8: function(i, n, a) {
      var s2 = e2._bin._tdec;
      return s2 && n == 0 && a == i.length ? s2.decode(i) : e2._bin.readASCII(i, n, a);
    }, readBytes: function(i, n, a) {
      for (var s2 = [], l = 0; l < a; l++) s2.push(i[n + l]);
      return s2;
    }, readASCIIArray: function(i, n, a) {
      for (var s2 = [], l = 0; l < a; l++) s2.push(String.fromCharCode(i[n + l]));
      return s2;
    }, _view: function(i) {
      return i._dataView || (i._dataView = i.buffer ? new DataView(i.buffer, i.byteOffset, i.byteLength) : new DataView(new Uint8Array(i).buffer));
    } }, e2._lctf = {}, e2._lctf.parse = function(i, n, a, s2, l) {
      var u2 = e2._bin, c2 = {}, f = n;
      u2.readFixed(i, n), n += 4;
      var d = u2.readUshort(i, n);
      n += 2;
      var h = u2.readUshort(i, n);
      n += 2;
      var g = u2.readUshort(i, n);
      return n += 2, c2.scriptList = e2._lctf.readScriptList(i, f + d), c2.featureList = e2._lctf.readFeatureList(i, f + h), c2.lookupList = e2._lctf.readLookupList(i, f + g, l), c2;
    }, e2._lctf.readLookupList = function(i, n, a) {
      var s2 = e2._bin, l = n, u2 = [], c2 = s2.readUshort(i, n);
      n += 2;
      for (var f = 0; f < c2; f++) {
        var d = s2.readUshort(i, n);
        n += 2;
        var h = e2._lctf.readLookupTable(i, l + d, a);
        u2.push(h);
      }
      return u2;
    }, e2._lctf.readLookupTable = function(i, n, a) {
      var s2 = e2._bin, l = n, u2 = { tabs: [] };
      u2.ltype = s2.readUshort(i, n), n += 2, u2.flag = s2.readUshort(i, n), n += 2;
      var c2 = s2.readUshort(i, n);
      n += 2;
      for (var f = u2.ltype, d = 0; d < c2; d++) {
        var h = s2.readUshort(i, n);
        n += 2;
        var g = a(i, f, l + h, u2);
        u2.tabs.push(g);
      }
      return u2;
    }, e2._lctf.numOfOnes = function(i) {
      for (var n = 0, a = 0; a < 32; a++) (i >>> a & 1) != 0 && n++;
      return n;
    }, e2._lctf.readClassDef = function(i, n) {
      var a = e2._bin, s2 = [], l = a.readUshort(i, n);
      if (n += 2, l == 1) {
        var u2 = a.readUshort(i, n);
        n += 2;
        var c2 = a.readUshort(i, n);
        n += 2;
        for (var f = 0; f < c2; f++) s2.push(u2 + f), s2.push(u2 + f), s2.push(a.readUshort(i, n)), n += 2;
      }
      if (l == 2) {
        var d = a.readUshort(i, n);
        for (n += 2, f = 0; f < d; f++) s2.push(a.readUshort(i, n)), n += 2, s2.push(a.readUshort(i, n)), n += 2, s2.push(a.readUshort(i, n)), n += 2;
      }
      return s2;
    }, e2._lctf.getInterval = function(i, n) {
      for (var a = 0; a < i.length; a += 3) {
        var s2 = i[a], l = i[a + 1];
        if (i[a + 2], s2 <= n && n <= l) return a;
      }
      return -1;
    }, e2._lctf.readCoverage = function(i, n) {
      var a = e2._bin, s2 = {};
      s2.fmt = a.readUshort(i, n), n += 2;
      var l = a.readUshort(i, n);
      return n += 2, s2.fmt == 1 && (s2.tab = a.readUshorts(i, n, l)), s2.fmt == 2 && (s2.tab = a.readUshorts(i, n, 3 * l)), s2;
    }, e2._lctf.coverageIndex = function(i, n) {
      var a = i.tab;
      if (i.fmt == 1) return a.indexOf(n);
      if (i.fmt == 2) {
        var s2 = e2._lctf.getInterval(a, n);
        if (s2 != -1) return a[s2 + 2] + (n - a[s2]);
      }
      return -1;
    }, e2._lctf.readFeatureList = function(i, n) {
      var a = e2._bin, s2 = n, l = [], u2 = a.readUshort(i, n);
      n += 2;
      for (var c2 = 0; c2 < u2; c2++) {
        var f = a.readASCII(i, n, 4);
        n += 4;
        var d = a.readUshort(i, n);
        n += 2;
        var h = e2._lctf.readFeatureTable(i, s2 + d);
        h.tag = f.trim(), l.push(h);
      }
      return l;
    }, e2._lctf.readFeatureTable = function(i, n) {
      var a = e2._bin, s2 = n, l = {}, u2 = a.readUshort(i, n);
      n += 2, u2 > 0 && (l.featureParams = s2 + u2);
      var c2 = a.readUshort(i, n);
      n += 2, l.tab = [];
      for (var f = 0; f < c2; f++) l.tab.push(a.readUshort(i, n + 2 * f));
      return l;
    }, e2._lctf.readScriptList = function(i, n) {
      var a = e2._bin, s2 = n, l = {}, u2 = a.readUshort(i, n);
      n += 2;
      for (var c2 = 0; c2 < u2; c2++) {
        var f = a.readASCII(i, n, 4);
        n += 4;
        var d = a.readUshort(i, n);
        n += 2, l[f.trim()] = e2._lctf.readScriptTable(i, s2 + d);
      }
      return l;
    }, e2._lctf.readScriptTable = function(i, n) {
      var a = e2._bin, s2 = n, l = {}, u2 = a.readUshort(i, n);
      n += 2, u2 > 0 && (l.default = e2._lctf.readLangSysTable(i, s2 + u2));
      var c2 = a.readUshort(i, n);
      n += 2;
      for (var f = 0; f < c2; f++) {
        var d = a.readASCII(i, n, 4);
        n += 4;
        var h = a.readUshort(i, n);
        n += 2, l[d.trim()] = e2._lctf.readLangSysTable(i, s2 + h);
      }
      return l;
    }, e2._lctf.readLangSysTable = function(i, n) {
      var a = e2._bin, s2 = {};
      a.readUshort(i, n), n += 2, s2.reqFeature = a.readUshort(i, n), n += 2;
      var l = a.readUshort(i, n);
      return n += 2, s2.features = a.readUshorts(i, n, l), s2;
    }, e2.CFF = {}, e2.CFF.parse = function(i, n, a) {
      var s2 = e2._bin;
      (i = new Uint8Array(i.buffer, n, a))[n = 0], i[++n], i[++n], i[++n], n++;
      var l = [];
      n = e2.CFF.readIndex(i, n, l);
      for (var u2 = [], c2 = 0; c2 < l.length - 1; c2++) u2.push(s2.readASCII(i, n + l[c2], l[c2 + 1] - l[c2]));
      n += l[l.length - 1];
      var f = [];
      n = e2.CFF.readIndex(i, n, f);
      var d = [];
      for (c2 = 0; c2 < f.length - 1; c2++) d.push(e2.CFF.readDict(i, n + f[c2], n + f[c2 + 1]));
      n += f[f.length - 1];
      var h = d[0], g = [];
      n = e2.CFF.readIndex(i, n, g);
      var m = [];
      for (c2 = 0; c2 < g.length - 1; c2++) m.push(s2.readASCII(i, n + g[c2], g[c2 + 1] - g[c2]));
      if (n += g[g.length - 1], e2.CFF.readSubrs(i, n, h), h.CharStrings) {
        n = h.CharStrings, g = [], n = e2.CFF.readIndex(i, n, g);
        var y = [];
        for (c2 = 0; c2 < g.length - 1; c2++) y.push(s2.readBytes(i, n + g[c2], g[c2 + 1] - g[c2]));
        h.CharStrings = y;
      }
      if (h.ROS) {
        n = h.FDArray;
        var E = [];
        for (n = e2.CFF.readIndex(i, n, E), h.FDArray = [], c2 = 0; c2 < E.length - 1; c2++) {
          var k = e2.CFF.readDict(i, n + E[c2], n + E[c2 + 1]);
          e2.CFF._readFDict(i, k, m), h.FDArray.push(k);
        }
        n += E[E.length - 1], n = h.FDSelect, h.FDSelect = [];
        var b = i[n];
        if (n++, b != 3) throw b;
        var _ = s2.readUshort(i, n);
        for (n += 2, c2 = 0; c2 < _ + 1; c2++) h.FDSelect.push(s2.readUshort(i, n), i[n + 2]), n += 3;
      }
      return h.Encoding && (h.Encoding = e2.CFF.readEncoding(i, h.Encoding, h.CharStrings.length)), h.charset && (h.charset = e2.CFF.readCharset(i, h.charset, h.CharStrings.length)), e2.CFF._readFDict(i, h, m), h;
    }, e2.CFF._readFDict = function(i, n, a) {
      var s2;
      for (var l in n.Private && (s2 = n.Private[1], n.Private = e2.CFF.readDict(i, s2, s2 + n.Private[0]), n.Private.Subrs && e2.CFF.readSubrs(i, s2 + n.Private.Subrs, n.Private)), n) ["FamilyName", "FontName", "FullName", "Notice", "version", "Copyright"].indexOf(l) != -1 && (n[l] = a[n[l] - 426 + 35]);
    }, e2.CFF.readSubrs = function(i, n, a) {
      var s2 = e2._bin, l = [];
      n = e2.CFF.readIndex(i, n, l);
      var u2, c2 = l.length;
      u2 = c2 < 1240 ? 107 : c2 < 33900 ? 1131 : 32768, a.Bias = u2, a.Subrs = [];
      for (var f = 0; f < l.length - 1; f++) a.Subrs.push(s2.readBytes(i, n + l[f], l[f + 1] - l[f]));
    }, e2.CFF.tableSE = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 0, 111, 112, 113, 114, 0, 115, 116, 117, 118, 119, 120, 121, 122, 0, 123, 0, 124, 125, 126, 127, 128, 129, 130, 131, 0, 132, 133, 0, 134, 135, 136, 137, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 138, 0, 139, 0, 0, 0, 0, 140, 141, 142, 143, 0, 0, 0, 0, 0, 144, 0, 0, 0, 145, 0, 0, 146, 147, 148, 149, 0, 0, 0, 0], e2.CFF.glyphByUnicode = function(i, n) {
      for (var a = 0; a < i.charset.length; a++) if (i.charset[a] == n) return a;
      return -1;
    }, e2.CFF.glyphBySE = function(i, n) {
      return n < 0 || n > 255 ? -1 : e2.CFF.glyphByUnicode(i, e2.CFF.tableSE[n]);
    }, e2.CFF.readEncoding = function(i, n, a) {
      e2._bin;
      var s2 = [".notdef"], l = i[n];
      if (n++, l != 0) throw "error: unknown encoding format: " + l;
      var u2 = i[n];
      n++;
      for (var c2 = 0; c2 < u2; c2++) s2.push(i[n + c2]);
      return s2;
    }, e2.CFF.readCharset = function(i, n, a) {
      var s2 = e2._bin, l = [".notdef"], u2 = i[n];
      if (n++, u2 == 0) for (var c2 = 0; c2 < a; c2++) {
        var f = s2.readUshort(i, n);
        n += 2, l.push(f);
      }
      else {
        if (u2 != 1 && u2 != 2) throw "error: format: " + u2;
        for (; l.length < a; ) {
          f = s2.readUshort(i, n), n += 2;
          var d = 0;
          for (u2 == 1 ? (d = i[n], n++) : (d = s2.readUshort(i, n), n += 2), c2 = 0; c2 <= d; c2++) l.push(f), f++;
        }
      }
      return l;
    }, e2.CFF.readIndex = function(i, n, a) {
      var s2 = e2._bin, l = s2.readUshort(i, n) + 1, u2 = i[n += 2];
      if (n++, u2 == 1) for (var c2 = 0; c2 < l; c2++) a.push(i[n + c2]);
      else if (u2 == 2) for (c2 = 0; c2 < l; c2++) a.push(s2.readUshort(i, n + 2 * c2));
      else if (u2 == 3) for (c2 = 0; c2 < l; c2++) a.push(16777215 & s2.readUint(i, n + 3 * c2 - 1));
      else if (l != 1) throw "unsupported offset size: " + u2 + ", count: " + l;
      return (n += l * u2) - 1;
    }, e2.CFF.getCharString = function(i, n, a) {
      var s2 = e2._bin, l = i[n], u2 = i[n + 1];
      i[n + 2], i[n + 3], i[n + 4];
      var c2 = 1, f = null, d = null;
      l <= 20 && (f = l, c2 = 1), l == 12 && (f = 100 * l + u2, c2 = 2), 21 <= l && l <= 27 && (f = l, c2 = 1), l == 28 && (d = s2.readShort(i, n + 1), c2 = 3), 29 <= l && l <= 31 && (f = l, c2 = 1), 32 <= l && l <= 246 && (d = l - 139, c2 = 1), 247 <= l && l <= 250 && (d = 256 * (l - 247) + u2 + 108, c2 = 2), 251 <= l && l <= 254 && (d = 256 * -(l - 251) - u2 - 108, c2 = 2), l == 255 && (d = s2.readInt(i, n + 1) / 65535, c2 = 5), a.val = d != null ? d : "o" + f, a.size = c2;
    }, e2.CFF.readCharString = function(i, n, a) {
      for (var s2 = n + a, l = e2._bin, u2 = []; n < s2; ) {
        var c2 = i[n], f = i[n + 1];
        i[n + 2], i[n + 3], i[n + 4];
        var d = 1, h = null, g = null;
        c2 <= 20 && (h = c2, d = 1), c2 == 12 && (h = 100 * c2 + f, d = 2), c2 != 19 && c2 != 20 || (h = c2, d = 2), 21 <= c2 && c2 <= 27 && (h = c2, d = 1), c2 == 28 && (g = l.readShort(i, n + 1), d = 3), 29 <= c2 && c2 <= 31 && (h = c2, d = 1), 32 <= c2 && c2 <= 246 && (g = c2 - 139, d = 1), 247 <= c2 && c2 <= 250 && (g = 256 * (c2 - 247) + f + 108, d = 2), 251 <= c2 && c2 <= 254 && (g = 256 * -(c2 - 251) - f - 108, d = 2), c2 == 255 && (g = l.readInt(i, n + 1) / 65535, d = 5), u2.push(g != null ? g : "o" + h), n += d;
      }
      return u2;
    }, e2.CFF.readDict = function(i, n, a) {
      for (var s2 = e2._bin, l = {}, u2 = []; n < a; ) {
        var c2 = i[n], f = i[n + 1];
        i[n + 2], i[n + 3], i[n + 4];
        var d = 1, h = null, g = null;
        if (c2 == 28 && (g = s2.readShort(i, n + 1), d = 3), c2 == 29 && (g = s2.readInt(i, n + 1), d = 5), 32 <= c2 && c2 <= 246 && (g = c2 - 139, d = 1), 247 <= c2 && c2 <= 250 && (g = 256 * (c2 - 247) + f + 108, d = 2), 251 <= c2 && c2 <= 254 && (g = 256 * -(c2 - 251) - f - 108, d = 2), c2 == 255) throw g = s2.readInt(i, n + 1) / 65535, d = 5, "unknown number";
        if (c2 == 30) {
          var m = [];
          for (d = 1; ; ) {
            var y = i[n + d];
            d++;
            var E = y >> 4, k = 15 & y;
            if (E != 15 && m.push(E), k != 15 && m.push(k), k == 15) break;
          }
          for (var b = "", _ = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, ".", "e", "e-", "reserved", "-", "endOfNumber"], w2 = 0; w2 < m.length; w2++) b += _[m[w2]];
          g = parseFloat(b);
        }
        c2 <= 21 && (h = ["version", "Notice", "FullName", "FamilyName", "Weight", "FontBBox", "BlueValues", "OtherBlues", "FamilyBlues", "FamilyOtherBlues", "StdHW", "StdVW", "escape", "UniqueID", "XUID", "charset", "Encoding", "CharStrings", "Private", "Subrs", "defaultWidthX", "nominalWidthX"][c2], d = 1, c2 == 12 && (h = ["Copyright", "isFixedPitch", "ItalicAngle", "UnderlinePosition", "UnderlineThickness", "PaintType", "CharstringType", "FontMatrix", "StrokeWidth", "BlueScale", "BlueShift", "BlueFuzz", "StemSnapH", "StemSnapV", "ForceBold", 0, 0, "LanguageGroup", "ExpansionFactor", "initialRandomSeed", "SyntheticBase", "PostScript", "BaseFontName", "BaseFontBlend", 0, 0, 0, 0, 0, 0, "ROS", "CIDFontVersion", "CIDFontRevision", "CIDFontType", "CIDCount", "UIDBase", "FDArray", "FDSelect", "FontName"][f], d = 2)), h != null ? (l[h] = u2.length == 1 ? u2[0] : u2, u2 = []) : u2.push(g), n += d;
      }
      return l;
    }, e2.cmap = {}, e2.cmap.parse = function(i, n, a) {
      i = new Uint8Array(i.buffer, n, a), n = 0;
      var s2 = e2._bin, l = {};
      s2.readUshort(i, n), n += 2;
      var u2 = s2.readUshort(i, n);
      n += 2;
      var c2 = [];
      l.tables = [];
      for (var f = 0; f < u2; f++) {
        var d = s2.readUshort(i, n);
        n += 2;
        var h = s2.readUshort(i, n);
        n += 2;
        var g = s2.readUint(i, n);
        n += 4;
        var m = "p" + d + "e" + h, y = c2.indexOf(g);
        if (y == -1) {
          var E;
          y = l.tables.length, c2.push(g);
          var k = s2.readUshort(i, g);
          k == 0 ? E = e2.cmap.parse0(i, g) : k == 4 ? E = e2.cmap.parse4(i, g) : k == 6 ? E = e2.cmap.parse6(i, g) : k == 12 ? E = e2.cmap.parse12(i, g) : console.debug("unknown format: " + k, d, h, g), l.tables.push(E);
        }
        if (l[m] != null) throw "multiple tables for one platform+encoding";
        l[m] = y;
      }
      return l;
    }, e2.cmap.parse0 = function(i, n) {
      var a = e2._bin, s2 = {};
      s2.format = a.readUshort(i, n), n += 2;
      var l = a.readUshort(i, n);
      n += 2, a.readUshort(i, n), n += 2, s2.map = [];
      for (var u2 = 0; u2 < l - 6; u2++) s2.map.push(i[n + u2]);
      return s2;
    }, e2.cmap.parse4 = function(i, n) {
      var a = e2._bin, s2 = n, l = {};
      l.format = a.readUshort(i, n), n += 2;
      var u2 = a.readUshort(i, n);
      n += 2, a.readUshort(i, n), n += 2;
      var c2 = a.readUshort(i, n);
      n += 2;
      var f = c2 / 2;
      l.searchRange = a.readUshort(i, n), n += 2, l.entrySelector = a.readUshort(i, n), n += 2, l.rangeShift = a.readUshort(i, n), n += 2, l.endCount = a.readUshorts(i, n, f), n += 2 * f, n += 2, l.startCount = a.readUshorts(i, n, f), n += 2 * f, l.idDelta = [];
      for (var d = 0; d < f; d++) l.idDelta.push(a.readShort(i, n)), n += 2;
      for (l.idRangeOffset = a.readUshorts(i, n, f), n += 2 * f, l.glyphIdArray = []; n < s2 + u2; ) l.glyphIdArray.push(a.readUshort(i, n)), n += 2;
      return l;
    }, e2.cmap.parse6 = function(i, n) {
      var a = e2._bin, s2 = {};
      s2.format = a.readUshort(i, n), n += 2, a.readUshort(i, n), n += 2, a.readUshort(i, n), n += 2, s2.firstCode = a.readUshort(i, n), n += 2;
      var l = a.readUshort(i, n);
      n += 2, s2.glyphIdArray = [];
      for (var u2 = 0; u2 < l; u2++) s2.glyphIdArray.push(a.readUshort(i, n)), n += 2;
      return s2;
    }, e2.cmap.parse12 = function(i, n) {
      var a = e2._bin, s2 = {};
      s2.format = a.readUshort(i, n), n += 2, n += 2, a.readUint(i, n), n += 4, a.readUint(i, n), n += 4;
      var l = a.readUint(i, n);
      n += 4, s2.groups = [];
      for (var u2 = 0; u2 < l; u2++) {
        var c2 = n + 12 * u2, f = a.readUint(i, c2 + 0), d = a.readUint(i, c2 + 4), h = a.readUint(i, c2 + 8);
        s2.groups.push([f, d, h]);
      }
      return s2;
    }, e2.glyf = {}, e2.glyf.parse = function(i, n, a, s2) {
      for (var l = [], u2 = 0; u2 < s2.maxp.numGlyphs; u2++) l.push(null);
      return l;
    }, e2.glyf._parseGlyf = function(i, n) {
      var a = e2._bin, s2 = i._data, l = e2._tabOffset(s2, "glyf", i._offset) + i.loca[n];
      if (i.loca[n] == i.loca[n + 1]) return null;
      var u2 = {};
      if (u2.noc = a.readShort(s2, l), l += 2, u2.xMin = a.readShort(s2, l), l += 2, u2.yMin = a.readShort(s2, l), l += 2, u2.xMax = a.readShort(s2, l), l += 2, u2.yMax = a.readShort(s2, l), l += 2, u2.xMin >= u2.xMax || u2.yMin >= u2.yMax) return null;
      if (u2.noc > 0) {
        u2.endPts = [];
        for (var c2 = 0; c2 < u2.noc; c2++) u2.endPts.push(a.readUshort(s2, l)), l += 2;
        var f = a.readUshort(s2, l);
        if (l += 2, s2.length - l < f) return null;
        u2.instructions = a.readBytes(s2, l, f), l += f;
        var d = u2.endPts[u2.noc - 1] + 1;
        for (u2.flags = [], c2 = 0; c2 < d; c2++) {
          var h = s2[l];
          if (l++, u2.flags.push(h), (8 & h) != 0) {
            var g = s2[l];
            l++;
            for (var m = 0; m < g; m++) u2.flags.push(h), c2++;
          }
        }
        for (u2.xs = [], c2 = 0; c2 < d; c2++) {
          var y = (2 & u2.flags[c2]) != 0, E = (16 & u2.flags[c2]) != 0;
          y ? (u2.xs.push(E ? s2[l] : -s2[l]), l++) : E ? u2.xs.push(0) : (u2.xs.push(a.readShort(s2, l)), l += 2);
        }
        for (u2.ys = [], c2 = 0; c2 < d; c2++) y = (4 & u2.flags[c2]) != 0, E = (32 & u2.flags[c2]) != 0, y ? (u2.ys.push(E ? s2[l] : -s2[l]), l++) : E ? u2.ys.push(0) : (u2.ys.push(a.readShort(s2, l)), l += 2);
        var k = 0, b = 0;
        for (c2 = 0; c2 < d; c2++) k += u2.xs[c2], b += u2.ys[c2], u2.xs[c2] = k, u2.ys[c2] = b;
      } else {
        var _;
        u2.parts = [];
        do {
          _ = a.readUshort(s2, l), l += 2;
          var w2 = { m: { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }, p1: -1, p2: -1 };
          if (u2.parts.push(w2), w2.glyphIndex = a.readUshort(s2, l), l += 2, 1 & _) {
            var P = a.readShort(s2, l);
            l += 2;
            var T = a.readShort(s2, l);
            l += 2;
          } else P = a.readInt8(s2, l), l++, T = a.readInt8(s2, l), l++;
          2 & _ ? (w2.m.tx = P, w2.m.ty = T) : (w2.p1 = P, w2.p2 = T), 8 & _ ? (w2.m.a = w2.m.d = a.readF2dot14(s2, l), l += 2) : 64 & _ ? (w2.m.a = a.readF2dot14(s2, l), l += 2, w2.m.d = a.readF2dot14(s2, l), l += 2) : 128 & _ && (w2.m.a = a.readF2dot14(s2, l), l += 2, w2.m.b = a.readF2dot14(s2, l), l += 2, w2.m.c = a.readF2dot14(s2, l), l += 2, w2.m.d = a.readF2dot14(s2, l), l += 2);
        } while (32 & _);
        if (256 & _) {
          var A = a.readUshort(s2, l);
          for (l += 2, u2.instr = [], c2 = 0; c2 < A; c2++) u2.instr.push(s2[l]), l++;
        }
      }
      return u2;
    }, e2.GDEF = {}, e2.GDEF.parse = function(i, n, a, s2) {
      var l = n;
      n += 4;
      var u2 = e2._bin.readUshort(i, n);
      return { glyphClassDef: u2 === 0 ? null : e2._lctf.readClassDef(i, l + u2) };
    }, e2.GPOS = {}, e2.GPOS.parse = function(i, n, a, s2) {
      return e2._lctf.parse(i, n, a, s2, e2.GPOS.subt);
    }, e2.GPOS.subt = function(i, n, a, s2) {
      var l = e2._bin, u2 = a, c2 = {};
      if (c2.fmt = l.readUshort(i, a), a += 2, n == 1 || n == 2 || n == 3 || n == 7 || n == 8 && c2.fmt <= 2) {
        var f = l.readUshort(i, a);
        a += 2, c2.coverage = e2._lctf.readCoverage(i, f + u2);
      }
      if (n == 1 && c2.fmt == 1) {
        var d = l.readUshort(i, a);
        a += 2, d != 0 && (c2.pos = e2.GPOS.readValueRecord(i, a, d));
      } else if (n == 2 && c2.fmt >= 1 && c2.fmt <= 2) {
        d = l.readUshort(i, a), a += 2;
        var h = l.readUshort(i, a);
        a += 2;
        var g = e2._lctf.numOfOnes(d), m = e2._lctf.numOfOnes(h);
        if (c2.fmt == 1) {
          c2.pairsets = [];
          var y = l.readUshort(i, a);
          a += 2;
          for (var E = 0; E < y; E++) {
            var k = u2 + l.readUshort(i, a);
            a += 2;
            var b = l.readUshort(i, k);
            k += 2;
            for (var _ = [], w2 = 0; w2 < b; w2++) {
              var P = l.readUshort(i, k);
              k += 2, d != 0 && (x = e2.GPOS.readValueRecord(i, k, d), k += 2 * g), h != 0 && (L = e2.GPOS.readValueRecord(i, k, h), k += 2 * m), _.push({ gid2: P, val1: x, val2: L });
            }
            c2.pairsets.push(_);
          }
        }
        if (c2.fmt == 2) {
          var T = l.readUshort(i, a);
          a += 2;
          var A = l.readUshort(i, a);
          a += 2;
          var z = l.readUshort(i, a);
          a += 2;
          var U = l.readUshort(i, a);
          for (a += 2, c2.classDef1 = e2._lctf.readClassDef(i, u2 + T), c2.classDef2 = e2._lctf.readClassDef(i, u2 + A), c2.matrix = [], E = 0; E < z; E++) {
            var q2 = [];
            for (w2 = 0; w2 < U; w2++) {
              var x = null, L = null;
              d != 0 && (x = e2.GPOS.readValueRecord(i, a, d), a += 2 * g), h != 0 && (L = e2.GPOS.readValueRecord(i, a, h), a += 2 * m), q2.push({ val1: x, val2: L });
            }
            c2.matrix.push(q2);
          }
        }
      } else if (n == 4 && c2.fmt == 1) c2.markCoverage = e2._lctf.readCoverage(i, l.readUshort(i, a) + u2), c2.baseCoverage = e2._lctf.readCoverage(i, l.readUshort(i, a + 2) + u2), c2.markClassCount = l.readUshort(i, a + 4), c2.markArray = e2.GPOS.readMarkArray(i, l.readUshort(i, a + 6) + u2), c2.baseArray = e2.GPOS.readBaseArray(i, l.readUshort(i, a + 8) + u2, c2.markClassCount);
      else if (n == 6 && c2.fmt == 1) c2.mark1Coverage = e2._lctf.readCoverage(i, l.readUshort(i, a) + u2), c2.mark2Coverage = e2._lctf.readCoverage(i, l.readUshort(i, a + 2) + u2), c2.markClassCount = l.readUshort(i, a + 4), c2.mark1Array = e2.GPOS.readMarkArray(i, l.readUshort(i, a + 6) + u2), c2.mark2Array = e2.GPOS.readBaseArray(i, l.readUshort(i, a + 8) + u2, c2.markClassCount);
      else {
        if (n == 9 && c2.fmt == 1) {
          var D = l.readUshort(i, a);
          a += 2;
          var Z = l.readUint(i, a);
          if (a += 4, s2.ltype == 9) s2.ltype = D;
          else if (s2.ltype != D) throw "invalid extension substitution";
          return e2.GPOS.subt(i, s2.ltype, u2 + Z);
        }
        console.debug("unsupported GPOS table LookupType", n, "format", c2.fmt);
      }
      return c2;
    }, e2.GPOS.readValueRecord = function(i, n, a) {
      var s2 = e2._bin, l = [];
      return l.push(1 & a ? s2.readShort(i, n) : 0), n += 1 & a ? 2 : 0, l.push(2 & a ? s2.readShort(i, n) : 0), n += 2 & a ? 2 : 0, l.push(4 & a ? s2.readShort(i, n) : 0), n += 4 & a ? 2 : 0, l.push(8 & a ? s2.readShort(i, n) : 0), n += 8 & a ? 2 : 0, l;
    }, e2.GPOS.readBaseArray = function(i, n, a) {
      var s2 = e2._bin, l = [], u2 = n, c2 = s2.readUshort(i, n);
      n += 2;
      for (var f = 0; f < c2; f++) {
        for (var d = [], h = 0; h < a; h++) d.push(e2.GPOS.readAnchorRecord(i, u2 + s2.readUshort(i, n))), n += 2;
        l.push(d);
      }
      return l;
    }, e2.GPOS.readMarkArray = function(i, n) {
      var a = e2._bin, s2 = [], l = n, u2 = a.readUshort(i, n);
      n += 2;
      for (var c2 = 0; c2 < u2; c2++) {
        var f = e2.GPOS.readAnchorRecord(i, a.readUshort(i, n + 2) + l);
        f.markClass = a.readUshort(i, n), s2.push(f), n += 4;
      }
      return s2;
    }, e2.GPOS.readAnchorRecord = function(i, n) {
      var a = e2._bin, s2 = {};
      return s2.fmt = a.readUshort(i, n), s2.x = a.readShort(i, n + 2), s2.y = a.readShort(i, n + 4), s2;
    }, e2.GSUB = {}, e2.GSUB.parse = function(i, n, a, s2) {
      return e2._lctf.parse(i, n, a, s2, e2.GSUB.subt);
    }, e2.GSUB.subt = function(i, n, a, s2) {
      var l = e2._bin, u2 = a, c2 = {};
      if (c2.fmt = l.readUshort(i, a), a += 2, n != 1 && n != 2 && n != 4 && n != 5 && n != 6) return null;
      if (n == 1 || n == 2 || n == 4 || n == 5 && c2.fmt <= 2 || n == 6 && c2.fmt <= 2) {
        var f = l.readUshort(i, a);
        a += 2, c2.coverage = e2._lctf.readCoverage(i, u2 + f);
      }
      if (n == 1 && c2.fmt >= 1 && c2.fmt <= 2) {
        if (c2.fmt == 1) c2.delta = l.readShort(i, a), a += 2;
        else if (c2.fmt == 2) {
          var d = l.readUshort(i, a);
          a += 2, c2.newg = l.readUshorts(i, a, d), a += 2 * c2.newg.length;
        }
      } else if (n == 2 && c2.fmt == 1) {
        d = l.readUshort(i, a), a += 2, c2.seqs = [];
        for (var h = 0; h < d; h++) {
          var g = l.readUshort(i, a) + u2;
          a += 2;
          var m = l.readUshort(i, g);
          c2.seqs.push(l.readUshorts(i, g + 2, m));
        }
      } else if (n == 4) for (c2.vals = [], d = l.readUshort(i, a), a += 2, h = 0; h < d; h++) {
        var y = l.readUshort(i, a);
        a += 2, c2.vals.push(e2.GSUB.readLigatureSet(i, u2 + y));
      }
      else if (n == 5 && c2.fmt == 2) {
        if (c2.fmt == 2) {
          var E = l.readUshort(i, a);
          a += 2, c2.cDef = e2._lctf.readClassDef(i, u2 + E), c2.scset = [];
          var k = l.readUshort(i, a);
          for (a += 2, h = 0; h < k; h++) {
            var b = l.readUshort(i, a);
            a += 2, c2.scset.push(b == 0 ? null : e2.GSUB.readSubClassSet(i, u2 + b));
          }
        }
      } else if (n == 6 && c2.fmt == 3) {
        if (c2.fmt == 3) {
          for (h = 0; h < 3; h++) {
            d = l.readUshort(i, a), a += 2;
            for (var _ = [], w2 = 0; w2 < d; w2++) _.push(e2._lctf.readCoverage(i, u2 + l.readUshort(i, a + 2 * w2)));
            a += 2 * d, h == 0 && (c2.backCvg = _), h == 1 && (c2.inptCvg = _), h == 2 && (c2.ahedCvg = _);
          }
          d = l.readUshort(i, a), a += 2, c2.lookupRec = e2.GSUB.readSubstLookupRecords(i, a, d);
        }
      } else {
        if (n == 7 && c2.fmt == 1) {
          var P = l.readUshort(i, a);
          a += 2;
          var T = l.readUint(i, a);
          if (a += 4, s2.ltype == 9) s2.ltype = P;
          else if (s2.ltype != P) throw "invalid extension substitution";
          return e2.GSUB.subt(i, s2.ltype, u2 + T);
        }
        console.debug("unsupported GSUB table LookupType", n, "format", c2.fmt);
      }
      return c2;
    }, e2.GSUB.readSubClassSet = function(i, n) {
      var a = e2._bin.readUshort, s2 = n, l = [], u2 = a(i, n);
      n += 2;
      for (var c2 = 0; c2 < u2; c2++) {
        var f = a(i, n);
        n += 2, l.push(e2.GSUB.readSubClassRule(i, s2 + f));
      }
      return l;
    }, e2.GSUB.readSubClassRule = function(i, n) {
      var a = e2._bin.readUshort, s2 = {}, l = a(i, n), u2 = a(i, n += 2);
      n += 2, s2.input = [];
      for (var c2 = 0; c2 < l - 1; c2++) s2.input.push(a(i, n)), n += 2;
      return s2.substLookupRecords = e2.GSUB.readSubstLookupRecords(i, n, u2), s2;
    }, e2.GSUB.readSubstLookupRecords = function(i, n, a) {
      for (var s2 = e2._bin.readUshort, l = [], u2 = 0; u2 < a; u2++) l.push(s2(i, n), s2(i, n + 2)), n += 4;
      return l;
    }, e2.GSUB.readChainSubClassSet = function(i, n) {
      var a = e2._bin, s2 = n, l = [], u2 = a.readUshort(i, n);
      n += 2;
      for (var c2 = 0; c2 < u2; c2++) {
        var f = a.readUshort(i, n);
        n += 2, l.push(e2.GSUB.readChainSubClassRule(i, s2 + f));
      }
      return l;
    }, e2.GSUB.readChainSubClassRule = function(i, n) {
      for (var a = e2._bin, s2 = {}, l = ["backtrack", "input", "lookahead"], u2 = 0; u2 < l.length; u2++) {
        var c2 = a.readUshort(i, n);
        n += 2, u2 == 1 && c2--, s2[l[u2]] = a.readUshorts(i, n, c2), n += 2 * s2[l[u2]].length;
      }
      return c2 = a.readUshort(i, n), n += 2, s2.subst = a.readUshorts(i, n, 2 * c2), n += 2 * s2.subst.length, s2;
    }, e2.GSUB.readLigatureSet = function(i, n) {
      var a = e2._bin, s2 = n, l = [], u2 = a.readUshort(i, n);
      n += 2;
      for (var c2 = 0; c2 < u2; c2++) {
        var f = a.readUshort(i, n);
        n += 2, l.push(e2.GSUB.readLigature(i, s2 + f));
      }
      return l;
    }, e2.GSUB.readLigature = function(i, n) {
      var a = e2._bin, s2 = { chain: [] };
      s2.nglyph = a.readUshort(i, n), n += 2;
      var l = a.readUshort(i, n);
      n += 2;
      for (var u2 = 0; u2 < l - 1; u2++) s2.chain.push(a.readUshort(i, n)), n += 2;
      return s2;
    }, e2.head = {}, e2.head.parse = function(i, n, a) {
      var s2 = e2._bin, l = {};
      return s2.readFixed(i, n), n += 4, l.fontRevision = s2.readFixed(i, n), n += 4, s2.readUint(i, n), n += 4, s2.readUint(i, n), n += 4, l.flags = s2.readUshort(i, n), n += 2, l.unitsPerEm = s2.readUshort(i, n), n += 2, l.created = s2.readUint64(i, n), n += 8, l.modified = s2.readUint64(i, n), n += 8, l.xMin = s2.readShort(i, n), n += 2, l.yMin = s2.readShort(i, n), n += 2, l.xMax = s2.readShort(i, n), n += 2, l.yMax = s2.readShort(i, n), n += 2, l.macStyle = s2.readUshort(i, n), n += 2, l.lowestRecPPEM = s2.readUshort(i, n), n += 2, l.fontDirectionHint = s2.readShort(i, n), n += 2, l.indexToLocFormat = s2.readShort(i, n), n += 2, l.glyphDataFormat = s2.readShort(i, n), n += 2, l;
    }, e2.hhea = {}, e2.hhea.parse = function(i, n, a) {
      var s2 = e2._bin, l = {};
      return s2.readFixed(i, n), n += 4, l.ascender = s2.readShort(i, n), n += 2, l.descender = s2.readShort(i, n), n += 2, l.lineGap = s2.readShort(i, n), n += 2, l.advanceWidthMax = s2.readUshort(i, n), n += 2, l.minLeftSideBearing = s2.readShort(i, n), n += 2, l.minRightSideBearing = s2.readShort(i, n), n += 2, l.xMaxExtent = s2.readShort(i, n), n += 2, l.caretSlopeRise = s2.readShort(i, n), n += 2, l.caretSlopeRun = s2.readShort(i, n), n += 2, l.caretOffset = s2.readShort(i, n), n += 2, n += 8, l.metricDataFormat = s2.readShort(i, n), n += 2, l.numberOfHMetrics = s2.readUshort(i, n), n += 2, l;
    }, e2.hmtx = {}, e2.hmtx.parse = function(i, n, a, s2) {
      for (var l = e2._bin, u2 = { aWidth: [], lsBearing: [] }, c2 = 0, f = 0, d = 0; d < s2.maxp.numGlyphs; d++) d < s2.hhea.numberOfHMetrics && (c2 = l.readUshort(i, n), n += 2, f = l.readShort(i, n), n += 2), u2.aWidth.push(c2), u2.lsBearing.push(f);
      return u2;
    }, e2.kern = {}, e2.kern.parse = function(i, n, a, s2) {
      var l = e2._bin, u2 = l.readUshort(i, n);
      if (n += 2, u2 == 1) return e2.kern.parseV1(i, n - 2, a, s2);
      var c2 = l.readUshort(i, n);
      n += 2;
      for (var f = { glyph1: [], rval: [] }, d = 0; d < c2; d++) {
        n += 2, a = l.readUshort(i, n), n += 2;
        var h = l.readUshort(i, n);
        n += 2;
        var g = h >>> 8;
        if ((g &= 15) != 0) throw "unknown kern table format: " + g;
        n = e2.kern.readFormat0(i, n, f);
      }
      return f;
    }, e2.kern.parseV1 = function(i, n, a, s2) {
      var l = e2._bin;
      l.readFixed(i, n), n += 4;
      var u2 = l.readUint(i, n);
      n += 4;
      for (var c2 = { glyph1: [], rval: [] }, f = 0; f < u2; f++) {
        l.readUint(i, n), n += 4;
        var d = l.readUshort(i, n);
        n += 2, l.readUshort(i, n), n += 2;
        var h = d >>> 8;
        if ((h &= 15) != 0) throw "unknown kern table format: " + h;
        n = e2.kern.readFormat0(i, n, c2);
      }
      return c2;
    }, e2.kern.readFormat0 = function(i, n, a) {
      var s2 = e2._bin, l = -1, u2 = s2.readUshort(i, n);
      n += 2, s2.readUshort(i, n), n += 2, s2.readUshort(i, n), n += 2, s2.readUshort(i, n), n += 2;
      for (var c2 = 0; c2 < u2; c2++) {
        var f = s2.readUshort(i, n);
        n += 2;
        var d = s2.readUshort(i, n);
        n += 2;
        var h = s2.readShort(i, n);
        n += 2, f != l && (a.glyph1.push(f), a.rval.push({ glyph2: [], vals: [] }));
        var g = a.rval[a.rval.length - 1];
        g.glyph2.push(d), g.vals.push(h), l = f;
      }
      return n;
    }, e2.loca = {}, e2.loca.parse = function(i, n, a, s2) {
      var l = e2._bin, u2 = [], c2 = s2.head.indexToLocFormat, f = s2.maxp.numGlyphs + 1;
      if (c2 == 0) for (var d = 0; d < f; d++) u2.push(l.readUshort(i, n + (d << 1)) << 1);
      if (c2 == 1) for (d = 0; d < f; d++) u2.push(l.readUint(i, n + (d << 2)));
      return u2;
    }, e2.maxp = {}, e2.maxp.parse = function(i, n, a) {
      var s2 = e2._bin, l = {}, u2 = s2.readUint(i, n);
      return n += 4, l.numGlyphs = s2.readUshort(i, n), n += 2, u2 == 65536 && (l.maxPoints = s2.readUshort(i, n), n += 2, l.maxContours = s2.readUshort(i, n), n += 2, l.maxCompositePoints = s2.readUshort(i, n), n += 2, l.maxCompositeContours = s2.readUshort(i, n), n += 2, l.maxZones = s2.readUshort(i, n), n += 2, l.maxTwilightPoints = s2.readUshort(i, n), n += 2, l.maxStorage = s2.readUshort(i, n), n += 2, l.maxFunctionDefs = s2.readUshort(i, n), n += 2, l.maxInstructionDefs = s2.readUshort(i, n), n += 2, l.maxStackElements = s2.readUshort(i, n), n += 2, l.maxSizeOfInstructions = s2.readUshort(i, n), n += 2, l.maxComponentElements = s2.readUshort(i, n), n += 2, l.maxComponentDepth = s2.readUshort(i, n), n += 2), l;
    }, e2.name = {}, e2.name.parse = function(i, n, a) {
      var s2 = e2._bin, l = {};
      s2.readUshort(i, n), n += 2;
      var u2 = s2.readUshort(i, n);
      n += 2, s2.readUshort(i, n);
      for (var c2, f = ["copyright", "fontFamily", "fontSubfamily", "ID", "fullName", "version", "postScriptName", "trademark", "manufacturer", "designer", "description", "urlVendor", "urlDesigner", "licence", "licenceURL", "---", "typoFamilyName", "typoSubfamilyName", "compatibleFull", "sampleText", "postScriptCID", "wwsFamilyName", "wwsSubfamilyName", "lightPalette", "darkPalette"], d = n += 2, h = 0; h < u2; h++) {
        var g = s2.readUshort(i, n);
        n += 2;
        var m = s2.readUshort(i, n);
        n += 2;
        var y = s2.readUshort(i, n);
        n += 2;
        var E = s2.readUshort(i, n);
        n += 2;
        var k = s2.readUshort(i, n);
        n += 2;
        var b = s2.readUshort(i, n);
        n += 2;
        var _, w2 = f[E], P = d + 12 * u2 + b;
        if (g == 0) _ = s2.readUnicode(i, P, k / 2);
        else if (g == 3 && m == 0) _ = s2.readUnicode(i, P, k / 2);
        else if (m == 0) _ = s2.readASCII(i, P, k);
        else if (m == 1) _ = s2.readUnicode(i, P, k / 2);
        else if (m == 3) _ = s2.readUnicode(i, P, k / 2);
        else {
          if (g != 1) throw "unknown encoding " + m + ", platformID: " + g;
          _ = s2.readASCII(i, P, k), console.debug("reading unknown MAC encoding " + m + " as ASCII");
        }
        var T = "p" + g + "," + y.toString(16);
        l[T] == null && (l[T] = {}), l[T][w2 !== void 0 ? w2 : E] = _, l[T]._lang = y;
      }
      for (var A in l) if (l[A].postScriptName != null && l[A]._lang == 1033) return l[A];
      for (var A in l) if (l[A].postScriptName != null && l[A]._lang == 0) return l[A];
      for (var A in l) if (l[A].postScriptName != null && l[A]._lang == 3084) return l[A];
      for (var A in l) if (l[A].postScriptName != null) return l[A];
      for (var A in l) {
        c2 = A;
        break;
      }
      return console.debug("returning name table with languageID " + l[c2]._lang), l[c2];
    }, e2["OS/2"] = {}, e2["OS/2"].parse = function(i, n, a) {
      var s2 = e2._bin.readUshort(i, n);
      n += 2;
      var l = {};
      if (s2 == 0) e2["OS/2"].version0(i, n, l);
      else if (s2 == 1) e2["OS/2"].version1(i, n, l);
      else if (s2 == 2 || s2 == 3 || s2 == 4) e2["OS/2"].version2(i, n, l);
      else {
        if (s2 != 5) throw "unknown OS/2 table version: " + s2;
        e2["OS/2"].version5(i, n, l);
      }
      return l;
    }, e2["OS/2"].version0 = function(i, n, a) {
      var s2 = e2._bin;
      return a.xAvgCharWidth = s2.readShort(i, n), n += 2, a.usWeightClass = s2.readUshort(i, n), n += 2, a.usWidthClass = s2.readUshort(i, n), n += 2, a.fsType = s2.readUshort(i, n), n += 2, a.ySubscriptXSize = s2.readShort(i, n), n += 2, a.ySubscriptYSize = s2.readShort(i, n), n += 2, a.ySubscriptXOffset = s2.readShort(i, n), n += 2, a.ySubscriptYOffset = s2.readShort(i, n), n += 2, a.ySuperscriptXSize = s2.readShort(i, n), n += 2, a.ySuperscriptYSize = s2.readShort(i, n), n += 2, a.ySuperscriptXOffset = s2.readShort(i, n), n += 2, a.ySuperscriptYOffset = s2.readShort(i, n), n += 2, a.yStrikeoutSize = s2.readShort(i, n), n += 2, a.yStrikeoutPosition = s2.readShort(i, n), n += 2, a.sFamilyClass = s2.readShort(i, n), n += 2, a.panose = s2.readBytes(i, n, 10), n += 10, a.ulUnicodeRange1 = s2.readUint(i, n), n += 4, a.ulUnicodeRange2 = s2.readUint(i, n), n += 4, a.ulUnicodeRange3 = s2.readUint(i, n), n += 4, a.ulUnicodeRange4 = s2.readUint(i, n), n += 4, a.achVendID = [s2.readInt8(i, n), s2.readInt8(i, n + 1), s2.readInt8(i, n + 2), s2.readInt8(i, n + 3)], n += 4, a.fsSelection = s2.readUshort(i, n), n += 2, a.usFirstCharIndex = s2.readUshort(i, n), n += 2, a.usLastCharIndex = s2.readUshort(i, n), n += 2, a.sTypoAscender = s2.readShort(i, n), n += 2, a.sTypoDescender = s2.readShort(i, n), n += 2, a.sTypoLineGap = s2.readShort(i, n), n += 2, a.usWinAscent = s2.readUshort(i, n), n += 2, a.usWinDescent = s2.readUshort(i, n), n += 2;
    }, e2["OS/2"].version1 = function(i, n, a) {
      var s2 = e2._bin;
      return n = e2["OS/2"].version0(i, n, a), a.ulCodePageRange1 = s2.readUint(i, n), n += 4, a.ulCodePageRange2 = s2.readUint(i, n), n += 4;
    }, e2["OS/2"].version2 = function(i, n, a) {
      var s2 = e2._bin;
      return n = e2["OS/2"].version1(i, n, a), a.sxHeight = s2.readShort(i, n), n += 2, a.sCapHeight = s2.readShort(i, n), n += 2, a.usDefault = s2.readUshort(i, n), n += 2, a.usBreak = s2.readUshort(i, n), n += 2, a.usMaxContext = s2.readUshort(i, n), n += 2;
    }, e2["OS/2"].version5 = function(i, n, a) {
      var s2 = e2._bin;
      return n = e2["OS/2"].version2(i, n, a), a.usLowerOpticalPointSize = s2.readUshort(i, n), n += 2, a.usUpperOpticalPointSize = s2.readUshort(i, n), n += 2;
    }, e2.post = {}, e2.post.parse = function(i, n, a) {
      var s2 = e2._bin, l = {};
      return l.version = s2.readFixed(i, n), n += 4, l.italicAngle = s2.readFixed(i, n), n += 4, l.underlinePosition = s2.readShort(i, n), n += 2, l.underlineThickness = s2.readShort(i, n), n += 2, l;
    }, e2 == null && (e2 = {}), e2.U == null && (e2.U = {}), e2.U.codeToGlyph = function(i, n) {
      var a = i.cmap, s2 = -1;
      if (a.p0e4 != null ? s2 = a.p0e4 : a.p3e1 != null ? s2 = a.p3e1 : a.p1e0 != null ? s2 = a.p1e0 : a.p0e3 != null && (s2 = a.p0e3), s2 == -1) throw "no familiar platform and encoding!";
      var l = a.tables[s2];
      if (l.format == 0) return n >= l.map.length ? 0 : l.map[n];
      if (l.format == 4) {
        for (var u2 = -1, c2 = 0; c2 < l.endCount.length; c2++) if (n <= l.endCount[c2]) {
          u2 = c2;
          break;
        }
        return u2 == -1 || l.startCount[u2] > n ? 0 : 65535 & (l.idRangeOffset[u2] != 0 ? l.glyphIdArray[n - l.startCount[u2] + (l.idRangeOffset[u2] >> 1) - (l.idRangeOffset.length - u2)] : n + l.idDelta[u2]);
      }
      if (l.format == 12) {
        if (n > l.groups[l.groups.length - 1][1]) return 0;
        for (c2 = 0; c2 < l.groups.length; c2++) {
          var f = l.groups[c2];
          if (f[0] <= n && n <= f[1]) return f[2] + (n - f[0]);
        }
        return 0;
      }
      throw "unknown cmap table format " + l.format;
    }, e2.U.glyphToPath = function(i, n) {
      var a = { cmds: [], crds: [] };
      if (i.SVG && i.SVG.entries[n]) {
        var s2 = i.SVG.entries[n];
        return s2 == null ? a : (typeof s2 == "string" && (s2 = e2.SVG.toPath(s2), i.SVG.entries[n] = s2), s2);
      }
      if (i.CFF) {
        var l = { x: 0, y: 0, stack: [], nStems: 0, haveWidth: false, width: i.CFF.Private ? i.CFF.Private.defaultWidthX : 0, open: false }, u2 = i.CFF, c2 = i.CFF.Private;
        if (u2.ROS) {
          for (var f = 0; u2.FDSelect[f + 2] <= n; ) f += 2;
          c2 = u2.FDArray[u2.FDSelect[f + 1]].Private;
        }
        e2.U._drawCFF(i.CFF.CharStrings[n], l, u2, c2, a);
      } else i.glyf && e2.U._drawGlyf(n, i, a);
      return a;
    }, e2.U._drawGlyf = function(i, n, a) {
      var s2 = n.glyf[i];
      s2 == null && (s2 = n.glyf[i] = e2.glyf._parseGlyf(n, i)), s2 != null && (s2.noc > -1 ? e2.U._simpleGlyph(s2, a) : e2.U._compoGlyph(s2, n, a));
    }, e2.U._simpleGlyph = function(i, n) {
      for (var a = 0; a < i.noc; a++) {
        for (var s2 = a == 0 ? 0 : i.endPts[a - 1] + 1, l = i.endPts[a], u2 = s2; u2 <= l; u2++) {
          var c2 = u2 == s2 ? l : u2 - 1, f = u2 == l ? s2 : u2 + 1, d = 1 & i.flags[u2], h = 1 & i.flags[c2], g = 1 & i.flags[f], m = i.xs[u2], y = i.ys[u2];
          if (u2 == s2) if (d) {
            if (!h) {
              e2.U.P.moveTo(n, m, y);
              continue;
            }
            e2.U.P.moveTo(n, i.xs[c2], i.ys[c2]);
          } else h ? e2.U.P.moveTo(n, i.xs[c2], i.ys[c2]) : e2.U.P.moveTo(n, (i.xs[c2] + m) / 2, (i.ys[c2] + y) / 2);
          d ? h && e2.U.P.lineTo(n, m, y) : g ? e2.U.P.qcurveTo(n, m, y, i.xs[f], i.ys[f]) : e2.U.P.qcurveTo(n, m, y, (m + i.xs[f]) / 2, (y + i.ys[f]) / 2);
        }
        e2.U.P.closePath(n);
      }
    }, e2.U._compoGlyph = function(i, n, a) {
      for (var s2 = 0; s2 < i.parts.length; s2++) {
        var l = { cmds: [], crds: [] }, u2 = i.parts[s2];
        e2.U._drawGlyf(u2.glyphIndex, n, l);
        for (var c2 = u2.m, f = 0; f < l.crds.length; f += 2) {
          var d = l.crds[f], h = l.crds[f + 1];
          a.crds.push(d * c2.a + h * c2.b + c2.tx), a.crds.push(d * c2.c + h * c2.d + c2.ty);
        }
        for (f = 0; f < l.cmds.length; f++) a.cmds.push(l.cmds[f]);
      }
    }, e2.U._getGlyphClass = function(i, n) {
      var a = e2._lctf.getInterval(n, i);
      return a == -1 ? 0 : n[a + 2];
    }, e2.U._applySubs = function(i, n, a, s2) {
      for (var l = i.length - n - 1, u2 = 0; u2 < a.tabs.length; u2++) if (a.tabs[u2] != null) {
        var c2, f = a.tabs[u2];
        if (!f.coverage || (c2 = e2._lctf.coverageIndex(f.coverage, i[n])) != -1) {
          if (a.ltype == 1) i[n], f.fmt == 1 ? i[n] = i[n] + f.delta : i[n] = f.newg[c2];
          else if (a.ltype == 4) for (var d = f.vals[c2], h = 0; h < d.length; h++) {
            var g = d[h], m = g.chain.length;
            if (!(m > l)) {
              for (var y = true, E = 0, k = 0; k < m; k++) {
                for (; i[n + E + (1 + k)] == -1; ) E++;
                g.chain[k] != i[n + E + (1 + k)] && (y = false);
              }
              if (y) {
                for (i[n] = g.nglyph, k = 0; k < m + E; k++) i[n + k + 1] = -1;
                break;
              }
            }
          }
          else if (a.ltype == 5 && f.fmt == 2) for (var b = e2._lctf.getInterval(f.cDef, i[n]), _ = f.cDef[b + 2], w2 = f.scset[_], P = 0; P < w2.length; P++) {
            var T = w2[P], A = T.input;
            if (!(A.length > l)) {
              for (y = true, k = 0; k < A.length; k++) {
                var z = e2._lctf.getInterval(f.cDef, i[n + 1 + k]);
                if (b == -1 && f.cDef[z + 2] != A[k]) {
                  y = false;
                  break;
                }
              }
              if (y) {
                var U = T.substLookupRecords;
                for (h = 0; h < U.length; h += 2) U[h], U[h + 1];
              }
            }
          }
          else if (a.ltype == 6 && f.fmt == 3) {
            if (!e2.U._glsCovered(i, f.backCvg, n - f.backCvg.length) || !e2.U._glsCovered(i, f.inptCvg, n) || !e2.U._glsCovered(i, f.ahedCvg, n + f.inptCvg.length)) continue;
            var q2 = f.lookupRec;
            for (P = 0; P < q2.length; P += 2) {
              b = q2[P];
              var x = s2[q2[P + 1]];
              e2.U._applySubs(i, n + b, x, s2);
            }
          }
        }
      }
    }, e2.U._glsCovered = function(i, n, a) {
      for (var s2 = 0; s2 < n.length; s2++) if (e2._lctf.coverageIndex(n[s2], i[a + s2]) == -1) return false;
      return true;
    }, e2.U.glyphsToPath = function(i, n, a) {
      for (var s2 = { cmds: [], crds: [] }, l = 0, u2 = 0; u2 < n.length; u2++) {
        var c2 = n[u2];
        if (c2 != -1) {
          for (var f = u2 < n.length - 1 && n[u2 + 1] != -1 ? n[u2 + 1] : 0, d = e2.U.glyphToPath(i, c2), h = 0; h < d.crds.length; h += 2) s2.crds.push(d.crds[h] + l), s2.crds.push(d.crds[h + 1]);
          for (a && s2.cmds.push(a), h = 0; h < d.cmds.length; h++) s2.cmds.push(d.cmds[h]);
          a && s2.cmds.push("X"), l += i.hmtx.aWidth[c2], u2 < n.length - 1 && (l += e2.U.getPairAdjustment(i, c2, f));
        }
      }
      return s2;
    }, e2.U.P = {}, e2.U.P.moveTo = function(i, n, a) {
      i.cmds.push("M"), i.crds.push(n, a);
    }, e2.U.P.lineTo = function(i, n, a) {
      i.cmds.push("L"), i.crds.push(n, a);
    }, e2.U.P.curveTo = function(i, n, a, s2, l, u2, c2) {
      i.cmds.push("C"), i.crds.push(n, a, s2, l, u2, c2);
    }, e2.U.P.qcurveTo = function(i, n, a, s2, l) {
      i.cmds.push("Q"), i.crds.push(n, a, s2, l);
    }, e2.U.P.closePath = function(i) {
      i.cmds.push("Z");
    }, e2.U._drawCFF = function(i, n, a, s2, l) {
      for (var u2 = n.stack, c2 = n.nStems, f = n.haveWidth, d = n.width, h = n.open, g = 0, m = n.x, y = n.y, E = 0, k = 0, b = 0, _ = 0, w2 = 0, P = 0, T = 0, A = 0, z = 0, U = 0, q2 = { val: 0, size: 0 }; g < i.length; ) {
        e2.CFF.getCharString(i, g, q2);
        var x = q2.val;
        if (g += q2.size, x == "o1" || x == "o18") u2.length % 2 != 0 && !f && (d = u2.shift() + s2.nominalWidthX), c2 += u2.length >> 1, u2.length = 0, f = true;
        else if (x == "o3" || x == "o23") u2.length % 2 != 0 && !f && (d = u2.shift() + s2.nominalWidthX), c2 += u2.length >> 1, u2.length = 0, f = true;
        else if (x == "o4") u2.length > 1 && !f && (d = u2.shift() + s2.nominalWidthX, f = true), h && e2.U.P.closePath(l), y += u2.pop(), e2.U.P.moveTo(l, m, y), h = true;
        else if (x == "o5") for (; u2.length > 0; ) m += u2.shift(), y += u2.shift(), e2.U.P.lineTo(l, m, y);
        else if (x == "o6" || x == "o7") for (var L = u2.length, D = x == "o6", Z = 0; Z < L; Z++) {
          var F = u2.shift();
          D ? m += F : y += F, D = !D, e2.U.P.lineTo(l, m, y);
        }
        else if (x == "o8" || x == "o24") {
          L = u2.length;
          for (var ne = 0; ne + 6 <= L; ) E = m + u2.shift(), k = y + u2.shift(), b = E + u2.shift(), _ = k + u2.shift(), m = b + u2.shift(), y = _ + u2.shift(), e2.U.P.curveTo(l, E, k, b, _, m, y), ne += 6;
          x == "o24" && (m += u2.shift(), y += u2.shift(), e2.U.P.lineTo(l, m, y));
        } else {
          if (x == "o11") break;
          if (x == "o1234" || x == "o1235" || x == "o1236" || x == "o1237") x == "o1234" && (k = y, b = (E = m + u2.shift()) + u2.shift(), U = _ = k + u2.shift(), P = _, A = y, m = (T = (w2 = (z = b + u2.shift()) + u2.shift()) + u2.shift()) + u2.shift(), e2.U.P.curveTo(l, E, k, b, _, z, U), e2.U.P.curveTo(l, w2, P, T, A, m, y)), x == "o1235" && (E = m + u2.shift(), k = y + u2.shift(), b = E + u2.shift(), _ = k + u2.shift(), z = b + u2.shift(), U = _ + u2.shift(), w2 = z + u2.shift(), P = U + u2.shift(), T = w2 + u2.shift(), A = P + u2.shift(), m = T + u2.shift(), y = A + u2.shift(), u2.shift(), e2.U.P.curveTo(l, E, k, b, _, z, U), e2.U.P.curveTo(l, w2, P, T, A, m, y)), x == "o1236" && (E = m + u2.shift(), k = y + u2.shift(), b = E + u2.shift(), U = _ = k + u2.shift(), P = _, T = (w2 = (z = b + u2.shift()) + u2.shift()) + u2.shift(), A = P + u2.shift(), m = T + u2.shift(), e2.U.P.curveTo(l, E, k, b, _, z, U), e2.U.P.curveTo(l, w2, P, T, A, m, y)), x == "o1237" && (E = m + u2.shift(), k = y + u2.shift(), b = E + u2.shift(), _ = k + u2.shift(), z = b + u2.shift(), U = _ + u2.shift(), w2 = z + u2.shift(), P = U + u2.shift(), T = w2 + u2.shift(), A = P + u2.shift(), Math.abs(T - m) > Math.abs(A - y) ? m = T + u2.shift() : y = A + u2.shift(), e2.U.P.curveTo(l, E, k, b, _, z, U), e2.U.P.curveTo(l, w2, P, T, A, m, y));
          else if (x == "o14") {
            if (u2.length > 0 && !f && (d = u2.shift() + a.nominalWidthX, f = true), u2.length == 4) {
              var oe = u2.shift(), B = u2.shift(), G = u2.shift(), v2 = u2.shift(), S = e2.CFF.glyphBySE(a, G), C = e2.CFF.glyphBySE(a, v2);
              e2.U._drawCFF(a.CharStrings[S], n, a, s2, l), n.x = oe, n.y = B, e2.U._drawCFF(a.CharStrings[C], n, a, s2, l);
            }
            h && (e2.U.P.closePath(l), h = false);
          } else if (x == "o19" || x == "o20") u2.length % 2 != 0 && !f && (d = u2.shift() + s2.nominalWidthX), c2 += u2.length >> 1, u2.length = 0, f = true, g += c2 + 7 >> 3;
          else if (x == "o21") u2.length > 2 && !f && (d = u2.shift() + s2.nominalWidthX, f = true), y += u2.pop(), m += u2.pop(), h && e2.U.P.closePath(l), e2.U.P.moveTo(l, m, y), h = true;
          else if (x == "o22") u2.length > 1 && !f && (d = u2.shift() + s2.nominalWidthX, f = true), m += u2.pop(), h && e2.U.P.closePath(l), e2.U.P.moveTo(l, m, y), h = true;
          else if (x == "o25") {
            for (; u2.length > 6; ) m += u2.shift(), y += u2.shift(), e2.U.P.lineTo(l, m, y);
            E = m + u2.shift(), k = y + u2.shift(), b = E + u2.shift(), _ = k + u2.shift(), m = b + u2.shift(), y = _ + u2.shift(), e2.U.P.curveTo(l, E, k, b, _, m, y);
          } else if (x == "o26") for (u2.length % 2 && (m += u2.shift()); u2.length > 0; ) E = m, k = y + u2.shift(), m = b = E + u2.shift(), y = (_ = k + u2.shift()) + u2.shift(), e2.U.P.curveTo(l, E, k, b, _, m, y);
          else if (x == "o27") for (u2.length % 2 && (y += u2.shift()); u2.length > 0; ) k = y, b = (E = m + u2.shift()) + u2.shift(), _ = k + u2.shift(), m = b + u2.shift(), y = _, e2.U.P.curveTo(l, E, k, b, _, m, y);
          else if (x == "o10" || x == "o29") {
            var O = x == "o10" ? s2 : a;
            if (u2.length == 0) console.debug("error: empty stack");
            else {
              var M2 = u2.pop(), V = O.Subrs[M2 + O.Bias];
              n.x = m, n.y = y, n.nStems = c2, n.haveWidth = f, n.width = d, n.open = h, e2.U._drawCFF(V, n, a, s2, l), m = n.x, y = n.y, c2 = n.nStems, f = n.haveWidth, d = n.width, h = n.open;
            }
          } else if (x == "o30" || x == "o31") {
            var R2 = u2.length, N = (ne = 0, x == "o31");
            for (ne += R2 - (L = -3 & R2); ne < L; ) N ? (k = y, b = (E = m + u2.shift()) + u2.shift(), y = (_ = k + u2.shift()) + u2.shift(), L - ne == 5 ? (m = b + u2.shift(), ne++) : m = b, N = false) : (E = m, k = y + u2.shift(), b = E + u2.shift(), _ = k + u2.shift(), m = b + u2.shift(), L - ne == 5 ? (y = _ + u2.shift(), ne++) : y = _, N = true), e2.U.P.curveTo(l, E, k, b, _, m, y), ne += 4;
          } else {
            if ((x + "").charAt(0) == "o") throw console.debug("Unknown operation: " + x, i), x;
            u2.push(x);
          }
        }
      }
      n.x = m, n.y = y, n.nStems = c2, n.haveWidth = f, n.width = d, n.open = h;
    };
    var r = e2, o = { Typr: r };
    return t20.Typr = r, t20.default = o, Object.defineProperty(t20, "__esModule", { value: true }), t20;
  }({}).Typr;
}
function vh() {
  return function(t20) {
    var e2 = Uint8Array, r = Uint16Array, o = Uint32Array, i = new e2([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]), n = new e2([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]), a = new e2([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), s2 = function(x, L) {
      for (var D = new r(31), Z = 0; Z < 31; ++Z) D[Z] = L += 1 << x[Z - 1];
      var F = new o(D[30]);
      for (Z = 1; Z < 30; ++Z) for (var ne = D[Z]; ne < D[Z + 1]; ++ne) F[ne] = ne - D[Z] << 5 | Z;
      return [D, F];
    }, l = s2(i, 2), u2 = l[0], c2 = l[1];
    u2[28] = 258, c2[258] = 28;
    for (var f = s2(n, 0)[0], d = new r(32768), h = 0; h < 32768; ++h) {
      var g = (43690 & h) >>> 1 | (21845 & h) << 1;
      g = (61680 & (g = (52428 & g) >>> 2 | (13107 & g) << 2)) >>> 4 | (3855 & g) << 4, d[h] = ((65280 & g) >>> 8 | (255 & g) << 8) >>> 1;
    }
    var m = function(x, L, D) {
      for (var Z = x.length, F = 0, ne = new r(L); F < Z; ++F) ++ne[x[F] - 1];
      var oe, B = new r(L);
      for (F = 0; F < L; ++F) B[F] = B[F - 1] + ne[F - 1] << 1;
      if (D) {
        oe = new r(1 << L);
        var G = 15 - L;
        for (F = 0; F < Z; ++F) if (x[F]) for (var v2 = F << 4 | x[F], S = L - x[F], C = B[x[F] - 1]++ << S, O = C | (1 << S) - 1; C <= O; ++C) oe[d[C] >>> G] = v2;
      } else for (oe = new r(Z), F = 0; F < Z; ++F) x[F] && (oe[F] = d[B[x[F] - 1]++] >>> 15 - x[F]);
      return oe;
    }, y = new e2(288);
    for (h = 0; h < 144; ++h) y[h] = 8;
    for (h = 144; h < 256; ++h) y[h] = 9;
    for (h = 256; h < 280; ++h) y[h] = 7;
    for (h = 280; h < 288; ++h) y[h] = 8;
    var E = new e2(32);
    for (h = 0; h < 32; ++h) E[h] = 5;
    var k = m(y, 9, 1), b = m(E, 5, 1), _ = function(x) {
      for (var L = x[0], D = 1; D < x.length; ++D) x[D] > L && (L = x[D]);
      return L;
    }, w2 = function(x, L, D) {
      var Z = L / 8 | 0;
      return (x[Z] | x[Z + 1] << 8) >> (7 & L) & D;
    }, P = function(x, L) {
      var D = L / 8 | 0;
      return (x[D] | x[D + 1] << 8 | x[D + 2] << 16) >> (7 & L);
    }, T = ["unexpected EOF", "invalid block type", "invalid length/literal", "invalid distance", "stream finished", "no stream handler", , "no callback", "invalid UTF-8 data", "extra field too long", "date not in range 1980-2099", "filename too long", "stream finishing", "invalid zip data"], A = function(x, L, D) {
      var Z = new Error(L || T[x]);
      if (Z.code = x, Error.captureStackTrace && Error.captureStackTrace(Z, A), !D) throw Z;
      return Z;
    }, z = function(x, L, D) {
      var Z = x.length;
      if (!Z || D && !D.l && Z < 5) return L || new e2(0);
      var F = !L || D, ne = !D || D.i;
      D || (D = {}), L || (L = new e2(3 * Z));
      var oe, B = function(ye) {
        var Ne = L.length;
        if (ye > Ne) {
          var ze2 = new e2(Math.max(2 * Ne, ye));
          ze2.set(L), L = ze2;
        }
      }, G = D.f || 0, v2 = D.p || 0, S = D.b || 0, C = D.l, O = D.d, M2 = D.m, V = D.n, R2 = 8 * Z;
      do {
        if (!C) {
          D.f = G = w2(x, v2, 1);
          var N = w2(x, v2 + 1, 3);
          if (v2 += 3, !N) {
            var Q = x[(ce = ((oe = v2) / 8 | 0) + (7 & oe && 1) + 4) - 4] | x[ce - 3] << 8, se = ce + Q;
            if (se > Z) {
              ne && A(0);
              break;
            }
            F && B(S + Q), L.set(x.subarray(ce, se), S), D.b = S += Q, D.p = v2 = 8 * se;
            continue;
          }
          if (N == 1) C = k, O = b, M2 = 9, V = 5;
          else if (N == 2) {
            var Y = w2(x, v2, 31) + 257, W = w2(x, v2 + 10, 15) + 4, Se = Y + w2(x, v2 + 5, 31) + 1;
            v2 += 14;
            for (var ve2 = new e2(Se), te = new e2(19), le = 0; le < W; ++le) te[a[le]] = w2(x, v2 + 3 * le, 7);
            v2 += 3 * W;
            var he = _(te), X = (1 << he) - 1, ue = m(te, he, 1);
            for (le = 0; le < Se; ) {
              var ce, j = ue[w2(x, v2, X)];
              if (v2 += 15 & j, (ce = j >>> 4) < 16) ve2[le++] = ce;
              else {
                var ke2 = 0, ie = 0;
                for (ce == 16 ? (ie = 3 + w2(x, v2, 3), v2 += 2, ke2 = ve2[le - 1]) : ce == 17 ? (ie = 3 + w2(x, v2, 7), v2 += 3) : ce == 18 && (ie = 11 + w2(x, v2, 127), v2 += 7); ie--; ) ve2[le++] = ke2;
              }
            }
            var pe = ve2.subarray(0, Y), ee = ve2.subarray(Y);
            M2 = _(pe), V = _(ee), C = m(pe, M2, 1), O = m(ee, V, 1);
          } else A(1);
          if (v2 > R2) {
            ne && A(0);
            break;
          }
        }
        F && B(S + 131072);
        for (var Pe2 = (1 << M2) - 1, de2 = (1 << V) - 1, me = v2; ; me = v2) {
          var be = (ke2 = C[P(x, v2) & Pe2]) >>> 4;
          if ((v2 += 15 & ke2) > R2) {
            ne && A(0);
            break;
          }
          if (ke2 || A(2), be < 256) L[S++] = be;
          else {
            if (be == 256) {
              me = v2, C = null;
              break;
            }
            var Ce = be - 254;
            if (be > 264) {
              var Ge = i[le = be - 257];
              Ce = w2(x, v2, (1 << Ge) - 1) + u2[le], v2 += Ge;
            }
            var Ze = O[P(x, v2) & de2], Ee = Ze >>> 4;
            if (Ze || A(3), v2 += 15 & Ze, ee = f[Ee], Ee > 3 && (Ge = n[Ee], ee += P(x, v2) & (1 << Ge) - 1, v2 += Ge), v2 > R2) {
              ne && A(0);
              break;
            }
            F && B(S + 131072);
            for (var Ae2 = S + Ce; S < Ae2; S += 4) L[S] = L[S - ee], L[S + 1] = L[S + 1 - ee], L[S + 2] = L[S + 2 - ee], L[S + 3] = L[S + 3 - ee];
            S = Ae2;
          }
        }
        D.l = C, D.p = me, D.b = S, C && (G = 1, D.m = M2, D.d = O, D.n = V);
      } while (!G);
      return S == L.length ? L : function(ye, Ne, ze2) {
        (Ne == null || Ne < 0) && (Ne = 0), (ze2 == null || ze2 > ye.length) && (ze2 = ye.length);
        var it = new (ye instanceof r ? r : ye instanceof o ? o : e2)(ze2 - Ne);
        return it.set(ye.subarray(Ne, ze2)), it;
      }(L, 0, S);
    }, U = new e2(0), q2 = typeof TextDecoder < "u" && new TextDecoder();
    try {
      q2.decode(U, { stream: true });
    } catch {
    }
    return t20.convert_streams = function(x) {
      var L = new DataView(x), D = 0;
      function Z() {
        var Y = L.getUint16(D);
        return D += 2, Y;
      }
      function F() {
        var Y = L.getUint32(D);
        return D += 4, Y;
      }
      function ne(Y) {
        Q.setUint16(se, Y), se += 2;
      }
      function oe(Y) {
        Q.setUint32(se, Y), se += 4;
      }
      for (var B = { signature: F(), flavor: F(), length: F(), numTables: Z(), reserved: Z(), totalSfntSize: F(), majorVersion: Z(), minorVersion: Z(), metaOffset: F(), metaLength: F(), metaOrigLength: F(), privOffset: F(), privLength: F() }, G = 0; Math.pow(2, G) <= B.numTables; ) G++;
      G--;
      for (var v2 = 16 * Math.pow(2, G), S = 16 * B.numTables - v2, C = 12, O = [], M2 = 0; M2 < B.numTables; M2++) O.push({ tag: F(), offset: F(), compLength: F(), origLength: F(), origChecksum: F() }), C += 16;
      var V, R2 = new Uint8Array(12 + 16 * O.length + O.reduce(function(Y, W) {
        return Y + W.origLength + 4;
      }, 0)), N = R2.buffer, Q = new DataView(N), se = 0;
      return oe(B.flavor), ne(B.numTables), ne(v2), ne(G), ne(S), O.forEach(function(Y) {
        oe(Y.tag), oe(Y.origChecksum), oe(C), oe(Y.origLength), Y.outOffset = C, (C += Y.origLength) % 4 != 0 && (C += 4 - C % 4);
      }), O.forEach(function(Y) {
        var W, Se = x.slice(Y.offset, Y.offset + Y.compLength);
        if (Y.compLength != Y.origLength) {
          var ve2 = new Uint8Array(Y.origLength);
          W = new Uint8Array(Se, 2), z(W, ve2);
        } else ve2 = new Uint8Array(Se);
        R2.set(ve2, Y.outOffset);
        var te = 0;
        (C = Y.outOffset + Y.origLength) % 4 != 0 && (te = 4 - C % 4), R2.set(new Uint8Array(te).buffer, Y.outOffset + Y.origLength), V = C + te;
      }), N.slice(0, V);
    }, Object.defineProperty(t20, "__esModule", { value: true }), t20;
  }({}).convert_streams;
}
function yh(t20, e2) {
  let r = { M: 2, L: 2, Q: 4, C: 6, Z: 0 }, o = { C: "18g,ca,368,1kz", D: "17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v", R: "17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6", L: "x9u,jff,a,fd,jv", T: "4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n" }, i = 1, n = 2, a = 4, s2 = 8, l = 16, u2 = 32, c2;
  function f(T) {
    if (!c2) {
      let A = { R: n, L: i, D: a, C: l, U: u2, T: s2 };
      c2 = /* @__PURE__ */ new Map();
      for (let z in o) {
        let U = 0;
        o[z].split(",").forEach((q2) => {
          let [x, L] = q2.split("+");
          x = parseInt(x, 36), L = L ? parseInt(L, 36) : 0, c2.set(U += x, A[z]);
          for (let D = L; D--; ) c2.set(++U, A[z]);
        });
      }
    }
    return c2.get(T) || u2;
  }
  let d = 1, h = 2, g = 3, m = 4, y = [null, "isol", "init", "fina", "medi"];
  function E(T) {
    let A = new Uint8Array(T.length), z = u2, U = d, q2 = -1;
    for (let x = 0; x < T.length; x++) {
      let L = T.codePointAt(x), D = f(L) | 0, Z = d;
      D & s2 || (z & (i | a | l) ? D & (n | a | l) ? (Z = g, (U === d || U === g) && A[q2]++) : D & (i | u2) && (U === h || U === m) && A[q2]-- : z & (n | u2) && (U === h || U === m) && A[q2]--, U = A[x] = Z, z = D, q2 = x, L > 65535 && x++);
    }
    return A;
  }
  function k(T, A) {
    let z = [];
    for (let q2 = 0; q2 < A.length; q2++) {
      let x = A.codePointAt(q2);
      x > 65535 && q2++, z.push(t20.U.codeToGlyph(T, x));
    }
    let U = T.GSUB;
    if (U) {
      let { lookupList: q2, featureList: x } = U, L, D = /^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/, Z = [];
      x.forEach((F) => {
        if (D.test(F.tag)) for (let ne = 0; ne < F.tab.length; ne++) {
          if (Z[F.tab[ne]]) continue;
          Z[F.tab[ne]] = true;
          let oe = q2[F.tab[ne]], B = /^(isol|init|fina|medi)$/.test(F.tag);
          B && !L && (L = E(A));
          for (let G = 0; G < z.length; G++) (!L || !B || y[L[G]] === F.tag) && t20.U._applySubs(z, G, oe, q2);
        }
      });
    }
    return z;
  }
  function b(T, A) {
    let z = new Int16Array(A.length * 3), U = 0;
    for (; U < A.length; U++) {
      let D = A[U];
      if (D === -1) continue;
      z[U * 3 + 2] = T.hmtx.aWidth[D];
      let Z = T.GPOS;
      if (Z) {
        let F = Z.lookupList;
        for (let ne = 0; ne < F.length; ne++) {
          let oe = F[ne];
          for (let B = 0; B < oe.tabs.length; B++) {
            let G = oe.tabs[B];
            if (oe.ltype === 1) {
              if (t20._lctf.coverageIndex(G.coverage, D) !== -1 && G.pos) {
                L(G.pos, U);
                break;
              }
            } else if (oe.ltype === 2) {
              let v2 = null, S = q2();
              if (S !== -1) {
                let C = t20._lctf.coverageIndex(G.coverage, A[S]);
                if (C !== -1) {
                  if (G.fmt === 1) {
                    let O = G.pairsets[C];
                    for (let M2 = 0; M2 < O.length; M2++) O[M2].gid2 === D && (v2 = O[M2]);
                  } else if (G.fmt === 2) {
                    let O = t20.U._getGlyphClass(A[S], G.classDef1), M2 = t20.U._getGlyphClass(D, G.classDef2);
                    v2 = G.matrix[O][M2];
                  }
                  if (v2) {
                    v2.val1 && L(v2.val1, S), v2.val2 && L(v2.val2, U);
                    break;
                  }
                }
              }
            } else if (oe.ltype === 4) {
              let v2 = t20._lctf.coverageIndex(G.markCoverage, D);
              if (v2 !== -1) {
                let S = q2(x), C = S === -1 ? -1 : t20._lctf.coverageIndex(G.baseCoverage, A[S]);
                if (C !== -1) {
                  let O = G.markArray[v2], M2 = G.baseArray[C][O.markClass];
                  z[U * 3] = M2.x - O.x + z[S * 3] - z[S * 3 + 2], z[U * 3 + 1] = M2.y - O.y + z[S * 3 + 1];
                  break;
                }
              }
            } else if (oe.ltype === 6) {
              let v2 = t20._lctf.coverageIndex(G.mark1Coverage, D);
              if (v2 !== -1) {
                let S = q2();
                if (S !== -1) {
                  let C = A[S];
                  if (_(T, C) === 3) {
                    let O = t20._lctf.coverageIndex(G.mark2Coverage, C);
                    if (O !== -1) {
                      let M2 = G.mark1Array[v2], V = G.mark2Array[O][M2.markClass];
                      z[U * 3] = V.x - M2.x + z[S * 3] - z[S * 3 + 2], z[U * 3 + 1] = V.y - M2.y + z[S * 3 + 1];
                      break;
                    }
                  }
                }
              }
            }
          }
        }
      } else if (T.kern && !T.cff) {
        let F = q2();
        if (F !== -1) {
          let ne = T.kern.glyph1.indexOf(A[F]);
          if (ne !== -1) {
            let oe = T.kern.rval[ne].glyph2.indexOf(D);
            oe !== -1 && (z[F * 3 + 2] += T.kern.rval[ne].vals[oe]);
          }
        }
      }
    }
    return z;
    function q2(D) {
      for (let Z = U - 1; Z >= 0; Z--) if (A[Z] !== -1 && (!D || D(A[Z]))) return Z;
      return -1;
    }
    function x(D) {
      return _(T, D) === 1;
    }
    function L(D, Z) {
      for (let F = 0; F < 3; F++) z[Z * 3 + F] += D[F] || 0;
    }
  }
  function _(T, A) {
    let z = T.GDEF && T.GDEF.glyphClassDef;
    return z ? t20.U._getGlyphClass(A, z) : 0;
  }
  function w2(...T) {
    for (let A = 0; A < T.length; A++) if (typeof T[A] == "number") return T[A];
  }
  function P(T) {
    let A = /* @__PURE__ */ Object.create(null), z = T["OS/2"], U = T.hhea, q2 = T.head.unitsPerEm, x = w2(z && z.sTypoAscender, U && U.ascender, q2), L = { unitsPerEm: q2, ascender: x, descender: w2(z && z.sTypoDescender, U && U.descender, 0), capHeight: w2(z && z.sCapHeight, x), xHeight: w2(z && z.sxHeight, x), lineGap: w2(z && z.sTypoLineGap, U && U.lineGap), supportsCodePoint(D) {
      return t20.U.codeToGlyph(T, D) > 0;
    }, forEachGlyph(D, Z, F, ne) {
      let oe = 0, B = 1 / L.unitsPerEm * Z, G = k(T, D), v2 = 0, S = b(T, G);
      return G.forEach((C, O) => {
        if (C !== -1) {
          let M2 = A[C];
          if (!M2) {
            let { cmds: V, crds: R2 } = t20.U.glyphToPath(T, C), N = "", Q = 0;
            for (let ve2 = 0, te = V.length; ve2 < te; ve2++) {
              let le = r[V[ve2]];
              N += V[ve2];
              for (let he = 1; he <= le; he++) N += (he > 1 ? "," : "") + R2[Q++];
            }
            let se, Y, W, Se;
            if (R2.length) {
              se = Y = 1 / 0, W = Se = -1 / 0;
              for (let ve2 = 0, te = R2.length; ve2 < te; ve2 += 2) {
                let le = R2[ve2], he = R2[ve2 + 1];
                le < se && (se = le), he < Y && (Y = he), le > W && (W = le), he > Se && (Se = he);
              }
            } else se = W = Y = Se = 0;
            M2 = A[C] = { index: C, advanceWidth: T.hmtx.aWidth[C], xMin: se, yMin: Y, xMax: W, yMax: Se, path: N };
          }
          ne.call(null, M2, oe + S[O * 3] * B, S[O * 3 + 1] * B, v2), oe += S[O * 3 + 2] * B, F && (oe += F * Z);
        }
        v2 += D.codePointAt(v2) > 65535 ? 2 : 1;
      }), oe;
    } };
    return L;
  }
  return function(A) {
    let z = new Uint8Array(A, 0, 4), U = t20._bin.readASCII(z, 0, 4);
    if (U === "wOFF") A = e2(A);
    else if (U === "wOF2") throw new Error("woff2 fonts not supported");
    return P(t20.parse(A)[0]);
  };
}
var bh = Ar({ name: "Typr Font Parser", dependencies: [gh, vh, yh], init(t20, e2, r) {
  let o = t20(), i = e2();
  return r(o, i);
} });
function xh() {
  return function(t20) {
    var e2 = function() {
      this.buckets = /* @__PURE__ */ new Map();
    };
    e2.prototype.add = function(b) {
      var _ = b >> 5;
      this.buckets.set(_, (this.buckets.get(_) || 0) | 1 << (31 & b));
    }, e2.prototype.has = function(b) {
      var _ = this.buckets.get(b >> 5);
      return _ !== void 0 && (_ & 1 << (31 & b)) != 0;
    }, e2.prototype.serialize = function() {
      var b = [];
      return this.buckets.forEach(function(_, w2) {
        b.push((+w2).toString(36) + ":" + _.toString(36));
      }), b.join(",");
    }, e2.prototype.deserialize = function(b) {
      var _ = this;
      this.buckets.clear(), b.split(",").forEach(function(w2) {
        var P = w2.split(":");
        _.buckets.set(parseInt(P[0], 36), parseInt(P[1], 36));
      });
    };
    var r = Math.pow(2, 8), o = r - 1, i = ~o;
    function n(b) {
      var _ = function(P) {
        return P & i;
      }(b).toString(16), w2 = function(P) {
        return (P & i) + r - 1;
      }(b).toString(16);
      return "codepoint-index/plane" + (b >> 16) + "/" + _ + "-" + w2 + ".json";
    }
    function a(b, _) {
      var w2 = b & o, P = _.codePointAt(w2 / 6 | 0);
      return ((P = (P || 48) - 48) & 1 << w2 % 6) != 0;
    }
    function s2(b, _) {
      var w2;
      (w2 = b, w2.replace(/U\+/gi, "").replace(/^,+|,+$/g, "").split(/,+/).map(function(P) {
        return P.split("-").map(function(T) {
          return parseInt(T.trim(), 16);
        });
      })).forEach(function(P) {
        var T = P[0], A = P[1];
        A === void 0 && (A = T), _(T, A);
      });
    }
    function l(b, _) {
      s2(b, function(w2, P) {
        for (var T = w2; T <= P; T++) _(T);
      });
    }
    var u2 = {}, c2 = {}, f = /* @__PURE__ */ new WeakMap(), d = "https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";
    function h(b) {
      var _ = f.get(b);
      return _ || (_ = new e2(), l(b.ranges, function(w2) {
        return _.add(w2);
      }), f.set(b, _)), _;
    }
    var g, m = /* @__PURE__ */ new Map();
    function y(b, _, w2) {
      return b[_] ? _ : b[w2] ? w2 : function(P) {
        for (var T in P) return T;
      }(b);
    }
    function E(b, _) {
      var w2 = _;
      if (!b.includes(w2)) {
        w2 = 1 / 0;
        for (var P = 0; P < b.length; P++) Math.abs(b[P] - _) < Math.abs(w2 - _) && (w2 = b[P]);
      }
      return w2;
    }
    function k(b) {
      return g || (g = /* @__PURE__ */ new Set(), l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000", function(_) {
        g.add(_);
      })), g.has(b);
    }
    return t20.CodePointSet = e2, t20.clearCache = function() {
      u2 = {}, c2 = {};
    }, t20.getFontsForString = function(b, _) {
      _ === void 0 && (_ = {});
      var w2, P = _.lang;
      P === void 0 && (P = new RegExp("\\p{Script=Hangul}", "u").test(w2 = b) ? "ko" : new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}", "u").test(w2) ? "ja" : "en");
      var T = _.category;
      T === void 0 && (T = "sans-serif");
      var A = _.style;
      A === void 0 && (A = "normal");
      var z = _.weight;
      z === void 0 && (z = 400);
      var U = (_.dataUrl || d).replace(/\/$/g, ""), q2 = /* @__PURE__ */ new Map(), x = new Uint8Array(b.length), L = {}, D = {}, Z = new Array(b.length), F = /* @__PURE__ */ new Map(), ne = false;
      function oe(v2) {
        var S = m.get(v2);
        return S || (S = fetch(U + "/" + v2).then(function(C) {
          if (!C.ok) throw new Error(C.statusText);
          return C.json().then(function(O) {
            if (!Array.isArray(O) || O[0] !== 1) throw new Error("Incorrect schema version; need 1, got " + O[0]);
            return O[1];
          });
        }).catch(function(C) {
          if (U !== d) return ne || (console.error('unicode-font-resolver: Failed loading from dataUrl "' + U + '", trying default CDN. ' + C.message), ne = true), U = d, m.delete(v2), oe(v2);
          throw C;
        }), m.set(v2, S)), S;
      }
      for (var B = function(v2) {
        var S = b.codePointAt(v2), C = n(S);
        Z[v2] = C, u2[C] || F.has(C) || F.set(C, oe(C).then(function(O) {
          u2[C] = O;
        })), S > 65535 && (v2++, G = v2);
      }, G = 0; G < b.length; G++) B(G);
      return Promise.all(F.values()).then(function() {
        F.clear();
        for (var v2 = function(C) {
          var O = b.codePointAt(C), M2 = null, V = u2[Z[C]], R2 = void 0;
          for (var N in V) {
            var Q = D[N];
            if (Q === void 0 && (Q = D[N] = new RegExp(N).test(P || "en")), Q) {
              for (var se in R2 = N, V[N]) if (a(O, V[N][se])) {
                M2 = se;
                break;
              }
              break;
            }
          }
          if (!M2) {
            e: for (var Y in V) if (Y !== R2) {
              for (var W in V[Y]) if (a(O, V[Y][W])) {
                M2 = W;
                break e;
              }
            }
          }
          M2 || (console.debug("No font coverage for U+" + O.toString(16)), M2 = "latin"), Z[C] = M2, c2[M2] || F.has(M2) || F.set(M2, oe("font-meta/" + M2 + ".json").then(function(Se) {
            c2[M2] = Se;
          })), O > 65535 && (C++, S = C);
        }, S = 0; S < b.length; S++) v2(S);
        return Promise.all(F.values());
      }).then(function() {
        for (var v2, S = null, C = 0; C < b.length; C++) {
          var O = b.codePointAt(C);
          if (S && (k(O) || h(S).has(O))) x[C] = x[C - 1];
          else {
            S = c2[Z[C]];
            var M2 = L[S.id];
            if (!M2) {
              var V = S.typeforms, R2 = y(V, T, "sans-serif"), N = y(V[R2], A, "normal"), Q = E((v2 = V[R2]) === null || v2 === void 0 ? void 0 : v2[N], z);
              M2 = L[S.id] = U + "/font-files/" + S.id + "/" + R2 + "." + N + "." + Q + ".woff";
            }
            var se = q2.get(M2);
            se == null && (se = q2.size, q2.set(M2, se)), x[C] = se;
          }
          O > 65535 && (C++, x[C] = x[C - 1]);
        }
        return { fontUrls: Array.from(q2.keys()), chars: x };
      });
    }, Object.defineProperty(t20, "__esModule", { value: true }), t20;
  }({});
}
function _h(t20, e2) {
  let r = /* @__PURE__ */ Object.create(null), o = /* @__PURE__ */ Object.create(null);
  function i(a, s2) {
    let l = (u2) => {
      console.error("Failure loading font ".concat(a), u2);
    };
    try {
      let u2 = new XMLHttpRequest();
      u2.open("get", a, true), u2.responseType = "arraybuffer", u2.onload = function() {
        if (u2.status >= 400) l(new Error(u2.statusText));
        else if (u2.status > 0) try {
          let c2 = t20(u2.response);
          c2.src = a, s2(c2);
        } catch (c2) {
          l(c2);
        }
      }, u2.onerror = l, u2.send();
    } catch (u2) {
      l(u2);
    }
  }
  function n(a, s2) {
    let l = r[a];
    l ? s2(l) : o[a] ? o[a].push(s2) : (o[a] = [s2], i(a, (u2) => {
      u2.src = a, r[a] = u2, o[a].forEach((c2) => c2(u2)), delete o[a];
    }));
  }
  return function(a, s2, { lang: l, fonts: u2 = [], style: c2 = "normal", weight: f = "normal", unicodeFontsURL: d } = {}) {
    let h = new Uint8Array(a.length), g = [];
    a.length || k();
    let m = /* @__PURE__ */ new Map(), y = [];
    if (c2 !== "italic" && (c2 = "normal"), typeof f != "number" && (f = f === "bold" ? 700 : 400), u2 && !Array.isArray(u2) && (u2 = [u2]), u2 = u2.slice().filter((_) => !_.lang || _.lang.test(l)).reverse(), u2.length) {
      let T = 0;
      (function A(z = 0) {
        for (let U = z, q2 = a.length; U < q2; U++) {
          let x = a.codePointAt(U);
          if (T === 1 && g[h[U - 1]].supportsCodePoint(x) || U > 0 && /\s/.test(a[U])) h[U] = h[U - 1], T === 2 && (y[y.length - 1][1] = U);
          else for (let L = h[U], D = u2.length; L <= D; L++) if (L === D) {
            let Z = T === 2 ? y[y.length - 1] : y[y.length] = [U, U];
            Z[1] = U, T = 2;
          } else {
            h[U] = L;
            let { src: Z, unicodeRange: F } = u2[L];
            if (!F || b(x, F)) {
              let ne = r[Z];
              if (!ne) {
                n(Z, () => {
                  A(U);
                });
                return;
              }
              if (ne.supportsCodePoint(x)) {
                let oe = m.get(ne);
                typeof oe != "number" && (oe = g.length, g.push(ne), m.set(ne, oe)), h[U] = oe, T = 1;
                break;
              }
            }
          }
          x > 65535 && U + 1 < q2 && (h[U + 1] = h[U], U++, T === 2 && (y[y.length - 1][1] = U));
        }
        E();
      })();
    } else y.push([0, a.length - 1]), E();
    function E() {
      if (y.length) {
        let _ = y.map((w2) => a.substring(w2[0], w2[1] + 1)).join("\n");
        e2.getFontsForString(_, { lang: l || void 0, style: c2, weight: f, dataUrl: d }).then(({ fontUrls: w2, chars: P }) => {
          let T = g.length, A = 0;
          y.forEach((U) => {
            for (let q2 = 0, x = U[1] - U[0]; q2 <= x; q2++) h[U[0] + q2] = P[A++] + T;
            A++;
          });
          let z = 0;
          w2.forEach((U, q2) => {
            n(U, (x) => {
              g[q2 + T] = x, ++z === w2.length && k();
            });
          });
        });
      } else k();
    }
    function k() {
      s2({ chars: h, fonts: g });
    }
    function b(_, w2) {
      for (let P = 0; P < w2.length; P++) {
        let [T, A = T] = w2[P];
        if (T <= _ && _ <= A) return true;
      }
      return false;
    }
  };
}
var Th = Ar({ name: "FontResolver", dependencies: [_h, bh, xh], init(t20, e2, r) {
  return t20(e2, r());
} });
function Sh(t20, e2) {
  let o = /[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/, i = "[^\\S\\u00A0]", n = new RegExp("".concat(i, "|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]"));
  function a({ text: g, lang: m, fonts: y, style: E, weight: k, preResolvedFonts: b, unicodeFontsURL: _ }, w2) {
    let P = ({ chars: T, fonts: A }) => {
      let z, U, q2 = [];
      for (let x = 0; x < T.length; x++) T[x] !== U ? (U = T[x], q2.push(z = { start: x, end: x, fontObj: A[T[x]] })) : z.end = x;
      w2(q2);
    };
    b ? P(b) : t20(g, P, { lang: m, fonts: y, style: E, weight: k, unicodeFontsURL: _ });
  }
  function s2({ text: g = "", font: m, lang: y, sdfGlyphSize: E = 64, fontSize: k = 400, fontWeight: b = 1, fontStyle: _ = "normal", letterSpacing: w2 = 0, lineHeight: P = "normal", maxWidth: T = 1 / 0, direction: A, textAlign: z = "left", textIndent: U = 0, whiteSpace: q2 = "normal", overflowWrap: x = "normal", anchorX: L = 0, anchorY: D = 0, metricsOnly: Z = false, unicodeFontsURL: F, preResolvedFonts: ne = null, includeCaretPositions: oe = false, chunkedBoundsSize: B = 8192, colorRanges: G = null }, v2) {
    let S = f(), C = { fontLoad: 0, typesetting: 0 };
    g.indexOf("\r") > -1 && (console.info("Typesetter: got text with \\r chars; normalizing to \\n"), g = g.replace(/\r\n/g, "\n").replace(/\r/g, "\n")), k = +k, w2 = +w2, T = +T, P = P || "normal", U = +U, a({ text: g, lang: y, style: _, weight: b, fonts: typeof m == "string" ? [{ src: m }] : m, unicodeFontsURL: F, preResolvedFonts: ne }, (O) => {
      C.fontLoad = f() - S;
      let M2 = isFinite(T), V = null, R2 = null, N = null, Q = null, se = null, Y = null, W = null, Se = null, ve2 = 0, te = 0, le = q2 !== "nowrap", he = /* @__PURE__ */ new Map(), X = f(), ue = U, ce = 0, j = new d(), ke2 = [j];
      O.forEach((de2) => {
        let { fontObj: me } = de2, { ascender: be, descender: Ce, unitsPerEm: Ge, lineGap: Ze, capHeight: Ee, xHeight: Ae2 } = me, ye = he.get(me);
        if (!ye) {
          let Te2 = k / Ge, Re = P === "normal" ? (be - Ce + Ze) * Te2 : P * k, Ht = (Re - (be - Ce) * Te2) / 2, Ue = Math.min(Re, (be - Ce) * Te2), Oe = (be + Ce) / 2 * Te2 + Ue / 2;
          ye = { index: he.size, src: me.src, fontObj: me, fontSizeMult: Te2, unitsPerEm: Ge, ascender: be * Te2, descender: Ce * Te2, capHeight: Ee * Te2, xHeight: Ae2 * Te2, lineHeight: Re, baseline: -Ht - be * Te2, caretTop: Oe, caretBottom: Oe - Ue }, he.set(me, ye);
        }
        let { fontSizeMult: Ne } = ye, ze2 = g.slice(de2.start, de2.end + 1), it, Fe2;
        me.forEachGlyph(ze2, k, w2, (Te2, Re, Ht, Ue) => {
          Re += ce, Ue += de2.start, it = Re, Fe2 = Te2;
          let Oe = g.charAt(Ue), Ye2 = Te2.advanceWidth * Ne, Ve = j.count, De;
          if ("isEmpty" in Te2 || (Te2.isWhitespace = !!Oe && new RegExp(i).test(Oe), Te2.canBreakAfter = !!Oe && n.test(Oe), Te2.isEmpty = Te2.xMin === Te2.xMax || Te2.yMin === Te2.yMax || o.test(Oe)), !Te2.isWhitespace && !Te2.isEmpty && te++, le && M2 && !Te2.isWhitespace && Re + Ye2 + ue > T && Ve) {
            if (j.glyphAt(Ve - 1).glyphObj.canBreakAfter) De = new d(), ue = -Re;
            else for (let $e = Ve; $e--; ) if ($e === 0 && x === "break-word") {
              De = new d(), ue = -Re;
              break;
            } else if (j.glyphAt($e).glyphObj.canBreakAfter) {
              De = j.splitAt($e + 1);
              let qe = De.glyphAt(0).x;
              ue -= qe;
              for (let Xe = De.count; Xe--; ) De.glyphAt(Xe).x -= qe;
              break;
            }
            De && (j.isSoftWrapped = true, j = De, ke2.push(j), ve2 = T);
          }
          let We = j.glyphAt(j.count);
          We.glyphObj = Te2, We.x = Re + ue, We.y = Ht, We.width = Ye2, We.charIndex = Ue, We.fontData = ye, Oe === "\n" && (j = new d(), ke2.push(j), ue = -(Re + Ye2 + w2 * k) + U);
        }), ce = it + Fe2.advanceWidth * Ne + w2 * k;
      });
      let ie = 0;
      ke2.forEach((de2) => {
        let me = true;
        for (let be = de2.count; be--; ) {
          let Ce = de2.glyphAt(be);
          me && !Ce.glyphObj.isWhitespace && (de2.width = Ce.x + Ce.width, de2.width > ve2 && (ve2 = de2.width), me = false);
          let { lineHeight: Ge, capHeight: Ze, xHeight: Ee, baseline: Ae2 } = Ce.fontData;
          Ge > de2.lineHeight && (de2.lineHeight = Ge);
          let ye = Ae2 - de2.baseline;
          ye < 0 && (de2.baseline += ye, de2.cap += ye, de2.ex += ye), de2.cap = Math.max(de2.cap, de2.baseline + Ze), de2.ex = Math.max(de2.ex, de2.baseline + Ee);
        }
        de2.baseline -= ie, de2.cap -= ie, de2.ex -= ie, ie += de2.lineHeight;
      });
      let pe = 0, ee = 0;
      if (L && (typeof L == "number" ? pe = -L : typeof L == "string" && (pe = -ve2 * (L === "left" ? 0 : L === "center" ? 0.5 : L === "right" ? 1 : u2(L)))), D && (typeof D == "number" ? ee = -D : typeof D == "string" && (ee = D === "top" ? 0 : D === "top-baseline" ? -ke2[0].baseline : D === "top-cap" ? -ke2[0].cap : D === "top-ex" ? -ke2[0].ex : D === "middle" ? ie / 2 : D === "bottom" ? ie : D === "bottom-baseline" ? -ke2[ke2.length - 1].baseline : u2(D) * ie)), !Z) {
        let de2 = e2.getEmbeddingLevels(g, A);
        V = new Uint16Array(te), R2 = new Uint8Array(te), N = new Float32Array(te * 2), Q = {}, W = [1 / 0, 1 / 0, -1 / 0, -1 / 0], Se = [], oe && (Y = new Float32Array(g.length * 4)), G && (se = new Uint8Array(te * 3));
        let me = 0, be = -1, Ce = -1, Ge, Ze;
        if (ke2.forEach((Ee, Ae2) => {
          let { count: ye, width: Ne } = Ee;
          if (ye > 0) {
            let ze2 = 0;
            for (let Ue = ye; Ue-- && Ee.glyphAt(Ue).glyphObj.isWhitespace; ) ze2++;
            let it = 0, Fe2 = 0;
            if (z === "center") it = (ve2 - Ne) / 2;
            else if (z === "right") it = ve2 - Ne;
            else if (z === "justify" && Ee.isSoftWrapped) {
              let Ue = 0;
              for (let Oe = ye - ze2; Oe--; ) Ee.glyphAt(Oe).glyphObj.isWhitespace && Ue++;
              Fe2 = (ve2 - Ne) / Ue;
            }
            if (Fe2 || it) {
              let Ue = 0;
              for (let Oe = 0; Oe < ye; Oe++) {
                let Ye2 = Ee.glyphAt(Oe), Ve = Ye2.glyphObj;
                Ye2.x += it + Ue, Fe2 !== 0 && Ve.isWhitespace && Oe < ye - ze2 && (Ue += Fe2, Ye2.width += Fe2);
              }
            }
            let Te2 = e2.getReorderSegments(g, de2, Ee.glyphAt(0).charIndex, Ee.glyphAt(Ee.count - 1).charIndex);
            for (let Ue = 0; Ue < Te2.length; Ue++) {
              let [Oe, Ye2] = Te2[Ue], Ve = 1 / 0, De = -1 / 0;
              for (let We = 0; We < ye; We++) if (Ee.glyphAt(We).charIndex >= Oe) {
                let $e = We, qe = We;
                for (; qe < ye; qe++) {
                  let Xe = Ee.glyphAt(qe);
                  if (Xe.charIndex > Ye2) break;
                  qe < ye - ze2 && (Ve = Math.min(Ve, Xe.x), De = Math.max(De, Xe.x + Xe.width));
                }
                for (let Xe = $e; Xe < qe; Xe++) {
                  let yt = Ee.glyphAt(Xe);
                  yt.x = De - (yt.x + yt.width - Ve);
                }
                break;
              }
            }
            let Re, Ht = (Ue) => Re = Ue;
            for (let Ue = 0; Ue < ye; Ue++) {
              let Oe = Ee.glyphAt(Ue);
              Re = Oe.glyphObj;
              let Ye2 = Re.index, Ve = de2.levels[Oe.charIndex] & 1;
              if (Ve) {
                let De = e2.getMirroredCharacter(g[Oe.charIndex]);
                De && Oe.fontData.fontObj.forEachGlyph(De, 0, 0, Ht);
              }
              if (oe) {
                let { charIndex: De, fontData: We } = Oe, $e = Oe.x + pe, qe = Oe.x + Oe.width + pe;
                Y[De * 4] = Ve ? qe : $e, Y[De * 4 + 1] = Ve ? $e : qe, Y[De * 4 + 2] = Ee.baseline + We.caretBottom + ee, Y[De * 4 + 3] = Ee.baseline + We.caretTop + ee;
                let Xe = De - be;
                Xe > 1 && c2(Y, be, Xe), be = De;
              }
              if (G) {
                let { charIndex: De } = Oe;
                for (; De > Ce; ) Ce++, G.hasOwnProperty(Ce) && (Ze = G[Ce]);
              }
              if (!Re.isWhitespace && !Re.isEmpty) {
                let De = me++, { fontSizeMult: We, src: $e, index: qe } = Oe.fontData, Xe = Q[$e] || (Q[$e] = {});
                Xe[Ye2] || (Xe[Ye2] = { path: Re.path, pathBounds: [Re.xMin, Re.yMin, Re.xMax, Re.yMax] });
                let yt = Oe.x + pe, Zt = Oe.y + Ee.baseline + ee;
                N[De * 2] = yt, N[De * 2 + 1] = Zt;
                let Rt = yt + Re.xMin * We, Yt = Zt + Re.yMin * We, or = yt + Re.xMax * We, Ut = Zt + Re.yMax * We;
                Rt < W[0] && (W[0] = Rt), Yt < W[1] && (W[1] = Yt), or > W[2] && (W[2] = or), Ut > W[3] && (W[3] = Ut), De % B === 0 && (Ge = { start: De, end: De, rect: [1 / 0, 1 / 0, -1 / 0, -1 / 0] }, Se.push(Ge)), Ge.end++;
                let et = Ge.rect;
                if (Rt < et[0] && (et[0] = Rt), Yt < et[1] && (et[1] = Yt), or > et[2] && (et[2] = or), Ut > et[3] && (et[3] = Ut), V[De] = Ye2, R2[De] = qe, G) {
                  let ar = De * 3;
                  se[ar] = Ze >> 16 & 255, se[ar + 1] = Ze >> 8 & 255, se[ar + 2] = Ze & 255;
                }
              }
            }
          }
        }), Y) {
          let Ee = g.length - be;
          Ee > 1 && c2(Y, be, Ee);
        }
      }
      let Pe2 = [];
      he.forEach(({ index: de2, src: me, unitsPerEm: be, ascender: Ce, descender: Ge, lineHeight: Ze, capHeight: Ee, xHeight: Ae2 }) => {
        Pe2[de2] = { src: me, unitsPerEm: be, ascender: Ce, descender: Ge, lineHeight: Ze, capHeight: Ee, xHeight: Ae2 };
      }), C.typesetting = f() - X, v2({ glyphIds: V, glyphFontIndices: R2, glyphPositions: N, glyphData: Q, fontData: Pe2, caretPositions: Y, glyphColors: se, chunkedBounds: Se, fontSize: k, topBaseline: ee + ke2[0].baseline, blockBounds: [pe, ee - ie, pe + ve2, ee], visibleBounds: W, timings: C });
    });
  }
  function l(g, m) {
    s2({ ...g, metricsOnly: true }, (y) => {
      let [E, k, b, _] = y.blockBounds;
      m({ width: b - E, height: _ - k });
    });
  }
  function u2(g) {
    let m = g.match(/^([\d.]+)%$/), y = m ? parseFloat(m[1]) : NaN;
    return isNaN(y) ? 0 : y / 100;
  }
  function c2(g, m, y) {
    let E = g[m * 4], k = g[m * 4 + 1], b = g[m * 4 + 2], _ = g[m * 4 + 3], w2 = (k - E) / y;
    for (let P = 0; P < y; P++) {
      let T = (m + P) * 4;
      g[T] = E + w2 * P, g[T + 1] = E + w2 * (P + 1), g[T + 2] = b, g[T + 3] = _;
    }
  }
  function f() {
    return (self.performance || Date).now();
  }
  function d() {
    this.data = [];
  }
  let h = ["glyphObj", "x", "y", "width", "charIndex", "fontData"];
  return d.prototype = { width: 0, lineHeight: 0, baseline: 0, cap: 0, ex: 0, isSoftWrapped: false, get count() {
    return Math.ceil(this.data.length / h.length);
  }, glyphAt(g) {
    let m = d.flyweight;
    return m.data = this.data, m.index = g, m;
  }, splitAt(g) {
    let m = new d();
    return m.data = this.data.splice(g * h.length), m;
  } }, d.flyweight = h.reduce((g, m, y, E) => (Object.defineProperty(g, m, { get() {
    return this.data[this.index * h.length + y];
  }, set(k) {
    this.data[this.index * h.length + y] = k;
  } }), g), { data: null, index: 0 }), { typeset: s2, measure: l };
}
var Pr = () => (self.performance || Date).now();
var Li = Ho();
var Cl;
function kh(t20, e2, r, o, i, n, a, s2, l, u2, c2 = true) {
  return c2 ? Mh(t20, e2, r, o, i, n, a, s2, l, u2).then(null, (f) => (Cl || (console.warn("WebGL SDF generation failed, falling back to JS", f), Cl = true), El(t20, e2, r, o, i, n, a, s2, l, u2))) : El(t20, e2, r, o, i, n, a, s2, l, u2);
}
var Ri = [];
var wh = 5;
var qo = 0;
function Bl() {
  let t20 = Pr();
  for (; Ri.length && Pr() - t20 < wh; ) Ri.shift()();
  qo = Ri.length ? setTimeout(Bl, 0) : 0;
}
var Mh = (...t20) => new Promise((e2, r) => {
  Ri.push(() => {
    let o = Pr();
    try {
      Li.webgl.generateIntoCanvas(...t20), e2({ timing: Pr() - o });
    } catch (i) {
      r(i);
    }
  }), qo || (qo = setTimeout(Bl, 0));
});
var Ch = 4;
var Dh = 2e3;
var Dl = {};
var Eh = 0;
function El(t20, e2, r, o, i, n, a, s2, l, u2) {
  let c2 = "TroikaTextSDFGenerator_JS_" + Eh++ % Ch, f = Dl[c2];
  return f || (f = Dl[c2] = { workerModule: Ar({ name: c2, workerId: c2, dependencies: [Ho, Pr], init(d, h) {
    let g = d().javascript.generate;
    return function(...m) {
      let y = h();
      return { textureData: g(...m), timing: h() - y };
    };
  }, getTransferables(d) {
    return [d.textureData.buffer];
  } }), requests: 0, idleTimer: null }), f.requests++, clearTimeout(f.idleTimer), f.workerModule(t20, e2, r, o, i, n).then(({ textureData: d, timing: h }) => {
    let g = Pr(), m = new Uint8Array(d.length * 4);
    for (let y = 0; y < d.length; y++) m[y * 4 + u2] = d[y];
    return Li.webglUtils.renderImageData(a, m, s2, l, t20, e2, 1 << 3 - u2), h += Pr() - g, --f.requests === 0 && (f.idleTimer = setTimeout(() => {
      _l(c2);
    }, Dh)), { timing: h };
  });
}
function Ah(t20) {
  t20._warm || (Li.webgl.isSupported(t20), t20._warm = true);
}
var Oh = Li.webglUtils.resizeWebGLCanvasWithoutClearing;
var Ir = { defaultFontURL: null, unicodeFontsURL: null, sdfGlyphSize: 64, sdfMargin: 1 / 16, sdfExponent: 9, textureWidth: 2048, useWorker: true };
var Ih = new Nt();
var Ph = false;
function on() {
  return (self.performance || Date).now();
}
var Al = /* @__PURE__ */ Object.create(null);
function Nl(t20, e2) {
  Ph = true, t20 = Uh({}, t20);
  let r = on(), { defaultFontURL: o } = Ir, i = [];
  if (o && i.push({ label: "default", src: Ol(o) }), t20.font && i.push({ label: "user", src: Ol(t20.font) }), t20.font = i, t20.text = "" + t20.text, t20.sdfGlyphSize = t20.sdfGlyphSize || Ir.sdfGlyphSize, t20.unicodeFontsURL = t20.unicodeFontsURL || Ir.unicodeFontsURL, t20.colorRanges != null) {
    let h = {};
    for (let g in t20.colorRanges) if (t20.colorRanges.hasOwnProperty(g)) {
      let m = t20.colorRanges[g];
      typeof m != "number" && (m = Ih.set(m).getHex()), h[g] = m;
    }
    t20.colorRanges = h;
  }
  Object.freeze(t20);
  let { textureWidth: n, sdfExponent: a } = Ir, { sdfGlyphSize: s2 } = t20, l = n / s2 * 4, u2 = Al[s2];
  if (!u2) {
    let h = document.createElement("canvas");
    h.width = n, h.height = s2 * 256 / l, u2 = Al[s2] = { glyphCount: 0, sdfGlyphSize: s2, sdfCanvas: h, sdfTexture: new Ae(h, void 0, void 0, void 0, tn, tn), contextLost: false, glyphsByFont: /* @__PURE__ */ new Map() }, u2.sdfTexture.generateMipmaps = false, Rh(u2);
  }
  let { sdfTexture: c2, sdfCanvas: f } = u2;
  (Ir.useWorker ? Vl : Gh)(t20).then((h) => {
    let { glyphIds: g, glyphFontIndices: m, fontData: y, glyphPositions: E, fontSize: k, timings: b } = h, _ = [], w2 = new Float32Array(g.length * 4), P = 0, T = 0, A = on(), z = y.map((D) => {
      let Z = u2.glyphsByFont.get(D.src);
      return Z || u2.glyphsByFont.set(D.src, Z = /* @__PURE__ */ new Map()), Z;
    });
    g.forEach((D, Z) => {
      let F = m[Z], { src: ne, unitsPerEm: oe } = y[F], B = z[F].get(D);
      if (!B) {
        let { path: O, pathBounds: M2 } = h.glyphData[ne][D], V = Math.max(M2[2] - M2[0], M2[3] - M2[1]) / s2 * (Ir.sdfMargin * s2 + 0.5), R2 = u2.glyphCount++, N = [M2[0] - V, M2[1] - V, M2[2] + V, M2[3] + V];
        z[F].set(D, B = { path: O, atlasIndex: R2, sdfViewBox: N }), _.push(B);
      }
      let { sdfViewBox: G } = B, v2 = E[T++], S = E[T++], C = k / oe;
      w2[P++] = v2 + G[0] * C, w2[P++] = S + G[1] * C, w2[P++] = v2 + G[2] * C, w2[P++] = S + G[3] * C, g[Z] = B.atlasIndex;
    }), b.quads = (b.quads || 0) + (on() - A);
    let U = on();
    b.sdf = {};
    let q2 = f.height, x = Math.ceil(u2.glyphCount / l), L = Math.pow(2, Math.ceil(Math.log2(x * s2)));
    L > q2 && (console.info("Increasing SDF texture size ".concat(q2, "->").concat(L)), Oh(f, n, L), c2.dispose()), Promise.all(_.map((D) => jl(D, u2, t20.gpuAccelerateSDF).then(({ timing: Z }) => {
      b.sdf[D.atlasIndex] = Z;
    }))).then(() => {
      _.length && !u2.contextLost && (zl(u2), c2.needsUpdate = true), b.sdfTotal = on() - U, b.total = on() - r, e2(Object.freeze({ parameters: t20, sdfTexture: c2, sdfGlyphSize: s2, sdfExponent: a, glyphBounds: w2, glyphAtlasIndices: g, glyphColors: h.glyphColors, caretPositions: h.caretPositions, chunkedBounds: h.chunkedBounds, ascender: h.ascender, descender: h.descender, lineHeight: h.lineHeight, capHeight: h.capHeight, xHeight: h.xHeight, topBaseline: h.topBaseline, blockBounds: h.blockBounds, visibleBounds: h.visibleBounds, timings: h.timings }));
    });
  }), Promise.resolve().then(() => {
    u2.contextLost || Ah(f);
  });
}
function jl({ path: t20, atlasIndex: e2, sdfViewBox: r }, { sdfGlyphSize: o, sdfCanvas: i, contextLost: n }, a) {
  if (n) return Promise.resolve({ timing: -1 });
  let { textureWidth: s2, sdfExponent: l } = Ir, u2 = Math.max(r[2] - r[0], r[3] - r[1]), c2 = Math.floor(e2 / 4), f = c2 % (s2 / o) * o, d = Math.floor(c2 / (s2 / o)) * o, h = e2 % 4;
  return kh(o, o, t20, r, u2, l, i, f, d, h, a);
}
function Rh(t20) {
  let e2 = t20.sdfCanvas;
  e2.addEventListener("webglcontextlost", (r) => {
    console.log("Context Lost", r), r.preventDefault(), t20.contextLost = true;
  }), e2.addEventListener("webglcontextrestored", (r) => {
    console.log("Context Restored", r), t20.contextLost = false;
    let o = [];
    t20.glyphsByFont.forEach((i) => {
      i.forEach((n) => {
        o.push(jl(n, t20, true));
      });
    }), Promise.all(o).then(() => {
      zl(t20), t20.sdfTexture.needsUpdate = true;
    });
  });
}
function ea({ font: t20, characters: e2, sdfGlyphSize: r }, o) {
  let i = Array.isArray(e2) ? e2.join("\n") : "" + e2;
  Nl({ font: t20, sdfGlyphSize: r, text: i }, o);
}
function Uh(t20, e2) {
  for (let r in e2) e2.hasOwnProperty(r) && (t20[r] = e2[r]);
  return t20;
}
var Ii;
function Ol(t20) {
  return Ii || (Ii = typeof document > "u" ? {} : document.createElement("a")), Ii.href = t20, Ii.href;
}
function zl(t20) {
  if (typeof createImageBitmap != "function") {
    console.info("Safari<15: applying SDF canvas workaround");
    let { sdfCanvas: e2, sdfTexture: r } = t20, { width: o, height: i } = e2, n = t20.sdfCanvas.getContext("webgl"), a = r.image.data;
    (!a || a.length !== o * i * 4) && (a = new Uint8Array(o * i * 4), r.image = { width: o, height: i, data: a }, r.flipY = false, r.isDataTexture = true), n.readPixels(0, 0, o, i, n.RGBA, n.UNSIGNED_BYTE, a);
  }
}
var Lh = Ar({ name: "Typesetter", dependencies: [Sh, Th, Tl], init(t20, e2, r) {
  return t20(e2, r());
} });
var Vl = Ar({ name: "Typesetter", dependencies: [Lh], init(t20) {
  return function(e2) {
    return new Promise((r) => {
      t20.typeset(e2, r);
    });
  };
}, getTransferables(t20) {
  let e2 = [];
  for (let r in t20) t20[r] && t20[r].buffer && e2.push(t20[r].buffer);
  return e2;
} });
var Gh = Vl.onMainThread;
var Il = {};
function Fh(t20) {
  let e2 = Il[t20];
  return e2 || (e2 = Il[t20] = new Ps(1, 1, t20, t20).translate(0.5, 0.5, 0)), e2;
}
var Ui = "aTroikaGlyphBounds";
var Bn = "aTroikaGlyphIndex";
var Bh = "aTroikaGlyphColor";
var Qo = class extends Ml {
  constructor() {
    super(), this.detail = 1, this.curveRadius = 0, this.groups = [{ start: 0, count: 1 / 0, materialIndex: 0 }, { start: 0, count: 1 / 0, materialIndex: 1 }], this.boundingSphere = new Te(), this.boundingBox = new Ie();
  }
  computeBoundingSphere() {
  }
  computeBoundingBox() {
  }
  set detail(e2) {
    if (e2 !== this._detail) {
      this._detail = e2, (typeof e2 != "number" || e2 < 1) && (e2 = 1);
      let r = Fh(e2);
      ["position", "normal", "uv"].forEach((o) => {
        this.attributes[o] = r.attributes[o].clone();
      }), this.setIndex(r.getIndex().clone());
    }
  }
  get detail() {
    return this._detail;
  }
  set curveRadius(e2) {
    e2 !== this._curveRadius && (this._curveRadius = e2, this._updateBounds());
  }
  get curveRadius() {
    return this._curveRadius;
  }
  updateGlyphs(e2, r, o, i, n) {
    this.updateAttributeData(Ui, e2, 4), this.updateAttributeData(Bn, r, 1), this.updateAttributeData(Bh, n, 3), this._blockBounds = o, this._chunkedBounds = i, this.instanceCount = r.length, this._updateBounds();
  }
  _updateBounds() {
    let e2 = this._blockBounds;
    if (e2) {
      let { curveRadius: r, boundingBox: o } = this;
      if (r) {
        let { PI: i, floor: n, min: a, max: s2, sin: l, cos: u2 } = Math, c2 = i / 2, f = i * 2, d = Math.abs(r), h = e2[0] / d, g = e2[2] / d, m = n((h + c2) / f) !== n((g + c2) / f) ? -d : a(l(h) * d, l(g) * d), y = n((h - c2) / f) !== n((g - c2) / f) ? d : s2(l(h) * d, l(g) * d), E = n((h + i) / f) !== n((g + i) / f) ? d * 2 : s2(d - u2(h) * d, d - u2(g) * d);
        o.min.set(m, e2[1], r < 0 ? -E : 0), o.max.set(y, e2[3], r < 0 ? 0 : E);
      } else o.min.set(e2[0], e2[1], 0), o.max.set(e2[2], e2[3], 0);
      o.getBoundingSphere(this.boundingSphere);
    }
  }
  applyClipRect(e2) {
    let r = this.getAttribute(Bn).count, o = this._chunkedBounds;
    if (o) for (let i = o.length; i--; ) {
      r = o[i].end;
      let n = o[i].rect;
      if (n[1] < e2.w && n[3] > e2.y && n[0] < e2.z && n[2] > e2.x) break;
    }
    this.instanceCount = r;
  }
  updateAttributeData(e2, r, o) {
    let i = this.getAttribute(e2);
    r ? i && i.array.length === r.length ? (i.array.set(r), i.needsUpdate = true) : (this.setAttribute(e2, new xs(r, o)), delete this._maxInstanceCount, this.dispose()) : i && this.deleteAttribute(e2);
  }
};
var Nh = "\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaEdgeOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n";
var jh = "\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n";
var zh = "\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaEdgeOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n";
var Vh = "\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n";
function Wl(t20) {
  let e2 = nn(t20, { chained: true, extensions: { derivatives: true }, uniforms: { uTroikaSDFTexture: { value: null }, uTroikaSDFTextureSize: { value: new at() }, uTroikaSDFGlyphSize: { value: 0 }, uTroikaSDFExponent: { value: 0 }, uTroikaTotalBounds: { value: new Jt(0, 0, 0, 0) }, uTroikaClipRect: { value: new Jt(0, 0, 0, 0) }, uTroikaEdgeOffset: { value: 0 }, uTroikaFillOpacity: { value: 1 }, uTroikaPositionOffset: { value: new at() }, uTroikaCurveRadius: { value: 0 }, uTroikaBlurRadius: { value: 0 }, uTroikaStrokeWidth: { value: 0 }, uTroikaStrokeColor: { value: new Nt() }, uTroikaStrokeOpacity: { value: 1 }, uTroikaOrient: { value: new Ot() }, uTroikaUseGlyphColors: { value: true }, uTroikaSDFDebug: { value: false } }, vertexDefs: Nh, vertexTransform: jh, fragmentDefs: zh, fragmentColorTransform: Vh, customRewriter({ vertexShader: r, fragmentShader: o }) {
    let i = /\buniform\s+vec3\s+diffuse\b/;
    return i.test(o) && (o = o.replace(i, "varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g, "vTroikaGlyphColor"), i.test(r) || (r = r.replace(Yo, "uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))), { vertexShader: r, fragmentShader: o };
  } });
  return e2.transparent = true, e2.forceSinglePass = true, Object.defineProperties(e2, { isTroikaTextMaterial: { value: true }, shadowSide: { get() {
    return this.side;
  }, set() {
  } } }), e2;
}
var ta = new fs({ color: 16777215, side: ln, transparent: true });
var Pl = 8421504;
var Rl = new kt();
var Pi = new R();
var Xo = new R();
var Fn = [];
var Wh = new R();
var Ko = "+x+y";
function Ul(t20) {
  return Array.isArray(t20) ? t20[0] : t20;
}
var Hl = () => {
  let t20 = new ve(new Ps(1, 1), ta);
  return Hl = () => t20, t20;
};
var Zl = () => {
  let t20 = new ve(new Ps(1, 1, 32, 1), ta);
  return Zl = () => t20, t20;
};
var Hh = { type: "syncstart" };
var Zh = { type: "synccomplete" };
var Yl = ["font", "fontSize", "fontStyle", "fontWeight", "lang", "letterSpacing", "lineHeight", "maxWidth", "overflowWrap", "text", "direction", "textAlign", "textIndent", "whiteSpace", "anchorX", "anchorY", "colorRanges", "sdfGlyphSize"];
var Yh = Yl.concat("material", "color", "depthOffset", "clipRect", "curveRadius", "orientation", "glyphGeometryDetail");
var sn = class extends ve {
  constructor() {
    let e2 = new Qo();
    super(e2, null), this.text = "", this.anchorX = 0, this.anchorY = 0, this.curveRadius = 0, this.direction = "auto", this.font = null, this.unicodeFontsURL = null, this.fontSize = 0.1, this.fontWeight = "normal", this.fontStyle = "normal", this.lang = null, this.letterSpacing = 0, this.lineHeight = "normal", this.maxWidth = 1 / 0, this.overflowWrap = "normal", this.textAlign = "left", this.textIndent = 0, this.whiteSpace = "normal", this.material = null, this.color = null, this.colorRanges = null, this.outlineWidth = 0, this.outlineColor = 0, this.outlineOpacity = 1, this.outlineBlur = 0, this.outlineOffsetX = 0, this.outlineOffsetY = 0, this.strokeWidth = 0, this.strokeColor = Pl, this.strokeOpacity = 1, this.fillOpacity = 1, this.depthOffset = 0, this.clipRect = null, this.orientation = Ko, this.glyphGeometryDetail = 1, this.sdfGlyphSize = null, this.gpuAccelerateSDF = true, this.debugSDF = false;
  }
  sync(e2) {
    this._needsSync && (this._needsSync = false, this._isSyncing ? (this._queuedSyncs || (this._queuedSyncs = [])).push(e2) : (this._isSyncing = true, this.dispatchEvent(Hh), Nl({ text: this.text, font: this.font, lang: this.lang, fontSize: this.fontSize || 0.1, fontWeight: this.fontWeight || "normal", fontStyle: this.fontStyle || "normal", letterSpacing: this.letterSpacing || 0, lineHeight: this.lineHeight || "normal", maxWidth: this.maxWidth, direction: this.direction || "auto", textAlign: this.textAlign, textIndent: this.textIndent, whiteSpace: this.whiteSpace, overflowWrap: this.overflowWrap, anchorX: this.anchorX, anchorY: this.anchorY, colorRanges: this.colorRanges, includeCaretPositions: true, sdfGlyphSize: this.sdfGlyphSize, gpuAccelerateSDF: this.gpuAccelerateSDF, unicodeFontsURL: this.unicodeFontsURL }, (r) => {
      this._isSyncing = false, this._textRenderInfo = r, this.geometry.updateGlyphs(r.glyphBounds, r.glyphAtlasIndices, r.blockBounds, r.chunkedBounds, r.glyphColors);
      let o = this._queuedSyncs;
      o && (this._queuedSyncs = null, this._needsSync = true, this.sync(() => {
        o.forEach((i) => i && i());
      })), this.dispatchEvent(Zh), e2 && e2();
    })));
  }
  onBeforeRender(e2, r, o, i, n, a) {
    this.sync(), n.isTroikaTextMaterial && this._prepareForRender(n);
  }
  dispose() {
    this.geometry.dispose();
  }
  get textRenderInfo() {
    return this._textRenderInfo || null;
  }
  createDerivedMaterial(e2) {
    return Wl(e2);
  }
  get material() {
    let e2 = this._derivedMaterial, r = this._baseMaterial || this._defaultMaterial || (this._defaultMaterial = ta.clone());
    if ((!e2 || !e2.isDerivedFrom(r)) && (e2 = this._derivedMaterial = this.createDerivedMaterial(r), r.addEventListener("dispose", function o() {
      r.removeEventListener("dispose", o), e2.dispose();
    })), this.hasOutline()) {
      let o = e2._outlineMtl;
      return o || (o = e2._outlineMtl = Object.create(e2, { id: { value: e2.id + 0.1 } }), o.isTextOutlineMaterial = true, o.depthWrite = false, o.map = null, e2.addEventListener("dispose", function i() {
        e2.removeEventListener("dispose", i), o.dispose();
      })), [o, e2];
    } else return e2;
  }
  set material(e2) {
    e2 && e2.isTroikaTextMaterial ? (this._derivedMaterial = e2, this._baseMaterial = e2.baseMaterial) : this._baseMaterial = e2;
  }
  hasOutline() {
    return !!(this.outlineWidth || this.outlineBlur || this.outlineOffsetX || this.outlineOffsetY);
  }
  get glyphGeometryDetail() {
    return this.geometry.detail;
  }
  set glyphGeometryDetail(e2) {
    this.geometry.detail = e2;
  }
  get curveRadius() {
    return this.geometry.curveRadius;
  }
  set curveRadius(e2) {
    this.geometry.curveRadius = e2;
  }
  get customDepthMaterial() {
    return Ul(this.material).getDepthMaterial();
  }
  get customDistanceMaterial() {
    return Ul(this.material).getDistanceMaterial();
  }
  _prepareForRender(e2) {
    let r = e2.isTextOutlineMaterial, o = e2.uniforms, i = this.textRenderInfo;
    if (i) {
      let { sdfTexture: s2, blockBounds: l } = i;
      o.uTroikaSDFTexture.value = s2, o.uTroikaSDFTextureSize.value.set(s2.image.width, s2.image.height), o.uTroikaSDFGlyphSize.value = i.sdfGlyphSize, o.uTroikaSDFExponent.value = i.sdfExponent, o.uTroikaTotalBounds.value.fromArray(l), o.uTroikaUseGlyphColors.value = !r && !!i.glyphColors;
      let u2 = 0, c2 = 0, f = 0, d, h, g, m = 0, y = 0;
      if (r) {
        let { outlineWidth: k, outlineOffsetX: b, outlineOffsetY: _, outlineBlur: w2, outlineOpacity: P } = this;
        u2 = this._parsePercent(k) || 0, c2 = Math.max(0, this._parsePercent(w2) || 0), d = P, m = this._parsePercent(b) || 0, y = this._parsePercent(_) || 0;
      } else f = Math.max(0, this._parsePercent(this.strokeWidth) || 0), f && (g = this.strokeColor, o.uTroikaStrokeColor.value.set(g == null ? Pl : g), h = this.strokeOpacity, h == null && (h = 1)), d = this.fillOpacity;
      o.uTroikaEdgeOffset.value = u2, o.uTroikaPositionOffset.value.set(m, y), o.uTroikaBlurRadius.value = c2, o.uTroikaStrokeWidth.value = f, o.uTroikaStrokeOpacity.value = h, o.uTroikaFillOpacity.value = d == null ? 1 : d, o.uTroikaCurveRadius.value = this.curveRadius || 0;
      let E = this.clipRect;
      if (E && Array.isArray(E) && E.length === 4) o.uTroikaClipRect.value.fromArray(E);
      else {
        let k = (this.fontSize || 0.1) * 100;
        o.uTroikaClipRect.value.set(l[0] - k, l[1] - k, l[2] + k, l[3] + k);
      }
      this.geometry.applyClipRect(o.uTroikaClipRect.value);
    }
    o.uTroikaSDFDebug.value = !!this.debugSDF, e2.polygonOffset = !!this.depthOffset, e2.polygonOffsetFactor = e2.polygonOffsetUnits = this.depthOffset || 0;
    let n = r ? this.outlineColor || 0 : this.color;
    if (n == null) delete e2.color;
    else {
      let s2 = e2.hasOwnProperty("color") ? e2.color : e2.color = new Nt();
      (n !== s2._input || typeof n == "object") && s2.set(s2._input = n);
    }
    let a = this.orientation || Ko;
    if (a !== e2._orientation) {
      let s2 = o.uTroikaOrient.value;
      a = a.replace(/[^-+xyz]/g, "");
      let l = a !== Ko && a.match(/^([-+])([xyz])([-+])([xyz])$/);
      if (l) {
        let [, u2, c2, f, d] = l;
        Pi.set(0, 0, 0)[c2] = u2 === "-" ? 1 : -1, Xo.set(0, 0, 0)[d] = f === "-" ? -1 : 1, Rl.lookAt(Wh, Pi.cross(Xo), Xo), s2.setFromMatrix4(Rl);
      } else s2.identity();
      e2._orientation = a;
    }
  }
  _parsePercent(e2) {
    if (typeof e2 == "string") {
      let r = e2.match(/^(-?[\d.]+)%$/), o = r ? parseFloat(r[1]) : NaN;
      e2 = (isNaN(o) ? 0 : o / 100) * this.fontSize;
    }
    return e2;
  }
  localPositionToTextCoords(e2, r = new at()) {
    r.copy(e2);
    let o = this.curveRadius;
    return o && (r.x = Math.atan2(e2.x, Math.abs(o) - Math.abs(e2.z)) * Math.abs(o)), r;
  }
  worldPositionToTextCoords(e2, r = new at()) {
    return Pi.copy(e2), this.localPositionToTextCoords(this.worldToLocal(Pi), r);
  }
  raycast(e2, r) {
    let { textRenderInfo: o, curveRadius: i } = this;
    if (o) {
      let n = o.blockBounds, a = i ? Zl() : Hl(), s2 = a.geometry, { position: l, uv: u2 } = s2.attributes;
      for (let c2 = 0; c2 < u2.count; c2++) {
        let f = n[0] + u2.getX(c2) * (n[2] - n[0]), d = n[1] + u2.getY(c2) * (n[3] - n[1]), h = 0;
        i && (h = i - Math.cos(f / i) * i, f = Math.sin(f / i) * i), l.setXYZ(c2, f, d, h);
      }
      s2.boundingSphere = this.geometry.boundingSphere, s2.boundingBox = this.geometry.boundingBox, a.matrixWorld = this.matrixWorld, a.material.side = this.material.side, Fn.length = 0, a.raycast(e2, Fn);
      for (let c2 = 0; c2 < Fn.length; c2++) Fn[c2].object = this, r.push(Fn[c2]);
    }
  }
  copy(e2) {
    let r = this.geometry;
    return super.copy(e2), this.geometry = r, Yh.forEach((o) => {
      this[o] = e2[o];
    }), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
Yl.forEach((t20) => {
  let e2 = "_private_" + t20;
  Object.defineProperty(sn.prototype, t20, { get() {
    return this[e2];
  }, set(r) {
    r !== this[e2] && (this[e2] = r, this._needsSync = true);
  } });
});
var Xh = { type: "syncstart" };
var Kh = { type: "synccomplete" };
var an = "aTroikaTextBatchMemberIndex";
var $o = 32;
var Ll = new Ie();
var Gl = new Nt();
var Fl = class t18 extends sn {
  constructor() {
    super(), this._members = /* @__PURE__ */ new Map(), this._dataTextures = {}, this._onMemberSynced = (e2) => {
      this._members.get(e2.target).dirty = true;
    };
  }
  add(...e2) {
    for (let r = 0; r < e2.length; r++) e2[r] instanceof sn ? this.addText(e2[r]) : super.add(e2[r]);
    return this;
  }
  remove(...e2) {
    for (let r = 0; r < e2.length; r++) e2[r] instanceof sn ? this.removeText(e2[r]) : super.remove(e2[r]);
    return this;
  }
  addText(e2) {
    this._members.has(e2) || (this._members.set(e2, { index: -1, glyphCount: -1, dirty: true }), e2.addEventListener("synccomplete", this._onMemberSynced));
  }
  removeText(e2) {
    this._needsRepack = true, e2.removeEventListener("synccomplete", this._onMemberSynced), this._members.delete(e2);
  }
  createDerivedMaterial(e2) {
    return Jh(e2);
  }
  updateMatrixWorld(e2) {
    super.updateMatrixWorld(e2), this.updateBounds();
  }
  updateBounds() {
    let e2 = this.geometry.boundingBox.makeEmpty();
    this._members.forEach((r, o) => {
      o.matrixAutoUpdate && o.updateMatrix(), Ll.copy(o.geometry.boundingBox).applyMatrix4(o.matrix), e2.union(Ll);
    }), e2.getBoundingSphere(this.geometry.boundingSphere);
  }
  hasOutline() {
    for (let e2 of this._members.keys()) if (e2.hasOutline()) return true;
    return false;
  }
  _prepareForRender(e2) {
    let r = e2.isTextOutlineMaterial;
    e2.uniforms.uTroikaIsOutline.value = r;
    let o = this._dataTextures[r ? "outline" : "main"], i = Math.pow(2, Math.ceil(Math.log2(this._members.size * $o)));
    if (!o || i !== o.image.data.length) {
      o && o.dispose();
      let s2 = Math.min(i / 4, 1024);
      o = this._dataTextures[r ? "outline" : "main"] = new On(new Float32Array(i), s2, i / 4 / s2, Pe, Fe);
    }
    let n = o.image.data, a = (s2, l) => {
      l !== n[s2] && (n[s2] = l, o.needsUpdate = true);
    };
    this._members.forEach(({ index: s2, dirty: l }, u2) => {
      if (s2 > -1) {
        let c2 = s2 * $o, f = u2.matrix.elements;
        for (let T = 0; T < 16; T++) a(c2 + T, f[T]);
        u2._prepareForRender(e2);
        let { uTroikaTotalBounds: d, uTroikaClipRect: h, uTroikaPositionOffset: g, uTroikaEdgeOffset: m, uTroikaBlurRadius: y, uTroikaStrokeWidth: E, uTroikaStrokeColor: k, uTroikaStrokeOpacity: b, uTroikaFillOpacity: _, uTroikaCurveRadius: w2 } = e2.uniforms;
        for (let T = 0; T < 4; T++) a(c2 + 16 + T, d.value.getComponent(T));
        for (let T = 0; T < 4; T++) a(c2 + 20 + T, h.value.getComponent(T));
        let P = r ? u2.outlineColor || 0 : u2.color;
        P == null && (P = this.color), P == null && (P = this.material.color), P == null && (P = 16777215), a(c2 + 24, Gl.set(P).getHex()), a(c2 + 25, _.value), a(c2 + 26, w2.value), r ? (a(c2 + 28, g.value.x), a(c2 + 29, g.value.y), a(c2 + 30, m.value), a(c2 + 31, y.value)) : (a(c2 + 28, E.value), a(c2 + 29, Gl.set(k.value).getHex()), a(c2 + 30, b.value));
      }
    }), e2.setMatrixTexture(o), super._prepareForRender(e2);
  }
  sync(e2) {
    let r = this._needsRepack ? [] : null;
    this._needsRepack = false, this._members.forEach((o, i) => {
      (o.dirty || i._needsSync) && (o.dirty = false, (r || (r = [])).push(new Promise((n) => {
        i._needsSync ? i.sync(n) : n();
      })));
    }), r && (this.dispatchEvent(Xh), Promise.all(r).then(() => {
      let { geometry: o } = this, i = o.attributes, n = i[an] && i[an].array || new Uint16Array(0), a = i[Bn] && i[Bn].array || new Float32Array(0), s2 = i[Ui] && i[Ui].array || new Float32Array(0), l = 0;
      this._members.forEach((f, { textRenderInfo: d }) => {
        d && (l += d.glyphAtlasIndices.length, this._textRenderInfo = d);
      }), l !== n.length && (n = Jo2(n, l), a = Jo2(a, l), s2 = Jo2(s2, l * 4));
      let u2 = 0, c2 = 0;
      this._members.forEach((f, { textRenderInfo: d }) => {
        if (d) {
          let h = d.glyphAtlasIndices.length;
          n.fill(u2, c2, c2 + h), a.set(d.glyphAtlasIndices, c2, c2 + h), s2.set(d.glyphBounds, c2 * 4, (c2 + h) * 4), c2 += h, f.index = u2++;
        }
      }), o.updateAttributeData(an, n, 1), o.getAttribute(an).setUsage(Qu), o.updateAttributeData(Bn, a, 1), o.updateAttributeData(Ui, s2, 4), this.updateBounds(), this.dispatchEvent(Kh), e2 && e2();
    }));
  }
  copy(e2) {
    return e2 instanceof t18 && (super.copy(e2), this._members.forEach((r, o) => this.removeText(o)), e2._members.forEach((r, o) => this.addText(o))), this;
  }
  dispose() {
    super.dispose(), Object.values(this._dataTextures).forEach((e2) => e2.dispose());
  }
};
function Jo2(t20, e2) {
  let r = new t20.constructor(e2);
  return r.set(t20.subarray(0, e2)), r;
}
function Jh(t20) {
  let e2 = "uTroikaMatricesTexture", r = "uTroikaMatricesTextureSize", o = nn(t20, { chained: true, uniforms: { [r]: { value: new at() }, [e2]: { value: null } }, vertexDefs: "\n      uniform highp sampler2D ".concat(e2, ";\n      uniform vec2 ").concat(r, ";\n      attribute float ").concat(an, ";\n\n      vec4 troikaBatchTexel(float offset) {\n        offset += ").concat(an, " * ").concat($o.toFixed(1), " / 4.0;\n        float w = ").concat(r, ".x;\n        vec2 uv = (vec2(mod(offset, w), floor(offset / w)) + 0.5) / ").concat(r, ";\n        return texture2D(").concat(e2, ", uv);\n      }\n    "), vertexTransform: "\n      mat4 matrix = mat4(\n        troikaBatchTexel(0.0),\n        troikaBatchTexel(1.0),\n        troikaBatchTexel(2.0),\n        troikaBatchTexel(3.0)\n      );\n      position.xyz = (matrix * vec4(position, 1.0)).xyz;\n    " });
  return o = Wl(o), o = nn(o, { chained: true, uniforms: { uTroikaIsOutline: { value: false } }, customRewriter(i) {
    return ["uTroikaTotalBounds", "uTroikaClipRect", "uTroikaPositionOffset", "uTroikaEdgeOffset", "uTroikaBlurRadius", "uTroikaStrokeWidth", "uTroikaStrokeColor", "uTroikaStrokeOpacity", "uTroikaFillOpacity", "uTroikaCurveRadius", "diffuse"].forEach((a) => {
      i = qh2(i, a);
    }), i;
  }, vertexDefs: "\n      uniform bool uTroikaIsOutline;\n      vec3 troikaFloatToColor(float v) {\n        return mod(floor(vec3(v / 65536.0, v / 256.0, v)), 256.0) / 256.0;\n      }\n    ", vertexTransform: "\n      uTroikaTotalBounds = troikaBatchTexel(4.0);\n      uTroikaClipRect = troikaBatchTexel(5.0);\n      \n      vec4 data = troikaBatchTexel(6.0);\n      diffuse = troikaFloatToColor(data.x);\n      uTroikaFillOpacity = data.y;\n      uTroikaCurveRadius = data.z;\n      \n      data = troikaBatchTexel(7.0);\n      if (uTroikaIsOutline) {\n        if (data == vec4(0.0)) { // degenerate if zero outline\n          position = vec3(0.0);\n        } else {\n          uTroikaPositionOffset = data.xy;\n          uTroikaEdgeOffset = data.z;\n          uTroikaBlurRadius = data.w;\n        }\n      } else {\n        uTroikaStrokeWidth = data.x;\n        uTroikaStrokeColor = troikaFloatToColor(data.y);\n        uTroikaStrokeOpacity = data.z;\n      }\n    " }), o.setMatrixTexture = (i) => {
    o.uniforms[e2].value = i, o.uniforms[r].value.set(i.image.width, i.image.height);
  }, o;
}
function qh2({ vertexShader: t20, fragmentShader: e2 }, r, o = r) {
  let i = new RegExp("uniform\\s+(bool|float|vec[234]|mat[34])\\s+".concat(r, "\\b")), n, a = false;
  e2 = e2.replace(i, (l, u2) => (a = true, "varying ".concat(n = u2, " ").concat(o)));
  let s2 = false;
  return t20 = t20.replace(i, (l, u2) => (s2 = true, "".concat(a ? "varying" : "", " ").concat(n = u2, " ").concat(o))), s2 || (t20 = "".concat(a ? "varying" : "", " ").concat(n, " ").concat(o, ";\n").concat(t20)), { vertexShader: t20, fragmentShader: e2 };
}
var Xl = "abcdefghijklmnopqrstuvwxyz";
function hv(t20) {
  return new Promise((e2, r) => {
    t20 ? typeof t20 == "string" ? ea({ font: t20, characters: Xl }, () => {
      e2(t20);
    }) : r(new Error("bad fontUrl ".concat(t20))) : import("./roboto-regular-E2V4PXOH-JIATAQKN.js").then((o) => {
      ea({ font: o.default, characters: Xl }, () => {
        e2(o.default);
      });
    });
  });
}
var ra = 0.1;
var Qh = new R();
function pv(t20, e2, r, o) {
  return e2 <= 0 || r <= 0 ? Promise.reject("incoorect dimension [".concat(e2, ", ").concat(r, "]")) : new Promise((i, n) => {
    t20.sync(a);
    function a() {
      if (!t20.geometry.boundingBox) return;
      let { x: s2, y: l } = t20.geometry.boundingBox.getSize(Qh);
      if (l > r || s2 > e2) {
        if (t20.fontSize === ra) return n("cannot find suitable font size for ".concat(t20.text, ". MaxSize: [").concat(e2, ", ").concat(r, "],  Current size: [").concat(s2, ", ").concat(l, "]. min font size").concat(ra, "."));
        t20.fontSize = Math.max(ra, t20.fontSize - o), t20.sync(a);
      } else return i({ size: [s2, l] });
    }
  });
}
function Kl(t20) {
  return new Promise((e2) => {
    t20.sync(() => {
      e2();
    });
  });
}
var Jl = class extends _n {
  constructor(r, o) {
    super();
    t(this, "rendererState");
    t(this, "convertTo3DMapPosition");
    t(this, "textSet", /* @__PURE__ */ new Set());
    t(this, "batchedTextMap", /* @__PURE__ */ new Map());
    t(this, "debugTextAreaMesh", /* @__PURE__ */ new Map());
    this.rendererState = r, this.convertTo3DMapPosition = o;
  }
  remove(r) {
    this.textSet.delete(r);
  }
  update(r) {
    var s2, l, u2;
    let o, i, n, a = [];
    for (let c2 of this.rendererState.geometry3DIdsInScene) if (o = this.rendererState.geometry3DMap.get(c2), (o == null ? void 0 : o.type) === "text3d") {
      i = o.components[0], n = o.components[1];
      let f = (s2 = i.mesh) == null ? void 0 : s2.parent;
      if (!f || !(f instanceof mt) || !(i instanceof Bi)) continue;
      if ("textArea" in i.feature.properties && i.mesh != null && i.polygonEntityId != null && i.textMesh == null && i.mesh.parent != null && ((u2 = (l = i.feature.properties) == null ? void 0 : l.textArea) == null ? void 0 : u2.position) != null) {
        if (this.textSet.has(i.polygonEntityId)) continue;
        this.textSet.add(i.polygonEntityId), this.batchedTextMap.has(f) || this.batchedTextMap.set(f, Gi().then(({ BatchedText: g }) => {
          let m = new g();
          return m.type = "batchedtext", f.add(m), m;
        }));
        let h = this.batchedTextMap.get(f);
        if (!h) throw new Error("batched text required");
        a.push(ql({ entityId: c2, textComponent: i, styleComponent: n, convertTo3DMapPosition: this.convertTo3DMapPosition, batchedMeshPromise: h, rendererState: this.rendererState, type: "text-area" }).then(() => {
          this.publish("render");
        }));
      } else if (i.mesh != null && i.textMesh == null && i.mesh.parent != null) {
        if (this.textSet.has(c2.toString())) continue;
        this.textSet.add(c2.toString()), this.batchedTextMap.has(f) || this.batchedTextMap.set(f, Gi().then(({ BatchedText: g }) => {
          let m = new g();
          return m.type = "batchedtext", f.add(m), m;
        }));
        let h = this.batchedTextMap.get(f);
        if (!h) throw new Error("batched text required");
        a.push(ql({ entityId: c2, textComponent: i, styleComponent: n, convertTo3DMapPosition: this.convertTo3DMapPosition, batchedMeshPromise: h, rendererState: this.rendererState, type: "point" }).then(() => {
          this.publish("render");
        }));
      }
      let d = this.batchedTextMap.get(f);
      i.textMesh && d && i.polygonEntityId != null && Promise.all([d, Promise.resolve({ meshComponent: i, styleComponent: n })]).then(([h, { meshComponent: g, styleComponent: m }]) => {
        let { textMesh: y } = g;
        if (h && y) {
          let E = oa(h, y);
          g.visible && !E ? h.add(y) : !g.visible && E && h.remove(y);
        }
        m.flipToFaceCamera && this.flipIfNeeded(g, r);
      });
    }
    return Promise.all(a);
  }
  flipIfNeeded(r, o) {
    let i = r.textMesh;
    if (!i) return false;
    let n = i.rotation.z, a = wi(n + o);
    a > Math.PI / 2 && a < 3 * Math.PI / 2 && (i.rotation.z = wi(n + Math.PI));
  }
  showTextAreaMesh() {
    let r, o;
    for (let i of this.rendererState.geometry3DIdsInScene) if (r = this.rendererState.geometry3DMap.get(i), (r == null ? void 0 : r.type) === "text3d" && (o = r.components[0], "textArea" in o.feature.properties)) {
      let n = o.feature.properties.textArea;
      if (!n) continue;
      let a = new Ps(n.maxWidth, n.maxHeight), s2 = new ve(a, new fs({ color: "pink" })), { textMesh: l } = o;
      if (!l) continue;
      let u2 = this.convertTo3DMapPosition(n.position, Nn);
      s2.position.copy(u2), s2.position.z = l.position.z - 0.1, s2.rotation.z = l.rotation.z, na.identity(), na.makeRotationAxis(new R(0, 0, 1), l.userData.rotationZ), Nn.set(n.maxWidth / 2, 0, 0), Nn.applyMatrix4(na), s2.position.x -= Nn.x, s2.position.y -= Nn.y, this.rendererState.entityScene.add(s2), this.debugTextAreaMesh.set(i, s2);
    }
    this.publish("render");
  }
  hideTextAreaMesh() {
    this.debugTextAreaMesh.forEach((r) => {
      this.rendererState.entityScene.remove(r);
    }), this.debugTextAreaMesh.clear(), this.publish("render");
  }
};
var na = new kt();
var Nn = new R();
var ia;
async function kv(t20) {
  let { preloadFont: e2 } = await Gi();
  return e2(t20);
}
function Gi() {
  return ia || (ia = import("./text3d-TIW6FORE-VOF5HWBM.js").then((t20) => t20)), ia;
}
async function ql({ entityId: t20, textComponent: e2, styleComponent: r, convertTo3DMapPosition: o, batchedMeshPromise: i, rendererState: n, type: a = "text-area" }) {
  return Promise.all([Gi(), Promise.resolve({ entityId: t20, meshComponent: e2, styleComponent: r })]).then(([{ createTroikaTextPoint: s2, createTroikaTextArea: l }, u2]) => a === "text-area" ? l(u2.entityId, u2.meshComponent, u2.styleComponent, o) : s2(u2.entityId, u2.meshComponent, u2.styleComponent, o)).catch((s2) => {
    Lt.warn("Trouble creating text: ", s2);
  }).then((s2) => {
    if (!(s2 != null && s2.text)) return;
    let l = [Promise.resolve(s2.text), i, Promise.resolve()];
    if (e2.polygonEntityId) {
      let u2 = n.geometry3DMap.get(e2.polygonEntityId);
      if ((u2 == null ? void 0 : u2.type) === "geometry") {
        let c2 = u2.components[0], f = u2.components[1];
        c2.textMesh = s2.text, c2.mesh != null && (s2.text.position.z = f.altitude + f.height + $h);
      }
    } else l[2] = Kl(s2.text);
    return Promise.all(l);
  }).then((s2) => {
    if (!s2) return;
    let [l, u2] = s2;
    u2.add(l), e2.batchedText || (e2.batchedText = u2);
  });
}
function oa(t20, e2) {
  return t20._members.has(e2);
}
var $h = 0.5;
var ep = K.object({ visible: K.boolean(), color: K.string(), flipToFaceCamera: K.boolean(), font: K.string().optional(), fontSize: K.number(), margin: K.union([K.number(), K.tuple([K.number(), K.number(), K.number(), K.number()])]), outlineColor: K.string(), outlineOpacity: K.number(), outlineBlur: K.union([K.number(), K.string()]), outlineWidth: K.number(), outlineOffsetX: K.number(), outlineOffsetY: K.number(), strokeWidth: K.number(), maxWidth: K.number().optional(), maxHeight: K.number().optional(), strokeOpacity: K.number(), strokeColor: K.string(), fillOpacity: K.number(), hoverColor: K.string().optional(), id: K.union([K.string(), K.number()]), type: K.literal("text3d"), position: K.tuple([K.number(), K.number(), K.number()]), content: K.string() });
var Ql = ep.partial().omit({ id: true, type: true }).strict();
var $l = Ql.omit({ margin: true, position: true, maxWidth: true, maxHeight: true, content: true }).strict();
var Ov = K.object({ appearance: Ql.optional(), parentId: K.string().optional() }).strict();
var Bi = class {
  constructor(e2) {
    t(this, "mesh", new Er());
    t(this, "textMesh");
    t(this, "type", "text3d");
    t(this, "feature");
    t(this, "parent");
    t(this, "batchedText");
    t(this, "polygonEntityId");
    this.feature = e2;
  }
  get visible() {
    return this.batchedText && this.textMesh ? oa(this.batchedText, this.textMesh) : this.textMesh ? this.textMesh.visible : false;
  }
  set visible(e2) {
    this.batchedText && this.textMesh ? e2 ? this.batchedText.addText(this.textMesh) : this.batchedText.removeText(this.textMesh) : this.textMesh && (this.textMesh.visible = e2), this.mesh.visible = e2;
  }
};
function jn(t20, e2, r) {
  if (e2 !== void 0) {
    if (t20.type === "model" || t20.type === "path" || t20.type === "marker" || t20.type === "label" || t20.type === "geometry" || t20.type === "group-container" || t20.type === "custom-geometry") return e2 === true ? (t20 instanceof Wt && t20.components[1] === void 0 ? (t20.components[1] = new Qr(), t20.components[1].dirty = true) : t20 instanceof Pt && t20.components[2] === void 0 ? (t20.components[2] = new Qr(), t20.components[2].dirty = true) : t20 instanceof mt && t20.components[1] === void 0 && (t20.components[1] = new Qr(), t20.components[1].dirty = true), true) : (t20 instanceof Wt ? t20.components[1] = void 0 : t20 instanceof Pt ? t20.components[2] = void 0 : t20 instanceof mt && (t20.components[1] = void 0), true);
    if (t20.type === "geometry-group") {
      let o;
      for (let i of t20.userData.entities3D.values()) o = r.geometry3DMap.get(i), jn(o, e2, r);
      return true;
    }
  }
  return false;
}
function Xv(t20, e2, r) {
  if (!(!(r != null && r.color) && !("topColor" in r))) {
    if (r !== void 0 && t20.type === "geometry-group" && t20.components[0] != null) {
      let o, i, n = t20.components[0];
      for (let a of t20.userData.entities3D.values()) o = e2.geometry3DMap.get(a), o && (i = o.components[1], i.color === n.color && (i.initialColor = r.color || n.color, i.color = r.color || n.color, i.dirty = true), i.topColor === n.topColor && (i.topColor = r.topColor || n.topColor, i.dirty = true));
      return r.color !== void 0 && (n.color = r.color, n.dirty = true), "topColor" in r && (n.topColor = r.topColor, n.dirty = true), true;
    }
    return false;
  }
}
function Kv(t20, e2) {
  if (e2 !== void 0 && t20.type === "geometry-group" && t20.components[0] != null) {
    let r = t20.components[0];
    return r.shading = r.shading || {}, r.shading && (e2.start !== r.shading.start || e2.end !== r.shading.end || e2.intensity !== r.shading.intensity) && (Object.assign(r.shading, e2), t20.userData.shadingDirty = true), true;
  }
  return false;
}
function Jv(t20, e2) {
  e2 !== void 0 && t20.type === "geometry" && (e2.showImage !== void 0 && (t20.components[1].showImage = e2.showImage), e2.flipImageToFaceCamera !== void 0 && (t20.components[1].flipImageToFaceCamera = e2.flipImageToFaceCamera));
}
function qv(t20, e2, r) {
  var o;
  if (r !== void 0) {
    if (t20.type === "geometry") {
      let i = t20.components[1];
      if (i.height !== r) return i.height = r, i.dirty = true, ((o = t20.parentObject3D) == null ? void 0 : o.type) === "geometry-group" && (t20.parentObject3D.userData.outlineDirty = true), true;
    } else if (t20.type === "geometry-group") {
      let i = t20.components[0];
      for (let n of t20.userData.entities3D.values()) {
        let a = e2.geometry3DMap.get(n), s2;
        ((a == null ? void 0 : a.type) === "geometry" || (a == null ? void 0 : a.type) === "model") && (s2 = a.components[1], s2.height === i.height && (a.components[1].height = r, a.components[1].dirty = true));
      }
      return t20.components[0].height = r, t20.userData.outlineDirty = true, true;
    }
  }
  return false;
}
function rp(t20, e2) {
  e2 !== void 0 && (t20.type === "path" || t20.type === "geometry") && (e2.initialColor !== void 0 && (t20.components[1].initialColor = e2.initialColor), e2.color !== void 0 && (t20.components[1].color = e2.color), "topColor" in e2 && (t20.components[1].topColor = e2.topColor), t20.components[1].dirty = true);
}
function Qv(t20, e2, r) {
  e2 !== void 0 && (t20.type === "label" || t20.type === "marker" ? (t20.object3d.position.copy(r(e2[1], e2[0], e2[2] || 0)), t20.positionDirty = true) : t20.type === "custom-geometry" && t20.components[0].position.copy(r(e2[1], e2[0], e2[2] || 0)));
}
function $v(t20, e2) {
  var r;
  return e2 !== void 0 && (t20.type === "marker" || t20.type === "label" || t20.type === "custom-geometry") && t20.parentObject3D !== e2 && t20.parentObject3D instanceof mt ? ((r = t20.parentObject3D) == null || r.removeEntity(t20), e2.addEntity(t20), true) : false;
}
function ey(t20, e2) {
  e2 !== void 0 && (t20.type === "marker" || t20.type === "label") && t20.components[0].enabled !== e2 && (t20.components[0].enabled = e2);
}
function ty(t20, e2, r) {
  if (e2 !== void 0 && t20.type === "marker") {
    let o = t20.components[0];
    if (e2.contentHTML !== void 0) return o.containerEl.innerHTML = e2.contentHTML, true;
    if (e2.anchor !== void 0 && (o.options.anchor = e2.anchor, o.collisionDirty = true), e2.dynamicResize !== void 0) return o.options.dynamicResize = e2.dynamicResize, true;
    if (e2.options != null) {
      try {
        zo.parse(e2.options || {});
      } catch (i) {
        return Lt.error(i), false;
      }
      return e2.options.interactive != null && (e2.options.interactive === "pointer-events-auto" ? (o.pointerEvents = "auto", jn(t20, false, r)) : (o.pointerEvents = "none", jn(t20, e2.options.interactive, r))), eu(t20, e2.options.rank), true;
    }
  }
  return false;
}
function eu(t20, e2) {
  return e2 !== void 0 && (t20.type === "marker" || t20.type === "label") ? (t20.components[0].rank = $r2(e2), true) : false;
}
function ry(t20, e2, r) {
  var o, i, n, a, s2;
  if (e2 !== void 0 && t20.type === "label") {
    let l = t20.components[0];
    e2.text !== void 0 && (l.text = e2.text, l.dirty = true);
    try {
      jo.parse(e2.options || {});
    } catch (u2) {
      Lt.error(u2);
      return;
    }
    ((o = e2.options) == null ? void 0 : o.appearance) !== void 0 && Object.keys((i = e2.options) == null ? void 0 : i.appearance).length > 0 && (sa(l.appearance, ((n = e2.options) == null ? void 0 : n.appearance) || {}), l.dirty = true), jn(t20, (a = e2.options) == null ? void 0 : a.interactive, r), eu(t20, (s2 = e2.options) == null ? void 0 : s2.rank);
  }
}
function ny(t20, e2) {
  e2 !== void 0 && t20.type === "geometry" && (t20.components[1].hoverColor = e2, t20.components[1].dirty = true);
}
function iy(t20, e2) {
  if (e2 !== void 0) {
    let r = t20.components[2];
    if (t20.type === "geometry" && r != null) return r.hover = e2, r.dirty = true, true;
  }
  return false;
}
function oy(t20, e2) {
  e2 !== void 0 && t20.type === "image" && (t20.components[1].flipImageToFaceCamera = e2);
}
function tu(t20, e2, r) {
  if (r !== void 0) {
    if (t20.type === "model" || t20.type === "path" || t20.type === "geometry" || t20.type === "custom-geometry" || t20.type === "image" || t20.type === "text3d") {
      t20.components[1].visible = r, t20.components[1].dirty = true;
      let o = t20.parentObject3D;
      o instanceof pt && (o.userData.outlineDirty = true);
    } else t20.type === "geometry-group" ? t20.setVisible(r) : t20.type === "group-container" ? (t20.setVisible(r), r === false && t20.traverse((o) => {
      if (o instanceof ir) {
        let i = e2.geometry2DMap.get(o.userData.entityId);
        if (i) {
          let n = i.components[0];
          n instanceof vl && (n.canShow = r);
        }
      }
    })) : t20.type === "label" && (t20.components[0].visible = r);
    return true;
  }
  return false;
}
function ay(t20, e2, r) {
  if (r !== void 0) {
    if (t20.type === "geometry-group") {
      let o = t20.components[0];
      if (o.opacity !== r) {
        for (let i of t20.userData.entities3D.values()) {
          let n = e2.geometry3DMap.get(i), a;
          ((n == null ? void 0 : n.type) === "geometry" || (n == null ? void 0 : n.type) === "model") && (a = n.components[1], (!a.opacity || a.opacity === o.opacity) && (a.opacity = r, a.dirty = true));
        }
        return t20.setOpacity(r), o.opacity = r, t20.userData.outlineDirty = true, true;
      }
    } else if (t20.type === "group-container" && t20.opacity !== r) {
      t20.setOpacity(r);
      let o = 1;
      return t20.parent instanceof mt && (o = t20.parent.opacity), ru(t20, e2, o), true;
    }
  }
  return false;
}
function ru(t20, e2, r = 1) {
  if (t20.type === "group-container" && "children" in t20 && t20.children.length > 0) {
    let o = r * t20.opacity;
    t20.userData.computedOpacity = o;
    for (let i of t20.children) (i instanceof pt && i.type === "geometry-group" || i instanceof mt && i.type === "group-container") && ru(i, e2, o);
  } else if (t20.type === "geometry-group") {
    for (let o of t20.userData.entities3D.values()) {
      let i = e2.geometry3DMap.get(o), n;
      ((i == null ? void 0 : i.type) === "geometry" || (i == null ? void 0 : i.type) === "model") && (n = i.components[1], n.dirty = true);
    }
    t20.userData.outlineDirty = true;
  }
}
function sy(t20, e2) {
  if (e2 !== void 0 && t20.type === "geometry-group") {
    let r = t20.components[0];
    (e2 == null ? void 0 : e2.texture) != null && r.texture !== (e2 == null ? void 0 : e2.texture) && (r.texture = e2.texture, r.dirty = true), (e2 == null ? void 0 : e2.topTexture) != null && r.topTexture !== (e2 == null ? void 0 : e2.topTexture) && (r.topTexture = e2.topTexture, r.dirty = true);
  }
}
function ly(t20, e2) {
  if (t20.type === "geometry") {
    let r = false, o = t20.components[1];
    if ((e2 == null ? void 0 : e2.texture) != null && o.texture !== (e2 == null ? void 0 : e2.texture) && (o.texture = e2.texture, r = true), (e2 == null ? void 0 : e2.topTexture) != null && o.topTexture !== (e2 == null ? void 0 : e2.topTexture) && (o.topTexture = e2.topTexture, r = true), r && t20.components[0] instanceof It) {
      let i = t20.components[0];
      return i.detached === false && (i.detached = true, i.dirty = true), true;
    }
  }
  return false;
}
function uy(t20, e2) {
  if (e2 !== void 0 && t20.type === "geometry") {
    let r = t20.components[1];
    if (r.opacity !== e2) {
      r.opacity = e2;
      let o = t20.components[0];
      o.detached === false && (o.detached = true, o.dirty = true), e2 === 0 ? r.visible = false : r.visible = true, r.dirty = true;
      let i = t20.parentObject3D;
      return (i == null ? void 0 : i.type) === "geometry-group" && (i.userData.outlineDirty = true, i.userData.shadingDirty = true), true;
    }
  }
  return false;
}
function cy(t20, e2) {
  if (e2 !== void 0) {
    if (t20.type === "path" || t20.type === "geometry" || t20.type === "custom-geometry") t20.components[1].altitude = e2, t20.components[1].dirty = true;
    else if (t20.type === "group-container" && t20.altitude !== e2) return t20.setAltitude(e2), true;
  }
  return false;
}
function fy(t20, e2) {
  if (e2 !== void 0) {
    if (t20.type === "geometry-group" && t20.components[0] != null) t20.components[0].outline = e2, t20.userData.outlineDirty = true;
    else if (t20.type === "geometry") {
      t20.components[1].outline = e2, t20.components[1].dirty = true;
      let r = t20.parentObject3D;
      r instanceof pt && (r.userData.outlineDirty = true);
    }
    return true;
  }
  return false;
}
function dy(t20, e2) {
  return e2 !== void 0 && t20.type === "geometry" && t20.components[0] && t20.components[0] instanceof It ? (t20.components[0].focusable = e2, true) : false;
}
function hy(t20, e2) {
  if (e2 !== void 0 && t20.type === "geometry") {
    let r = t20.components[1];
    if (r.renderOrder !== e2) {
      r.renderOrder = e2;
      let o = t20.components[0];
      return o.detached === false && (o.detached = true, o.dirty = true), o.imageMesh && (o.imageMesh.renderOrder = e2 + 1), r.dirty = true, true;
    }
  }
  return false;
}
function py(t20, e2, r) {
  let { visible: o, color: i } = r;
  if (t20.type !== "path") return;
  let n = t20.components[0];
  o != null && tu(t20, e2, o), i != null && rp(t20, { color: i }), Object.assign(n, np(r)), aa(r) || (n.materialDirty = true, (r.nearRadius != null || r.farRadius != null) && (n.dirty = true), (r.nearZoomLevel != null || r.farZoomLevel != null) && (n.dirty = true));
}
function np(t20) {
  return zn(t20, ip);
}
var ip = ["animateArrowsOnPath", "displayArrowsOnPath", "nearRadius", "farRadius", "accentColor", "completeFraction", "nearZoomLevel", "farZoomLevel"];
function my(t20) {
  if (!(t20 instanceof Pt && t20.type === "text3d")) throw new Error("expect target is TextGeometry3D");
}
var op = ["visible", "color", "strokeWidth", "outlineOffsetX", "outlineOffsetY", "outlineWidth", "outlineBlur", "outlineOpacity", "outlineColor", "strokeWidth", "strokeColor", "strokeOpacity", "maxWidth", "maxHeight", "font", "hoverColor", "fillOpacity", "fontSize", "flipToFaceCamera"];
function gy(t20, e2, r) {
  tu(t20, e2, r.visible);
  let o = t20.components[1], i = zn(r, op);
  "margin" in r && Lt.warn("update to margin is not supported atm"), "content" in r && Lt.warn("content update is not supported atm");
  try {
    $l.parse(i);
  } catch (n) {
    Lt.error(n);
    return;
  }
  Object.keys(i).length > 0 && (Object.assign(o, i), o.dirty = true);
}
var ap = ["color", "material", "opacity", "verticalOffset", "rotation", "position", "scale"];
function vy(t20, e2) {
  let r = zn(e2, ap), o = t20.components[1], i = t20.components[0];
  Object.keys(r).length > 0 && (r.material && (o.material = r.material), r.opacity != null && (o.opacity = r.opacity, r.opacity === 0 ? o.visible = false : o.visible = true, o.dirty = true), r.verticalOffset != null && (o.verticalOffset = r.verticalOffset), r.color != null && (o.color = r.color), r.position != null && (i.feature.geometry.coordinates = r.position, i.positionDirty = true), r.rotation != null && (o.rotation = r.rotation), r.scale != null && (o.scale = r.scale), o.dirty = true);
}
c();
c();
c();
c();
var Ni = class extends On {
  constructor(r) {
    let o = r, i = 3, n = i * 4;
    super(new Float32Array(r * n), i, r, Pe, Fe);
    t(this, "_width");
    t(this, "_height");
    t(this, "_propertiesLength");
    this._width = n, this._height = o, this._propertiesLength = i;
  }
  setColor(r, o, i) {
    let n = this.image.data, a = r * this._width;
    n[a] = o.r, n[a + 1] = o.g, n[a + 2] = o.b, n[a + 3] = 0, n[a + 4] = i.r, n[a + 5] = i.g, n[a + 6] = i.b, n[a + 7] = 0, this.needsUpdate = true;
  }
  getColor(r) {
    let o = this.image.data, i = r * this._width, n = new Nt(o[i], o[i + 1], o[i + 2]), a = new Nt(o[i + 4], o[i + 5], o[i + 6]);
    return { color: n, topColor: a };
  }
  setTexture(r, o, i) {
    let n = this.image.data, a = r * this._width;
    n[a + 8] = o ? 1 : 0, n[a + 9] = i ? 1 : 0, n[a + 10] = 0, n[a + 11] = 0, this.needsUpdate = true;
  }
};
var nu = "#define LAMBERT\nvarying vec3 vViewPosition;\nvarying vec4 vPosition;\nvarying vec2 vUv;\nvarying vec4 finalPosition;\nvarying vec3 vWorldPosition;\nvarying vec3 worldNormal;\nvarying float vBatchId;\n\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n\n	vViewPosition = - mvPosition.xyz;\n\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n	\n  // To mitigate visual defects on machines such as windows and iOS\n	vBatchId = getIndirectIndex(gl_DrawID) + 0.5;\n	vViewPosition = - mvPosition.xyz;\n	worldNormal = normal;\n	vUv = uv;\n	vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n}\n";
var iu = "#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nuniform float uGradientEnd;\nuniform float uGradientIntensity;\nuniform float uMinSideAlpha;\nuniform float uMaxSideAlpha;\nuniform float uGradientStart;\nuniform highp sampler2D uPropertiesTexture;\nuniform highp sampler2D uTopTexture;\nuniform highp sampler2D uTexture;\nuniform float uRepeatYFactor;\nuniform bool uBlendTexture;\nvarying float vBatchId;\n\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 worldNormal;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvec3 blendTextureColor(vec3 diffuseColor, vec4 texColor) {\n	vec3 texturedColor = diffuseColor * texColor.rgb;\n	return mix(diffuseColor, texturedColor, texColor.a);\n}\n\nvoid main() {\n	#include <clipping_planes_fragment>\n\n	// get the normalized world normal of vertex fragment\n	vec3 surfaceNormal = normalize(worldNormal);\n\n	// get angle relative to Z up\n	float angle = degrees(acos(abs(dot(surfaceNormal, vec3(0.0, 0.0, 1.0)))));\n\n	int idx = int(vBatchId) * 1;\n	vec3 diffuse = vec3(texelFetch(uPropertiesTexture, ivec2(0, idx), 0).rgb);\n	bool shouldShowTexture = texelFetch(uPropertiesTexture, ivec2(2, idx), 0).r > 0.99;\n\n	if(shouldShowTexture) {\n		vec4 tex2d = texture2D(uTexture, vec2(vUv.x, vUv.y * uRepeatYFactor));\n		diffuse = uBlendTexture ? blendTextureColor(diffuse, tex2d) : tex2d.rgb;\n	}\n\n	// if this is a fragment facing upwards, use topColor. Avoid any sort of `==` comparison, due to floating point precision issue\n	if(angle < 0.02) {\n		bool shouldShowTopTexture = texelFetch(uPropertiesTexture, ivec2(2, idx), 0).g > 0.99;\n\n		if(shouldShowTopTexture) {\n			vec4 topTex2d = texture2D(uTopTexture, vUv);\n			diffuse = uBlendTexture ? blendTextureColor(diffuse, topTex2d) : topTex2d.rgb;\n		} else {\n			diffuse = vec3(texelFetch(uPropertiesTexture, ivec2(1, idx), 0).rgb);\n		}\n	}\n\n	vec4 diffuseColor = vec4(diffuse, opacity);\n\n	// only for vertical surfaces\n	if(angle > 89.0 && angle < 91.0) {\n\n		// get the percentage of the z position from the ground, up\n		float percentFromZeroZ = max((abs(vWorldPosition.z) - uGradientStart) / uGradientEnd, 0.0);\n\n		// gradient based on percentage\n		float alpha = smoothstep(uMinSideAlpha, uMaxSideAlpha, percentFromZeroZ);\n\n		// mix the shadow color with the diffuse color based on the alpha and opacity\n		diffuseColor = vec4(mix(diffuseColor.rgb, diffuseColor.rgb * (1.0 - uGradientIntensity), 1.0 - alpha), opacity);\n	}\n\n	ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n	vec3 totalEmissiveRadiance = emissive;\n\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n\n	// accumulation\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n\n	// modulation\n	#include <aomap_fragment>\n\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n\n}\n";
var cp = -0.05;
var fp = 1;
var Vn = class extends ll {
  constructor(r, o, i = 1) {
    super(r);
    t(this, "propertiesTexture");
    t(this, "uniforms", { uGradientIntensity: { value: 0 }, uGradientEnd: { value: 0 }, uGradientStart: { value: 0 }, uTopTexture: { value: null }, uTexture: { value: null }, uRepeatYFactor: { value: 1 }, uBlendTexture: { value: false } });
    t(this, "colorSpace", ke);
    t(this, "showTextures", (r2) => {
      let o2 = !!this.uniforms.uTexture.value, i2 = !!this.uniforms.uTopTexture.value;
      (o2 || i2) && (this.propertiesTexture.setTexture(r2, o2, i2), this.needsUpdate = true);
    });
    this.propertiesTexture = new Ni(o), this.uniforms.uRepeatYFactor.value = i, this.onBeforeCompile = (n) => {
      let a = this.uniforms.uGradientIntensity, s2 = this.uniforms.uGradientEnd, l = this.uniforms.uGradientStart, u2 = this.uniforms.uTopTexture, c2 = this.uniforms.uTexture, f = this.uniforms.uRepeatYFactor, d = this.uniforms.uBlendTexture;
      this.uniforms = n.uniforms, n.vertexShader = nu, n.fragmentShader = iu, Object.assign(this.uniforms, { uGradientIntensity: a, uGradientEnd: s2, uGradientStart: l, uMinSideAlpha: { value: cp }, uMaxSideAlpha: { value: fp }, uPropertiesTexture: { value: this.propertiesTexture }, uTopTexture: u2, uTexture: c2, uRepeatYFactor: f, uBlendTexture: d });
    };
  }
  get repeatYFactor() {
    return this.uniforms.uRepeatYFactor.value;
  }
  set repeatYFactor(r) {
    r !== this.uniforms.uRepeatYFactor.value && (this.uniforms.uRepeatYFactor.value = r, this.needsUpdate = true);
  }
  get texture() {
    return this.uniforms.uTexture.value;
  }
  set texture(r) {
    r.wrapS = Cr, r.wrapT = Cr, r.colorSpace = this.colorSpace, this.uniforms.uTexture.value = r;
  }
  get topTexture() {
    return this.uniforms.uTopTexture.value;
  }
  set topTexture(r) {
    r.wrapS = Cr, r.wrapT = Cr, r.colorSpace = this.colorSpace, this.uniforms.uTopTexture.value = r;
  }
  get blendTexture() {
    return this.uniforms.uBlendTexture.value;
  }
  set blendTexture(r) {
    r !== this.uniforms.uBlendTexture.value && (this.uniforms.uBlendTexture.value = r, this.colorSpace = r ? ni : ke, this.texture && (this.texture.colorSpace = this.colorSpace), this.topTexture && (this.topTexture.colorSpace = this.colorSpace), this.needsUpdate = true);
  }
  setGradientShading(r, o, i) {
    this.uniforms.uGradientStart.value = r, this.uniforms.uGradientEnd.value = o, this.uniforms.uGradientIntensity.value = i;
  }
  setColor(r, o, i) {
    this.propertiesTexture.setColor(r, o, i);
  }
  getColor(r) {
    return this.propertiesTexture.getColor(r);
  }
  hideTextures(r) {
    let o = !!this.uniforms.uTexture.value, i = !!this.uniforms.uTopTexture.value;
    (o || i) && (this.propertiesTexture.setTexture(r, false, false), this.needsUpdate = true);
  }
  removeSideTexture(r) {
    if (this.texture) {
      this.texture.dispose(), this.uniforms.uTexture.value = null;
      let o = !!this.uniforms.uTopTexture.value;
      this.propertiesTexture.setTexture(r, false, o), this.needsUpdate = true;
    }
  }
  removeTopTexture(r) {
    if (this.topTexture) {
      this.topTexture.dispose(), this.uniforms.uTopTexture.value = null;
      let o = !!this.uniforms.uTexture.value;
      this.propertiesTexture.setTexture(r, o, false), this.needsUpdate = true;
    }
  }
  dispose() {
    super.dispose(), this.propertiesTexture.dispose();
  }
};
c();
var jy = { top: 0, bottom: 0, left: 0, right: 0, type: "pixel" };
var ou = "mappedin";
var zy = 250;
var hp = 80;
function $y(t20, e2) {
  var s2, l, u2;
  let r = 0;
  for (let c2 of t20) r += ((l = (s2 = c2.components[0]) == null ? void 0 : s2.geometry) == null ? void 0 : l.attributes.position.count) || 0;
  let o = new Nt(e2.color), i;
  i = new Vn({ color: o, side: e2.side === "back" ? Le : e2.side === "front" ? Mn : ln, opacity: (u2 = e2.opacity) != null ? u2 : 1, transparent: e2.opacity !== void 0 ? e2.opacity < 1 : false, polygonOffset: true, polygonOffsetFactor: 1, polygonOffsetUnits: 1 }, t20.length);
  let n = new rr(t20.length, r, 0, i), a;
  for (let c2 of t20) a = c2.components[0], !(!(a instanceof It) || !a.geometry) && (a.mesh = n, a.material = i, a.instanceIndex = n.addGeometry(a.geometry), n.addInstance(a.instanceIndex), n.userData.entities[a.instanceIndex] = c2.id, i instanceof Vn && i.setColor(a.instanceIndex, o, e2.topColor ? new Nt(e2.topColor) : o));
  return n.perObjectFrustumCulled = true, n.matrixAutoUpdate = false, n;
}
function la(t20, e2) {
  let r = new el(t20, hp), o = pp(e2.color.getHexString()), i = new vs({ linewidth: 1, color: o, transparent: true }), n = new kr(r, i);
  return n.layers.set(1), n;
}
function pp(t20) {
  return ae(t20).darken(30).toRgbString();
}
function eb(t20, e2, r, o) {
  if (e2.length < 1) return;
  t20.boundingBox || t20.computeBoundingBox();
  let i = t20.boundingBox, n = t20.getAttribute("position"), a = t20.getAttribute("normal"), s2 = t20.getAttribute("uv"), l, u2;
  t20.index ? (l = t20.index.count / 3, u2 = function(b, _) {
    return t20.index.getX(b * 3 + _);
  }) : (l = n.count / 3, u2 = function(b, _) {
    return b * 3 + _;
  });
  let c2 = new kt();
  c2.makeRotationFromQuaternion(new bn().setFromEuler(new Ye(0, 0, r / 180 * Math.PI)));
  let f = e2.find((b) => b.face === "top"), d;
  f && (d = { min: o(f.bounds[1], f.bounds[0], 0), max: o(f.bounds[3], f.bounds[2], i.max.z) });
  let h = e2.find((b) => b.face === "side"), g;
  if (h && (g = { min: o(h.bounds[1], h.bounds[0], 0), max: o(h.bounds[3], h.bounds[2], i.max.z) }), !(!g && !d)) for (let b = 0; b < l; ++b) {
    let _ = a.getX(u2(b, 0)) + a.getX(u2(b, 1)) + a.getX(u2(b, 2)), w2 = a.getY(u2(b, 0)) + a.getY(u2(b, 1)) + a.getY(u2(b, 2)), P = a.getZ(u2(b, 0)) + a.getZ(u2(b, 1)) + a.getZ(u2(b, 2)), T = Math.abs(_), A = Math.abs(w2), z = Math.abs(P);
    var m, y;
    T <= A && T <= z ? (m = "x", A <= z ? y = "y" : y = "z") : A <= T && A <= z ? (m = "y", T <= z ? y = "x" : y = "z") : (m = "z", T <= A ? y = "x" : y = "y"), m === "z" && (m = y, y = "z");
    let U, q2, x, L, D, Z;
    if (y === "z" || m === "z") {
      if (!h || !g) continue;
      U = h.repeat.u, q2 = h.repeat.v, x = h.offset.u, L = h.offset.v, D = h.rotation, Z = g;
    } else {
      if (!f || !d) continue;
      U = f.repeat.u, q2 = f.repeat.v, x = f.offset.u, L = f.offset.v, D = (360 - r + f.rotation) % 360, Z = d;
    }
    let { min: F, max: ne } = Z, oe = new de();
    oe.position.set(F.x, F.y, 0), oe.updateMatrix(), oe.updateMatrixWorld();
    let B = F.clone().applyMatrix4(c2), G = ne.clone().applyMatrix4(c2), v2 = Math.abs(G.x - B.x), S = Math.abs(G.y - B.y), C = new R(v2, S, ne.z).applyMatrix4(oe.matrixWorld), O = Math.abs(C[m] - F[m]), M2 = Math.abs(C[y] - F[y]), V = D * Math.PI / 180 || 0, R2 = Math.cos(V), N = Math.sin(V), Q = oe.matrixWorld.clone().invert(), se = new bn().setFromEuler(new Ye(0, 0, r / 180 * Math.PI));
    for (let Y = 0; Y < 3; Y++) {
      let Se = new R(n.getX(u2(b, Y)), n.getY(u2(b, Y)), n.getZ(u2(b, Y))).applyMatrix4(Q);
      Se.applyQuaternion(se);
      let ve2 = Se.applyMatrix4(oe.matrixWorld), te = ve2.x, le = ve2.y, he = ve2.z;
      var E, k;
      m === "x" ? E = U * (te - F[m]) / O + x : m === "y" ? E = U * (le - F[m]) / O + x : E = U * (he - F[m]) / O + x, y === "x" ? k = q2 * (te - F[y]) / M2 + L : y === "y" ? k = q2 * (le - F[y]) / M2 + L : k = q2 * (he - F[y]) / M2 + L, E -= 0.5, k -= 0.5;
      let X = E * R2 - k * N + 0.5, ue = E * N + k * R2 + 0.5;
      s2.setX(u2(b, Y), X), s2.setY(u2(b, Y), ue);
    }
  }
}
c();
function au2(t20) {
  t20 && (t20.map && (t20.map.dispose(), t20.map = void 0), t20.dispose());
}
function ji(t20) {
  for (let e2 = t20.children.length - 1; e2 >= 0; e2--) ji(t20.children[e2]);
  "geometry" in t20 && t20.geometry && t20.geometry.dispose(), t20.parent && t20.parent.remove(t20), "material" in t20 && Array.isArray(t20.material) ? t20.material.forEach(function(e2) {
    au2(e2);
  }) : "material" in t20 && typeof t20.material < "u" && au2(t20.material);
}
var Wn;
var ln2;
var ca = class {
  constructor(e2) {
    t(this, "rendererState");
    t(this, "dirty", true);
    v(this, Wn, true);
    v(this, ln2, 0);
    this.rendererState = e2;
  }
  get geometries3DDirty() {
    return u(this, Wn);
  }
  set geometries3DDirty(e2) {
    w(this, Wn, e2);
  }
  update(e2, r = false) {
    var n, a;
    let o;
    if (this.geometries3DDirty) {
      let s2;
      for (let l of this.rendererState.geometry3DIdsInScene) if (o = this.rendererState.geometry3DMap.get(l), o && o.type === "geometry-group" && o.userData.modelURL === void 0 && o.userData.dirty === false && o.userData.outlineDirty === true) {
        let u2 = o.children[0];
        o.userData.outlineDirty = false;
        let c2 = qr(o);
        if (c2 && ji(c2), !o.components[0].outline || !o.visible) continue;
        if (o.children.length > 0) {
          let f;
          if (u2 instanceof rr) {
            let g = [], m, y, E, k;
            for (let b of o.userData.entities3D) k = this.rendererState.geometry3DMap.get(b), (k == null ? void 0 : k.type) === "geometry" && (y = k.components[0], E = k.components[1], y instanceof It && E.visible && E.opacity > 0 && E.outline && !y.detached && (m = y == null ? void 0 : y.geometry, m && g.push(m)));
            g.length > 0 && (f = M(g));
          } else f = u2.geometry;
          f && (s2 = la(f, u2.material), s2.position.z = o.altitude, s2.userData.outlineOfEntityId = o.userData.entityId);
          let d, h;
          for (let g of o.userData.entities3D.values()) {
            let m = this.rendererState.geometry3DMap.get(g);
            (m == null ? void 0 : m.type) === "geometry" && (d = m.components[0], h = m.components[1], s2 && (m == null ? void 0 : m.type) === "geometry" && !d.detached ? (m.components[0].outline = s2, (n = o.parent) == null || n.add(s2)) : (m == null ? void 0 : m.type) === "geometry" && d.geometry != null && d.material != null && d.detached && (d.outline && ji(d.outline), h && h.opacity > 0 && h.visible && h.outline && (d.outline = la(d.geometry, d.material), d.outline.position.z = h.altitude, (a = o.parent) == null || a.add(d.outline))));
          }
        }
        this.dirty = true;
      }
      this.geometries3DDirty = false;
    }
    let i = r ? su(e2, 16, 19, 0, 1) : u(this, ln2);
    if ((i !== u(this, ln2) || this.dirty) && this.rendererState.geometry3DIdsInScene.size > 0) {
      let s2;
      for (let l of this.rendererState.geometry3DIdsInScene) if (s2 = this.rendererState.geometry3DMap.get(l), (s2 == null ? void 0 : s2.type) === "geometry-group" && s2.components[0] != null && s2.components[0].outline && s2.visible) {
        let u2 = qr(s2);
        if (u2 && u2.visible) {
          let c2 = Array.isArray(u2.material) ? u2.material : [u2.material];
          for (let f of c2) f.opacity = Math.min(i, s2.components[0].opacity * ua(s2));
        }
      } else if ((s2 == null ? void 0 : s2.type) === "geometry" && s2.components[0] instanceof It && s2.components[0].detached) {
        let u2 = s2.components[0].outline;
        if (u2) {
          let c2 = Array.isArray(u2.material) ? u2.material : [u2.material];
          for (let f of c2) f.opacity = Math.min(i, s2.components[1].opacity * ua(s2));
        }
      }
    }
    w(this, ln2, i), this.dirty = false;
  }
};
Wn = /* @__PURE__ */ new WeakMap(), ln2 = /* @__PURE__ */ new WeakMap();
var pt = class extends de {
  constructor(r, o = new Ci()) {
    super();
    t(this, "visible", true);
    t(this, "type", "geometry-group");
    t(this, "components");
    t(this, "userData", { entityId: "", entities3D: /* @__PURE__ */ new Set(), opacity: 1, dirty: true, outlineDirty: true, shadingDirty: true });
    this.components = [o], this.userData.entityId = r;
  }
  setVisible(r) {
    if (this.visible !== r) {
      this.visible = r;
      let o = qr(this);
      o && (o.visible = r), this.dispatchEvent({ type: "childremoved", child: this });
    }
  }
  getOpacity() {
    return this.userData.opacity;
  }
  setOpacity(r) {
    this.userData.opacity = r;
  }
  removeEntity() {
    this.dispatchEvent({ type: "childremoved", child: this });
  }
  getfirstChildEntityId() {
    let r;
    for (let i of this.children) if (!i.userData.detached) {
      r = i;
      break;
    }
    return r instanceof rr ? Object.values(r.userData.entities)[0] : void 0;
  }
  setAltitude(r) {
    this.position.z !== r && (this.position.z = r, this.dispatchEvent({ type: "childremoved", child: this }));
  }
  get altitude() {
    return this.position.z;
  }
};
var mt = class t19 extends de {
  constructor(r) {
    super();
    t(this, "childrenIds", /* @__PURE__ */ new Set());
    t(this, "children", []);
    t(this, "type", "group-container");
    t(this, "userData", { entityId: "", entities2D: /* @__PURE__ */ new Set(), dirty: true, occluderDirty: false, opacity: 1, computedOpacity: 1 });
    t(this, "components", []);
    this.userData.entityId = r;
  }
  addOccluderFeature(r, o) {
    this.userData.occluderFeature = r, this.userData.occluderId = o, this.userData.occluderDirty = true;
  }
  addEntity(r) {
    r instanceof t19 ? (this.childrenIds.add(r.userData.entityId), this.add(r)) : r instanceof Wt ? (this.childrenIds.add(r.id), this.add(r.object3d), this.userData.entities2D.add(r.id)) : r instanceof pt ? (this.childrenIds.add(r.userData.entityId), this.add(r)) : r instanceof Pt && r.object3d && (this.childrenIds.add(r.id), this.add(r.object3d)), this.dispatchEvent({ type: "childadded", child: this });
  }
  removeEntity(r) {
    r instanceof t19 ? (this.childrenIds.delete(r.userData.entityId), this.remove(r)) : r instanceof Wt ? (this.childrenIds.delete(r.id), this.userData.entities2D.delete(r.id), this.remove(r.object3d)) : r instanceof pt ? (this.childrenIds.delete(r.userData.entityId), this.remove(r)) : r instanceof Pt && r.object3d && (this.childrenIds.delete(r.id), this.add(r.object3d)), this.dispatchEvent({ type: "childremoved", child: this });
  }
  setVisible(r) {
    this.visible !== r && (this.visible = r, this.dispatchEvent({ type: "childremoved", child: this }));
  }
  setAltitude(r) {
    this.position.z !== r && (this.position.z = r, this.dispatchEvent({ type: "childremoved", child: this }));
  }
  get altitude() {
    return this.position.z;
  }
  setOpacity(r) {
    this.userData.opacity = r;
  }
  get opacity() {
    return this.userData.opacity;
  }
};
c();
function vp(t20) {
  let e2 = t20.min, r = t20.max, o = new R(e2.x, e2.y, e2.z), i = new R(r.x, e2.y, e2.z), n = new R(e2.x, r.y, e2.z), a = new R(r.x, r.y, e2.z);
  return [o, i, n, a];
}
c();
function lu(t20, e2) {
  let r;
  return typeof e2 == "string" || typeof e2 == "number" ? (r = t20.geometry2DMap.get(e2), r == null && (r = t20.geometry3DMap.get(e2))) : typeof (e2 == null ? void 0 : e2.id) == "string" || typeof (e2 == null ? void 0 : e2.id) == "number" ? (r = t20.geometry2DMap.get(e2.id), r == null && (r = t20.geometry3DMap.get(e2.id))) : r = e2, r;
}
function Bb(t20, e2, r = [], o = new Ie(), i) {
  (t20.getSystems().renderSystem.threeDdirty || t20.getSystems().renderSystem.twoDdirty) && t20.renderSync();
  let n = lu(t20.getInternalState(), e2);
  return uu(n, r, o, i), r;
}
var zi = new R();
function uu(t20, e2 = [], r = new Ie(), o) {
  if (t20.visible) {
    if (t20.isMesh || t20.isLine || t20.isPoints) {
      let i = t20.geometry;
      if (i.isBufferGeometry) {
        let n = i.attributes.position;
        for (let a = 0; a < n.count; a++) zi.fromBufferAttribute(n, a), o !== void 0 && (zi.z = o), e2.push(zi.clone()), r.expandByPoint(zi);
      }
    }
    for (let i of t20.children) uu(i, e2, r, o);
  }
}
c();
function yp() {
  return typeof window > "u" ? 1 : Math.min(window.devicePixelRatio, 2);
}
c();
function bp(t20, e2, r = false) {
  let o = null, i = 0;
  return function(...n) {
    i++, i === 1 && r === true && t20(...n);
    let a = () => {
      (!r || i > 1) && t20(...n), o = null, i = 0;
    };
    clearTimeout(o), o = setTimeout(a, e2);
  };
}
c();
var xp = /* @__PURE__ */ (() => {
  let t20;
  return { getDeviceType() {
    if (t20) return t20;
    let { userAgent: e2, platform: r, maxTouchPoints: o } = window.navigator, i = /(iphone|ipod|ipad)/i.test(e2), n = r === "iPad" || r.indexOf("Mac") === 0 && o > 0 && !window.MSStream, a = /android/i.test(e2);
    return t20 = { isIpad: n, isMobile: a || i || n, isSafari12: /Version\/12.+Safari/.test(e2), isFirefox: /Firefox/.test(e2), isWindows: /windows/i.test(e2) }, t20;
  }, _reset() {
    t20 = void 0;
  } };
})();
var cu = xp.getDeviceType;
var fu = /* @__PURE__ */ (() => {
  let t20, e2, r;
  function o() {
    if (e2 !== void 0) return e2;
    t20 || (t20 = document.createElement("canvas"));
    let n = t20.getContext("webgl") || t20.getContext("experimental-webgl");
    if (!n) return e2;
    try {
      let a = cu().isFirefox ? null : n.getExtension("WEBGL_debug_renderer_info");
      return e2 = a ? n.getParameter(a.UNMASKED_RENDERER_WEBGL) : n.getParameter(n.RENDERER), e2;
    } catch {
      let s2 = new Error("Failed getting device info");
      throw s2.name = "FailedGettingDeviceInfo", s2;
    }
  }
  function i() {
    var a, s2;
    if (!cu().isWindows) return false;
    if (r !== void 0) return r;
    let n = (s2 = (a = _p()) == null ? void 0 : a.toLowerCase()) != null ? s2 : "";
    return r = n.includes("intel") && (n.includes("uhd") || n.includes("iris")), r;
  }
  return { getInfo: o, shouldDisableOffscreenCanvas: i, _setCanvas(n) {
    t20 = n, e2 = void 0, r = void 0;
  } };
})();
var _p = fu.getInfo;
var Tp = fu.shouldDisableOffscreenCanvas;
c();
function zn(t20, e2) {
  let r = {};
  for (let o = 0; o < e2.length; o++) {
    let i = e2[o];
    i in t20 && (r[i] = t20[i]);
  }
  return r;
}
function aa(t20) {
  return Object.keys(t20).length === 0;
}
c();
var Sp = (t20) => (e2) => {
  if (!e2.includes("mappedin")) {
    let r = {};
    for (let o in t20) {
      let i = t20[o];
      e2.includes("mappedin") || (t20[o] = i);
    }
    return { url: e2, headers: r };
  }
  return { url: e2, headers: t20 };
};
function s0(t20, e2, r, o) {
  let i = t20 * (Math.PI / 180), n = o / ur, a = t20 + n * 180 / Math.PI, s2 = r / ur / Math.cos(i), l = e2 + s2 * 180 / Math.PI;
  return { lat: a, lon: l };
}
function l0(t20, e2, r, o) {
  let i = r * (Math.PI / 180), n = o * (Math.PI / 180), a = t20 * (Math.PI / 180), s2 = e2 * (Math.PI / 180), l = i - a, u2 = n - s2, c2 = ur * u2 * Math.cos(a), f = ur * l;
  return { x: c2, y: f };
}
var kp = (t20, e2) => {
  var r;
  if (t20.children && t20.visible) for (let o of t20.children) {
    if (o.visible && o.type) if ("entities3D" in o.userData && ((r = o.userData) != null && r.entities3D) && o.type === "geometry-group") {
      e2.add(o.userData.entityId);
      for (let i of o.userData.entities3D.values()) e2.add(i);
    } else (o.type === "group-container" || o.type === "custom-geometry" || o instanceof Er) && e2.add(o.userData.entityId);
    kp(o, e2);
  }
  return e2;
};
var wp = (t20, e2) => {
  var r;
  if (t20.children && t20.visible && !((r = t20.userData) != null && r.hidden)) for (let o of t20.children) o.visible && o instanceof ir && e2.add(o.userData.entityId), wp(o, e2);
  return e2;
};
function sa(t20, e2) {
  for (let r in e2) {
    if (e2[r] == null) {
      t20[r] = void 0;
      continue;
    }
    typeof e2[r] == "object" ? sa(t20[r], e2[r]) : t20[r] = e2[r];
  }
  return t20;
}
function u0(t20, e2, r, o) {
  let i = { translateX: t20.x, translateY: t20.y, translateZ: t20.z, scale: t20.meterInMercatorCoordinateUnits() }, n = new kt(), a = new R(i.scale, -i.scale, i.scale), s2 = new kt().makeTranslation(i.translateX, i.translateY, i.translateZ).scale(a), l = r.elevation;
  return { id: ou, type: "custom", renderingMode: "3d", render: (u2, c2) => {
    if (n.fromArray(c2), l !== r.elevation) {
      let f = ze.fromLngLat(t20.toLngLat(), r.elevation);
      s2.makeTranslation(i.translateX, i.translateY, -f.z).scale(a);
    }
    e2.projectionMatrix = n.multiply(s2), l = r.elevation, o();
  } };
}
function Mp(t20) {
  return fetch(t20, { method: "POST", headers: { "content-type": "application/json" }, body: JSON.stringify({ grant_type: "client_credentials" }) });
}
async function c0(t20) {
  let e2 = await Mp(t20), { access_token: r } = await e2.json();
  return { "x-mappedin-tiles-key": r };
}
function f0(t20, e2 = 0) {
  let r = 3735928559 ^ e2, o = 1103547991 ^ e2;
  for (let i = 0, n; i < t20.length; i++) n = t20.charCodeAt(i), r = Math.imul(r ^ n, 2654435761), o = Math.imul(o ^ n, 1597334677);
  return r = Math.imul(r ^ r >>> 16, 2246822507) ^ Math.imul(o ^ o >>> 13, 3266489909), o = Math.imul(o ^ o >>> 16, 2246822507) ^ Math.imul(r ^ r >>> 13, 3266489909), 4294967296 * (2097151 & o) + (r >>> 0);
}
var Cp = (t20) => t20;
var d0 = (t20) => 1 - Math.cos(t20 * Math.PI / 2);
function su(t20, e2, r, o, i, n = Cp) {
  t20 = Math.max(e2, Math.min(t20, r));
  let a = (t20 - Math.min(e2, r)) / Math.abs(r - e2), s2 = n(a);
  return o + s2 * (i - o);
}
function h0(t20, e2, r) {
  let o = t20 * (Math.PI / 180) / 2, i = e2 / 2;
  return r * Math.tan(o) / i;
}
function p0(t20) {
  return new lt(new re(t20[0][0], t20[0][1]), new re(t20[1][0], t20[1][1])).getCenter().toArray();
}
function m0(t20, e2) {
  return t20 < e2 || e2 <= 12;
}
function ua(t20) {
  let e2 = 1;
  return t20.type === "geometry-group" && t20.parent != null && t20.parent instanceof mt ? e2 = t20.parent.userData.computedOpacity : (t20.type === "geometry" || t20.type === "custom-geometry" || t20.type === "model") && t20.parentObject3D != null && t20.parentObject3D instanceof pt && t20.parentObject3D.parent != null && t20.parentObject3D.parent instanceof mt && (e2 = t20.parentObject3D.parent.userData.computedOpacity), e2;
}
c();
var fa = class {
  constructor(e2) {
    t(this, "visible");
    t(this, "altitude");
    t(this, "color");
    t(this, "dirty", true);
    t(this, "maxWidth");
    t(this, "maxHeight");
    t(this, "hoverByPolygon");
    t(this, "flipToFaceCamera", du.flipToFaceCamera);
    t(this, "font");
    t(this, "fillOpacity");
    t(this, "fontSize");
    t(this, "margin");
    t(this, "outlineWidth");
    t(this, "outlineBlur");
    t(this, "outlineOffsetX");
    t(this, "strokeColor");
    t(this, "strokeOpacity");
    t(this, "strokeWidth");
    t(this, "hoverColor");
    t(this, "outlineOffsetY");
    t(this, "outlineColor");
    t(this, "outlineOpacity");
    e2 && Object.assign(this, e2);
  }
  getState(e2 = false) {
    let r = {};
    for (let o in this) !e2 && o === "dirty" || this[o] !== void 0 && (r[o] = this[o]);
    return r;
  }
};
var du = Object.freeze({ visible: true, color: "black", flipToFaceCamera: true, fillOpacity: 1, font: void 0, fontSize: 2, margin: [0.2, 1, 0.2, 1.5], outlineColor: "black", outlineOpacity: 1, outlineWidth: 0, outlineOffsetX: 0, outlineOffsetY: 0, outlineBlur: 0, strokeOpacity: 1, strokeWidth: 0, maxWidth: void 0, maxHeight: void 0, strokeColor: "black", hoverColor: void 0 });
c();
c();
var da = class {
  constructor(e2) {
    t(this, "dirty", true);
    t(this, "visible", true);
    t(this, "opacity", 1);
    t(this, "verticalOffset", 0);
    t(this, "interactive", false);
    t(this, "color");
    t(this, "material");
    t(this, "rotation");
    t(this, "scale");
    e2 && Object.assign(this, e2);
  }
};
c();
var Dp = [1, 1, 1];
var Ep = [0, 0, 0];

export {
  qs,
  _u,
  Ap,
  Lt,
  ur,
  Np,
  Jt2 as Jt,
  jp,
  zp,
  Vp,
  Wp,
  wu,
  Yp,
  Jp,
  tt,
  _n,
  yo,
  K,
  wi,
  tr,
  xd,
  km,
  el2 as el,
  wm,
  Mm,
  Cm,
  Dm,
  Em,
  Am,
  Om,
  Mi,
  Lm,
  Td,
  Gm,
  tl,
  Lo,
  Go,
  rr,
  It,
  Ci,
  qr,
  ae,
  dg,
  xg,
  vl,
  Og,
  yl,
  Er,
  Pt,
  Wt,
  sn,
  Fl,
  hv,
  pv,
  Jl,
  kv,
  Ov,
  Bi,
  jn,
  Xv,
  Kv,
  Jv,
  qv,
  rp,
  Qv,
  $v,
  ey,
  ty,
  ry,
  ny,
  iy,
  oy,
  tu,
  ay,
  sy,
  ly,
  uy,
  cy,
  fy,
  dy,
  hy,
  py,
  np,
  my,
  op,
  gy,
  vy,
  Vn,
  jy,
  ou,
  zy,
  $y,
  pp,
  eb,
  ji,
  ca,
  pt,
  mt,
  vp,
  lu,
  Bb,
  yp,
  bp,
  Tp,
  zn,
  Sp,
  s0,
  l0,
  kp,
  wp,
  u0,
  c0,
  f0,
  Cp,
  d0,
  su,
  h0,
  p0,
  m0,
  ua,
  fa,
  du,
  da,
  Dp,
  Ep
};
//# sourceMappingURL=chunk-EU42VC65.js.map
