{
  "version": 3,
  "sources": ["../../@mappedin/mappedin-js/lib/esm/text3d-TIW6FORE.js"],
  "sourcesContent": ["import{Aa as i,ga as H,va as S,wa as G,xa as U,ya as $}from\"./chunk-7MMSKILE.js\";import\"./chunk-MEAXYDH5.js\";import\"./chunk-NCE64JTI.js\";import{D as A,M as w,P as Z}from\"./chunk-6XEFZ77W.js\";import{a as V}from\"./chunk-4O5ABVXW.js\";import\"./chunk-HALSTKAB.js\";V();var g=new Z,n=new w,J=new w(0,0,1);async function ot(p,s,o,M){var m,k,d,t,x,h,T,y,f,l,c,O;let r=s.feature.properties,e=new S;s.textMesh=e,e.text=r.text,e.anchorX=\"center\",e.anchorY=\"middle\",e.textAlign=(m=r.align)!=null?m:\"center\",e.color=(k=r.color)!=null?k:\"black\",e.fontSize=r.fontSize||20;let a=(d=o.font)!=null?d:i.font;a?e.font=a:u?e.font=await u:e.font=await q(),e.outlineOpacity=(t=o.outlineOpacity)!=null?t:i.outlineOpacity,e.outlineColor=(x=o.outlineColor)!=null?x:i.outlineColor,e.outlineOffsetY=(h=o.outlineOffsetY)!=null?h:i.outlineOffsetY,e.outlineOffsetX=(T=o.outlineOffsetX)!=null?T:i.outlineOffsetX,e.outlineWidth=(y=o.outlineWidth)!=null?y:i.outlineWidth,e.outlineBlur=(f=o.outlineBlur)!=null?f:i.outlineBlur,e.strokeWidth=(l=o.strokeWidth)!=null?l:i.strokeWidth,e.strokeColor=(c=o.strokeColor)!=null?c:i.strokeColor,e.strokeOpacity=(O=o.strokeOpacity)!=null?O:i.strokeOpacity;let W=M(s.feature.geometry.coordinates);return e.position.copy(W),e.position.z=r.verticalOffset,e.rotation.z=A.degToRad(-r.rotation),e.userData={entityId:p.toString(),rotationZ:-r.rotation},{text:e}}async function it(p,s,o,M){var O,P,z,B,X,D,F,Y,b,E,I,R,v,_,L;let r=s.feature.properties,{textArea:e}=r;if(!e)throw new Error(\"textArea is required\");let a=(O=o.margin)!=null?O:i.margin,[W,m,k,d]=Array.isArray(a)?a:[a,a,a,a],t=new S;t.text=r.content;let x=e.maxHeight-W-k,h=e.maxWidth-d-m;t.fontSize=Math.min(x,(P=o.fontSize)!=null?P:i.fontSize),t.color=(z=o.color)!=null?z:i.color,t.maxWidth=(B=o.maxWidth)!=null?B:h,t.anchorX=\"center\",t.anchorY=\"middle\",t.textAlign=\"center\";let T=(X=o.font)!=null?X:i.font;T?t.font=T:u?t.font=await u:t.font=await q(),t.outlineOpacity=(D=o.outlineOpacity)!=null?D:i.outlineOpacity,t.outlineColor=(F=o.outlineColor)!=null?F:i.outlineColor,t.outlineOffsetY=(Y=o.outlineOffsetY)!=null?Y:i.outlineOffsetY,t.outlineOffsetX=(b=o.outlineOffsetX)!=null?b:i.outlineOffsetX,t.outlineWidth=(E=o.outlineWidth)!=null?E:i.outlineWidth,t.outlineBlur=(I=o.outlineBlur)!=null?I:i.outlineBlur,t.strokeWidth=(R=o.strokeWidth)!=null?R:i.strokeWidth,t.strokeColor=(v=o.strokeColor)!=null?v:i.strokeColor,t.strokeOpacity=(_=o.strokeOpacity)!=null?_:i.strokeOpacity;let y=M(e.position,n);t.position.copy(y);let f=H(Math.PI/2-A.degToRad(e.rotation));t.rotation.z=f,t.userData={entityId:p.toString(),rotationZ:f};let l,c;try{c=(await $(t,h,x,t.fontSize*.2)).size}catch(j){throw(L=t.dispose)==null||L.call(t),new Error(\"Cannot fit text to area: entityId: \".concat(s.polygonEntityId,\" \").concat(j))}if(c)return g.identity(),n.set(0,0,1),g.makeRotationAxis(J,f),n.set(e.align===\"near\"?d+c[0]/2:e.maxWidth/2,0,0),n.applyMatrix4(g),t.position.x-=n.x,t.position.y-=n.y,s.textMesh=t,l&&(n.set(e.maxWidth/2,0,0),n.applyMatrix4(g),l.position.x-=n.x,l.position.y-=n.y),{text:t}}var u;function q(p){return u=U(p),u}export{G as BatchedText,S as Text,it as createTroikaTextArea,ot as createTroikaTextPoint,u as fontPreloadLoadPromise,q as preloadFont};\n"],
  "mappings": "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",
  "names": ["c", "R"]
}
